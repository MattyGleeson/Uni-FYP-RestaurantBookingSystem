ρ
~C:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\App_Start\BundleConfig.cs
	namespace 	
BookingSystemApp
 
{ 
public 

class 
BundleConfig 
{ 
public		 
static		 
void		 
RegisterBundles		 *
(		* +
BundleCollection		+ ;
bundles		< C
)		C D
{

 	
bundles 
. 
Add 
( 
new 
ScriptBundle (
(( )
$str) ;
); <
.< =
Include= D
(D E
$str 7
)7 8
)8 9
;9 :
bundles 
. 
Add 
( 
new 
ScriptBundle (
(( )
$str) >
)> ?
.? @
Include@ G
(G H
$str 4
)4 5
)5 6
;6 7
bundles 
. 
Add 
( 
new 
ScriptBundle (
(( )
$str) >
)> ?
.? @
Include@ G
(G H
$str /
)/ 0
)0 1
;1 2
bundles 
. 
Add 
( 
new 
ScriptBundle (
(( )
$str) @
)@ A
.A B
IncludeB I
(I J
$str 5
)5 6
)6 7
;7 8
bundles 
. 
Add 
( 
new 
ScriptBundle (
(( )
$str) >
)> ?
.? @
Include@ G
(G H
$str .
,. /
$str ,
), -
)- .
;. /
bundles 
. 
Add 
( 
new 
ScriptBundle (
(( )
$str) =
)= >
.> ?
Include? F
(F G
$str 2
,2 3
$str <
)< =
)= >
;> ?
bundles!! 
.!! 
Add!! 
(!! 
new!! 
StyleBundle!! '
(!!' (
$str!!( @
)!!@ A
.!!A B
Include!!B I
(!!I J
$str"" /
,""/ 0
$str## >
)##> ?
)##? @
;##@ A
bundles%% 
.%% 
Add%% 
(%% 
new%% 
StyleBundle%% '
(%%' (
$str%%( C
)%%C D
.%%D E
Include%%E L
(%%L M
$str&& 5
,&&5 6
$str'' .
)''. /
)''/ 0
;''0 1
bundles)) 
.)) 
Add)) 
()) 
new)) 
StyleBundle)) '
())' (
$str))( :
,)): ;
$str	))< ‡
)
))‡ 
.
)) ‰
Include
))‰ 
(
)) ‘
$str** &
)**& '
)**' (
;**( )
bundles,, 
.,, 
Add,, 
(,, 
new,, 
ScriptBundle,, (
(,,( )
$str,,) ;
,,,; <
$str	,,= †
)
,,† ‡
.
,,‡ 
Include
,, 
(
,, 
$str-- %
)--% &
)--& '
;--' (
}.. 	
}// 
}00 δ
~C:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\App_Start\FilterConfig.cs
	namespace 	
BookingSystemApp
 
{ 
public 

class 
FilterConfig 
{ 
public		 
static		 
void		 !
RegisterGlobalFilters		 0
(		0 1"
GlobalFilterCollection		1 G
filters		H O
)		O P
{

 	
filters 
. 
Add 
( 
new  
HandleErrorAttribute 0
(0 1
)1 2
)2 3
;3 4
filters 
. 
Add 
( 
new  
MessagesActionFilter 0
(0 1
)1 2
)2 3
;3 4
} 	
} 
} ‚

}C:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\App_Start\RouteConfig.cs
	namespace 	
BookingSystemApp
 
{		 
public

 

class

 
RouteConfig

 
{ 
public 
static 
void 
RegisterRoutes )
() *
RouteCollection* 9
routes: @
)@ A
{ 	
routes 
. 
IgnoreRoute 
( 
$str ;
); <
;< =
routes 
. !
MapMvcAttributeRoutes (
(( )
)) *
;* +
routes 
. 
MapRoute 
( 
name 
: 
$str 
,  
url 
: 
$str 1
,1 2
defaults 
: 
new 
{ 

controller  *
=+ ,
$str- 3
,3 4
action5 ;
=< =
$str> E
,E F
idG I
=J K
UrlParameterL X
.X Y
OptionalY a
}b c
) 
; 
} 	
} 
} ε
‰C:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\Controllers\Admin\AdminController.cs
	namespace 	
BookingSystemApp
 
. 
Controllers &
{		 
public

 

class

 
AdminController

  
:

! "!
MessageControllerBase

# 8
{ 
public 
ActionResult 
Index !
(! "
)" #
{ 	
return 
View 
( 
) 
; 
} 	
} 
} ¨4
‘C:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\Controllers\Admin\DietInfoAdminController.cs
	namespace 	
BookingSystemApp
 
. 
Controllers &
.& '
Admin' ,
{ 
[ 
Route 

(
 
$str *
)* +
]+ ,
public 

class #
DietInfoAdminController (
:) *!
MessageControllerBase+ @
{ 
DietInfoFacade 
_dietInfoFacade &
;& '
public #
DietInfoAdminController &
(& '
)' (
{ 	
_dietInfoFacade 
= 
new !
DietInfoFacade" 0
(0 1
)1 2
;2 3
} 	
public 
ActionResult 
Index !
(! "
)" #
{ 	
IEnumerable 
< 
DietInfo  
>  !
res" %
=& '
_dietInfoFacade( 7
.7 8
Get8 ;
(; <
)< =
;= >
return 
View 
( 
res 
) 
; 
} 	
public!! 
ActionResult!! 
Create!! "
(!!" #
)!!# $
{"" 	
return## 
View## 
(## 
)## 
;## 
}$$ 	
[)) 	
HttpPost))	 
])) 
[** 	$
ValidateAntiForgeryToken**	 !
]**! "
public++ 
ActionResult++ 
Create++ "
(++" #
[++# $
Bind++$ (
(++( )
Include++) 0
=++1 2
$str++3 <
)++< =
]++= >

DietInfoVM++? I
dietInfo++J R
)++R S
{,, 	
if-- 
(-- 

ModelState-- 
.-- 
IsValid-- "
)--" #
{.. 
DietInfo// 
res// 
=// 
_dietInfoFacade// .
.//. /
Create/// 5
(//5 6
new//6 9
DietInfo//: B
{00 
Id11 
=11 
dietInfo11 !
.11! "
Id11" $
,11$ %
Name22 
=22 
dietInfo22 #
.22# $
Name22$ (
}33 
)33 
;33 
return44 
RedirectToAction44 '
(44' (
$str44( /
)44/ 0
;440 1
}55 
return77 
View77 
(77 
dietInfo77  
)77  !
;77! "
}88 	
public;; 
ActionResult;; 
Edit;;  
(;;  !
int;;! $
?;;$ %
id;;& (
);;( )
{<< 	
if== 
(== 
id== 
==== 
null== 
)== 
return>> 
new>>  
HttpStatusCodeResult>> /
(>>/ 0
HttpStatusCode>>0 >
.>>> ?

BadRequest>>? I
)>>I J
;>>J K
DietInfo@@ 
res@@ 
=@@ 
_dietInfoFacade@@ *
.@@* +
FindById@@+ 3
(@@3 4
(@@4 5
int@@5 8
)@@8 9
id@@: <
)@@< =
;@@= >
ifBB 
(BB 
resBB 
==BB 
nullBB 
)BB 
returnCC 
HttpNotFoundCC #
(CC# $
)CC$ %
;CC% &
returnEE 
ViewEE 
(EE 
newEE 

DietInfoVMEE &
{FF 
IdGG 
=GG 
resGG 
.GG 
IdGG 
,GG 
NameHH 
=HH 
resHH 
.HH 
NameHH 
}II 
)II 
;II 
}JJ 	
[OO 	
HttpPostOO	 
]OO 
[PP 	$
ValidateAntiForgeryTokenPP	 !
]PP! "
publicQQ 
ActionResultQQ 
EditQQ  
(QQ  !
[QQ! "
BindQQ" &
(QQ& '
IncludeQQ' .
=QQ/ 0
$strQQ1 :
)QQ: ;
]QQ; <

DietInfoVMQQ= G
dietInfoQQH P
)QQP Q
{RR 	
ifSS 
(SS 

ModelStateSS 
.SS 
IsValidSS "
)SS" #
{TT 
DietInfoUU 
resUU 
=UU 
_dietInfoFacadeUU .
.UU. /
UpdateUU/ 5
(UU5 6
newUU6 9
DietInfoUU: B
{VV 
IdWW 
=WW 
dietInfoWW !
.WW! "
IdWW" $
,WW$ %
NameXX 
=XX 
dietInfoXX #
.XX# $
NameXX$ (
}YY 
)YY 
;YY 
returnZZ 
RedirectToActionZZ '
(ZZ' (
$strZZ( /
)ZZ/ 0
;ZZ0 1
}[[ 
return]] 
View]] 
(]] 
dietInfo]]  
)]]  !
;]]! "
}^^ 	
publicaa 
ActionResultaa 
Deleteaa "
(aa" #
intaa# &
?aa& '
idaa( *
)aa* +
{bb 	
ifcc 
(cc 
idcc 
==cc 
nullcc 
)cc 
returndd 
newdd  
HttpStatusCodeResultdd /
(dd/ 0
HttpStatusCodedd0 >
.dd> ?

BadRequestdd? I
)ddI J
;ddJ K
DietInfoff 
resff 
=ff 
_dietInfoFacadeff *
.ff* +
FindByIdff+ 3
(ff3 4
(ff4 5
intff5 8
)ff8 9
idff: <
)ff< =
;ff= >
ifhh 
(hh 
reshh 
==hh 
nullhh 
)hh 
returnii 
HttpNotFoundii #
(ii# $
)ii$ %
;ii% &
returnkk 
Viewkk 
(kk 
reskk 
)kk 
;kk 
}ll 	
[oo 	
HttpPostoo	 
,oo 

ActionNameoo 
(oo 
$stroo &
)oo& '
]oo' (
[pp 	$
ValidateAntiForgeryTokenpp	 !
]pp! "
publicqq 
ActionResultqq 
DeleteConfirmedqq +
(qq+ ,
intqq, /
idqq0 2
)qq2 3
{rr 	
_dietInfoFacadess 
.ss 
Deletess "
(ss" #
idss# %
)ss% &
;ss& '
returntt 
RedirectToActiontt #
(tt# $
$strtt$ +
)tt+ ,
;tt, -
}uu 	
}vv 
}ww ΕΨ
‘C:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\Controllers\Admin\MenuItemAdminController.cs
	namespace 	
BookingSystemApp
 
. 
Controllers &
.& '
Admin' ,
{ 
[ 
Route 

(
 
$str *
)* +
]+ ,
public 

class #
MenuItemAdminController (
:) *!
MessageControllerBase+ @
{ 
private 
readonly 

MenuFacade #
_menuFacade$ /
;/ 0
private 
readonly 
DietInfoFacade '
_dietInfoFacade( 7
;7 8
private 
readonly 
MenuItemTypeFacade +
_menuItemTypeFacade, ?
;? @
private 
readonly 
ImageFacade $
_imageFacade% 1
;1 2
public #
MenuItemAdminController &
(& '
)' (
{ 	
_menuFacade 
= 
new 

MenuFacade (
(( )
)) *
;* +
_dietInfoFacade 
= 
new !
DietInfoFacade" 0
(0 1
)1 2
;2 3
_menuItemTypeFacade 
=  !
new" %
MenuItemTypeFacade& 8
(8 9
)9 :
;: ;
_imageFacade 
= 
new 
ImageFacade *
(* +
)+ ,
;, -
} 	
public!! 
ActionResult!! 
Index!! !
(!!! "
)!!" #
{"" 	
IEnumerable## 
<## 
MenuItem##  
>##  !
res##" %
=##& '
_menuFacade##( 3
.##3 4
Get##4 7
(##7 8
)##8 9
;##9 :
return%% 
View%% 
(%% 
res%% 
.%% 
Select%% "
(%%" #
m%%# $
=>%%% '
CreateVMFromDto%%( 7
(%%7 8
m%%8 9
)%%9 :
)%%: ;
)%%; <
;%%< =
}&& 	
public)) 
ActionResult)) 
Details)) #
())# $
int))$ '
?))' (
id))) +
)))+ ,
{** 	
if++ 
(++ 
id++ 
==++ 
null++ 
)++ 
return,, 
new,,  
HttpStatusCodeResult,, /
(,,/ 0
HttpStatusCode,,0 >
.,,> ?

BadRequest,,? I
),,I J
;,,J K
MenuItem.. 
res.. 
=.. 
_menuFacade.. &
...& '
FindById..' /
(../ 0
(..0 1
int..1 4
)..4 5
id..6 8
)..8 9
;..9 :
if00 
(00 
res00 
==00 
null00 
)00 
return11 
HttpNotFound11 #
(11# $
)11$ %
;11% &
ViewBag33 
.33 

dietInfoId33 
=33  
new33! $

SelectList33% /
(33/ 0
_dietInfoFacade330 ?
.33? @
Get33@ C
(33C D
)33D E
.33E F
OrderBy33F M
(33M N
d33N O
=>33P R
d33S T
.33T U
Name33U Y
)33Y Z
,33Z [
$str33\ `
,33` a
$str33b h
,33h i
$str	33j ƒ
)
33ƒ „
;
33„ …
ViewBag44 
.44 

categoryId44 
=44  
new44! $

SelectList44% /
(44/ 0
_menuItemTypeFacade440 C
.44C D
Get44D G
(44G H
)44H I
.44I J
OrderBy44J Q
(44Q R
d44R S
=>44T V
d44W X
.44X Y
Name44Y ]
)44] ^
,44^ _
$str44` d
,44d e
$str44f l
,44l m
$str44n 
)	44 €
;
44€ 
Session66 
[66 
$str66  
]66  !
=66" #
res66$ '
.66' (
Id66( *
;66* +
return88 
View88 
(88 
new88 
MenuItemViewVM88 *
{99 
Id:: 
=:: 
res:: 
.:: 
Id:: 
,:: 
Name;; 
=;; 
res;; 
.;; 
Name;; 
,;;  
Description<< 
=<< 
res<< !
.<<! "
Description<<" -
,<<- .
ImageId== 
=== 
res== 
.== 
ImageId== %
,==% &
Price>> 
=>> 
res>> 
.>> 
Price>> !
,>>! "
DietInfo?? 
=?? 
res?? 
.?? 
DietInfo?? '
,??' (
Types@@ 
=@@ 
res@@ 
.@@ 
Types@@ !
}AA 
)AA 
;AA 
}BB 	
publicDD 
asyncDD 
TaskDD 
<DD 
ActionResultDD &
>DD& '
ImageFromIdDD( 3
(DD3 4
intDD4 7
idDD8 :
)DD: ;
{EE 	
ImageFF 
iFF 
=FF 
_imageFacadeFF "
.FF" #
	LoadImageFF# ,
(FF, -
idFF- /
)FF/ 0
;FF0 1
returnHH 
FileHH 
(HH 
iHH 
.HH 
FileContentHH %
,HH% &
iHH' (
.HH( )
TypeHH) -
)HH- .
;HH. /
}II 	
publicLL 
ActionResultLL 
ManageDietInfoLL *
(LL* +
intLL+ .
?LL. /
idLL0 2
)LL2 3
{MM 	
ViewBagNN 
.NN 

dietInfoIdNN 
=NN  
newNN! $

SelectListNN% /
(NN/ 0
_dietInfoFacadeNN0 ?
.NN? @
GetNN@ C
(NNC D
)NND E
.NNE F
OrderByNNF M
(NNM N
dNNN O
=>NNP R
dNNS T
.NNT U
NameNNU Y
)NNY Z
,NNZ [
$strNN\ `
,NN` a
$strNNb h
,NNh i
$str	NNj ƒ
)
NNƒ „
;
NN„ …
ifPP 
(PP 
idPP 
==PP 
nullPP 
)PP 
returnQQ 
newQQ  
HttpStatusCodeResultQQ /
(QQ/ 0
HttpStatusCodeQQ0 >
.QQ> ?

BadRequestQQ? I
)QQI J
;QQJ K
MenuItemSS 
resSS 
=SS 
_menuFacadeSS &
.SS& '
FindByIdSS' /
(SS/ 0
(SS0 1
intSS1 4
)SS4 5
idSS5 7
)SS7 8
;SS8 9
ifUU 
(UU 
resUU 
==UU 
nullUU 
)UU 
returnVV 
HttpNotFoundVV #
(VV# $
)VV$ %
;VV% &
SessionXX 
[XX 
$strXX  
]XX  !
=XX" #
resXX$ '
.XX' (
IdXX( *
;XX* +
returnZZ 
ViewZZ 
(ZZ 
resZZ 
.ZZ 
DietInfoZZ $
.ZZ$ %
SelectZZ% +
(ZZ+ ,
dZZ, -
=>ZZ. 0
newZZ1 4

DietInfoVMZZ5 ?
{[[ 
Id\\ 
=\\ 
d\\ 
.\\ 
Id\\ 
,\\ 
Name]] 
=]] 
d]] 
.]] 
Name]] 
}^^ 
)^^ 
)^^ 
;^^ 
}__ 	
publicbb 
ActionResultbb 
RemoveDietInfobb *
(bb* +
intbb+ .
?bb. /
idbb0 2
)bb2 3
{cc 	
intdd 

menuItemIddd 
=dd 
Sessiondd $
[dd$ %
$strdd% 1
]dd1 2
!=dd3 5
nulldd6 :
?dd; <
(dd= >
intdd> A
)ddA B
SessionddB I
[ddI J
$strddJ V
]ddV W
:ddX Y
-ddZ [
$numdd[ \
;dd\ ]
ifff 
(ff 
idff 
!=ff 
nullff 
&&ff 

menuItemIdff (
!=ff) +
-ff, -
$numff- .
)ff. /
{gg 
_menuFacadehh 
.hh &
RemoveDietInfoFromMenuItemhh 6
(hh6 7

menuItemIdhh7 A
,hhA B
(hhC D
inthhD G
)hhG H
idhhI K
)hhK L
;hhL M
}ii 
returnjj 
RedirectToActionjj #
(jj# $
$strjj$ -
,jj- .
newjj/ 2
{jj3 4
idjj5 7
=jj8 9

menuItemIdjj: D
}jjE F
)jjF G
;jjG H
}kk 	
[mm 	
HttpPostmm	 
]mm 
publicoo 
ActionResultoo 
AddDietInfooo '
(oo' (
intoo( +
?oo+ ,

dietInfoIdoo- 7
)oo7 8
{pp 	
intqq 

menuItemIdqq 
=qq 
Sessionqq $
[qq$ %
$strqq% 1
]qq1 2
!=qq3 5
nullqq6 :
?qq; <
(qq= >
intqq> A
)qqA B
SessionqqC J
[qqJ K
$strqqK W
]qqW X
:qqY Z
-qq[ \
$numqq\ ]
;qq] ^
ifss 
(ss 

dietInfoIdss 
!=ss 
nullss "
&&ss# %

menuItemIdss& 0
!=ss1 3
-ss4 5
$numss5 6
)ss6 7
{tt 
_menuFacadeuu 
.uu !
AddDietInfoToMenuItemuu 1
(uu1 2

menuItemIduu2 <
,uu< =
(uu> ?
intuu? B
)uuB C

dietInfoIduuD N
)uuN O
;uuO P
}vv 
returnww 
RedirectToActionww #
(ww# $
$strww$ -
,ww- .
newww/ 2
{ww3 4
idww5 7
=ww8 9

menuItemIdww: D
}wwE F
)wwF G
;wwG H
}xx 	
public{{ 
ActionResult{{ 
ManageCategories{{ ,
({{, -
int{{- 0
?{{0 1
id{{2 4
){{4 5
{|| 	
ViewBag}} 
.}} 

categoryId}} 
=}}  
new}}! $

SelectList}}% /
(}}/ 0
_menuItemTypeFacade}}0 C
.}}C D
Get}}D G
(}}G H
)}}H I
.}}I J
OrderBy}}J Q
(}}Q R
d}}R S
=>}}T V
d}}W X
.}}X Y
Name}}Y ]
)}}] ^
,}}^ _
$str}}` d
,}}d e
$str}}f l
,}}l m
$str}}n 
)	}} €
;
}}€ 
if 
( 
id 
== 
null 
) 
return
€€ 
new
€€ "
HttpStatusCodeResult
€€ /
(
€€/ 0
HttpStatusCode
€€0 >
.
€€> ?

BadRequest
€€? I
)
€€I J
;
€€J K
MenuItem
‚‚ 
res
‚‚ 
=
‚‚ 
_menuFacade
‚‚ &
.
‚‚& '
FindById
‚‚' /
(
‚‚/ 0
(
‚‚0 1
int
‚‚1 4
)
‚‚4 5
id
‚‚5 7
)
‚‚7 8
;
‚‚8 9
if
„„ 
(
„„ 
res
„„ 
==
„„ 
null
„„ 
)
„„ 
return
…… 
HttpNotFound
…… #
(
……# $
)
……$ %
;
……% &
Session
‡‡ 
[
‡‡ 
$str
‡‡  
]
‡‡  !
=
‡‡" #
res
‡‡$ '
.
‡‡' (
Id
‡‡( *
;
‡‡* +
return
‰‰ 
View
‰‰ 
(
‰‰ 
res
‰‰ 
.
‰‰ 
Types
‰‰ !
.
‰‰! "
Select
‰‰" (
(
‰‰( )
d
‰‰) *
=>
‰‰+ -
new
‰‰. 1
MenuItemTypeVM
‰‰2 @
{
 
Id
‹‹ 
=
‹‹ 
d
‹‹ 
.
‹‹ 
Id
‹‹ 
,
‹‹ 
Name
 
=
 
d
 
.
 
Name
 
}
 
)
 
)
 
;
 
}
 	
public
‘‘ 
ActionResult
‘‘ 
RemoveCategory
‘‘ *
(
‘‘* +
int
‘‘+ .
?
‘‘. /
id
‘‘0 2
)
‘‘2 3
{
’’ 	
int
““ 
menuItemTypeId
““ 
=
““  
Session
““! (
[
““( )
$str
““) 5
]
““5 6
!=
““7 9
null
““: >
?
““? @
(
““A B
int
““B E
)
““E F
Session
““F M
[
““M N
$str
““N Z
]
““Z [
:
““\ ]
-
““^ _
$num
““_ `
;
““` a
if
•• 
(
•• 
id
•• 
!=
•• 
null
•• 
&&
•• 
menuItemTypeId
•• ,
!=
••- /
-
••0 1
$num
••1 2
)
••2 3
{
–– 
_menuFacade
—— 
.
—— ,
RemoveMenuItemTypeFromMenuItem
—— :
(
——: ;
menuItemTypeId
——; I
,
——I J
(
——K L
int
——L O
)
——O P
id
——P R
)
——R S
;
——S T
}
 
return
™™ 
RedirectToAction
™™ #
(
™™# $
$str
™™$ -
,
™™- .
new
™™/ 2
{
™™3 4
id
™™5 7
=
™™8 9
menuItemTypeId
™™: H
}
™™I J
)
™™J K
;
™™K L
}
 	
[
 	
HttpPost
	 
]
 
public
 
ActionResult
 
AddCategory
 '
(
' (
int
( +
?
+ ,

categoryId
- 7
)
7 8
{
 	
int
   

menuItemId
   
=
   
Session
   $
[
  $ %
$str
  % 1
]
  1 2
!=
  3 5
null
  6 :
?
  ; <
(
  = >
int
  > A
)
  A B
Session
  C J
[
  J K
$str
  K W
]
  W X
:
  Y Z
-
  [ \
$num
  \ ]
;
  ] ^
if
ΆΆ 
(
ΆΆ 

categoryId
ΆΆ 
!=
ΆΆ 
null
ΆΆ "
&&
ΆΆ# %

menuItemId
ΆΆ& 0
!=
ΆΆ1 3
-
ΆΆ4 5
$num
ΆΆ5 6
)
ΆΆ6 7
{
££ 
_menuFacade
¤¤ 
.
¤¤ '
AddMenuItemTypeToMenuItem
¤¤ 5
(
¤¤5 6

menuItemId
¤¤6 @
,
¤¤@ A
(
¤¤B C
int
¤¤C F
)
¤¤F G

categoryId
¤¤H R
)
¤¤R S
;
¤¤S T
}
¥¥ 
return
¦¦ 
RedirectToAction
¦¦ #
(
¦¦# $
$str
¦¦$ -
,
¦¦- .
new
¦¦/ 2
{
¦¦3 4
id
¦¦5 7
=
¦¦8 9

menuItemId
¦¦: D
}
¦¦E F
)
¦¦F G
;
¦¦G H
}
§§ 	
public
 
ActionResult
 
Create
 "
(
" #
)
# $
{
«« 	
return
¬¬ 
View
¬¬ 
(
¬¬ 
)
¬¬ 
;
¬¬ 
}
­­ 	
[
²² 	
HttpPost
²²	 
]
²² 
[
³³ 	&
ValidateAntiForgeryToken
³³	 !
]
³³! "
public
΄΄ 
ActionResult
΄΄ 
Create
΄΄ "
(
΄΄" #
[
΄΄# $
Bind
΄΄$ (
(
΄΄( )
Include
΄΄) 0
=
΄΄1 2
$str
΄΄3 T
)
΄΄T U
]
΄΄U V

MenuItemVM
΄΄W a
menuItem
΄΄b j
)
΄΄j k
{
µµ 	
if
¶¶ 
(
¶¶ 

ModelState
¶¶ 
.
¶¶ 
IsValid
¶¶ "
)
¶¶" #
{
·· 
MenuItem
ΈΈ 
res
ΈΈ 
=
ΈΈ 
_menuFacade
ΈΈ *
.
ΈΈ* +
Create
ΈΈ+ 1
(
ΈΈ1 2
new
ΈΈ2 5
MenuItem
ΈΈ6 >
{
ΉΉ 
Name
ΊΊ 
=
ΊΊ 
menuItem
ΊΊ #
.
ΊΊ# $
Name
ΊΊ$ (
,
ΊΊ( )
Description
»» 
=
»»  !
menuItem
»»" *
.
»»* +
Description
»»+ 6
,
»»6 7
Price
ΌΌ 
=
ΌΌ 
menuItem
ΌΌ $
.
ΌΌ$ %
Price
ΌΌ% *
}
½½ 
)
½½ 
;
½½ 
var
ΏΏ 
fileName
ΏΏ 
=
ΏΏ 
Path
ΏΏ #
.
ΏΏ# $
GetFileName
ΏΏ$ /
(
ΏΏ/ 0
menuItem
ΏΏ0 8
.
ΏΏ8 9
Image
ΏΏ9 >
.
ΏΏ> ?
FileName
ΏΏ? G
)
ΏΏG H
;
ΏΏH I
var
ΐΐ 
path
ΐΐ 
=
ΐΐ 
Path
ΐΐ 
.
ΐΐ  
Combine
ΐΐ  '
(
ΐΐ' (
Server
ΐΐ( .
.
ΐΐ. /
MapPath
ΐΐ/ 6
(
ΐΐ6 7
$str
ΐΐ7 B
)
ΐΐB C
,
ΐΐC D
fileName
ΐΐE M
)
ΐΐM N
;
ΐΐN O
Stream
ΑΑ 
imgFileStream
ΑΑ $
=
ΑΑ% &
menuItem
ΑΑ' /
.
ΑΑ/ 0
Image
ΑΑ0 5
.
ΑΑ5 6
InputStream
ΑΑ6 A
;
ΑΑA B
byte
ΒΒ 
[
ΒΒ 
]
ΒΒ 
documentBytes
ΒΒ $
=
ΒΒ% &
new
ΒΒ' *
byte
ΒΒ+ /
[
ΒΒ/ 0
imgFileStream
ΒΒ0 =
.
ΒΒ= >
Length
ΒΒ> D
]
ΒΒD E
;
ΒΒE F
imgFileStream
ΓΓ 
.
ΓΓ 
Read
ΓΓ "
(
ΓΓ" #
documentBytes
ΓΓ# 0
,
ΓΓ0 1
$num
ΓΓ2 3
,
ΓΓ3 4
documentBytes
ΓΓ5 B
.
ΓΓB C
Length
ΓΓC I
)
ΓΓI J
;
ΓΓJ K
Image
ΕΕ 
img
ΕΕ 
=
ΕΕ 
_imageFacade
ΕΕ (
.
ΕΕ( )!
UploadMenuItemImage
ΕΕ) <
(
ΕΕ< =
new
ΕΕ= @
Image
ΕΕA F
{
ΖΖ 
Name
ΗΗ 
=
ΗΗ 
fileName
ΗΗ #
,
ΗΗ# $
Size
ΘΘ 
=
ΘΘ 
menuItem
ΘΘ #
.
ΘΘ# $
Image
ΘΘ$ )
.
ΘΘ) *
ContentLength
ΘΘ* 7
,
ΘΘ7 8
Type
ΙΙ 
=
ΙΙ 
menuItem
ΙΙ #
.
ΙΙ# $
Image
ΙΙ$ )
.
ΙΙ) *
ContentType
ΙΙ* 5
,
ΙΙ5 6
FileContent
ΚΚ 
=
ΚΚ  !
documentBytes
ΚΚ" /
,
ΚΚ/ 0
	CreatedOn
ΛΛ 
=
ΛΛ 
DateTime
ΛΛ  (
.
ΛΛ( )
Now
ΛΛ) ,
,
ΛΛ, -
Source
ΜΜ 
=
ΜΜ 
res
ΜΜ  
.
ΜΜ  !
Id
ΜΜ! #
}
ΝΝ 
)
ΝΝ 
;
ΝΝ 
return
ΟΟ 
RedirectToAction
ΟΟ '
(
ΟΟ' (
$str
ΟΟ( 1
,
ΟΟ1 2
new
ΟΟ3 6
{
ΟΟ7 8
Id
ΟΟ9 ;
=
ΟΟ< =
res
ΟΟ> A
.
ΟΟA B
Id
ΟΟB D
}
ΟΟE F
)
ΟΟF G
;
ΟΟG H
}
ΠΠ 
return
 
View
 
(
 
menuItem
  
)
  !
;
! "
}
ΣΣ 	
public
ΦΦ 
ActionResult
ΦΦ 
Edit
ΦΦ  
(
ΦΦ  !
int
ΦΦ! $
?
ΦΦ$ %
id
ΦΦ& (
)
ΦΦ( )
{
ΧΧ 	
if
ΨΨ 
(
ΨΨ 
id
ΨΨ 
==
ΨΨ 
null
ΨΨ 
)
ΨΨ 
return
ΩΩ 
new
ΩΩ "
HttpStatusCodeResult
ΩΩ /
(
ΩΩ/ 0
HttpStatusCode
ΩΩ0 >
.
ΩΩ> ?

BadRequest
ΩΩ? I
)
ΩΩI J
;
ΩΩJ K
MenuItem
ΫΫ 
res
ΫΫ 
=
ΫΫ 
_menuFacade
ΫΫ &
.
ΫΫ& '
FindById
ΫΫ' /
(
ΫΫ/ 0
(
ΫΫ0 1
int
ΫΫ1 4
)
ΫΫ4 5
id
ΫΫ6 8
)
ΫΫ8 9
;
ΫΫ9 :
if
έέ 
(
έέ 
res
έέ 
==
έέ 
null
έέ 
)
έέ 
return
ήή 
HttpNotFound
ήή #
(
ήή# $
)
ήή$ %
;
ήή% &
return
ΰΰ 
View
ΰΰ 
(
ΰΰ 
new
ΰΰ 

MenuItemVM
ΰΰ &
{
αα 
Id
ββ 
=
ββ 
res
ββ 
.
ββ 
Id
ββ 
,
ββ 
Name
γγ 
=
γγ 
res
γγ 
.
γγ 
Name
γγ 
,
γγ  
Description
δδ 
=
δδ 
res
δδ !
.
δδ! "
Description
δδ" -
,
δδ- .
Price
εε 
=
εε 
res
εε 
.
εε 
Price
εε !
,
εε! "
DietInfo
ζζ 
=
ζζ 
res
ζζ 
.
ζζ 
DietInfo
ζζ '
.
ζζ' (
Any
ζζ( +
(
ζζ+ ,
)
ζζ, -
?
ζζ. /
String
ζζ0 6
.
ζζ6 7
Join
ζζ7 ;
(
ζζ; <
$str
ζζ< @
,
ζζ@ A
res
ζζB E
.
ζζE F
DietInfo
ζζF N
.
ζζN O
Select
ζζO U
(
ζζU V
d
ζζV W
=>
ζζX Z
d
ζζ[ \
.
ζζ\ ]
Name
ζζ] a
)
ζζa b
)
ζζb c
:
ζζd e
$str
ζζf k
,
ζζk l
Types
ηη 
=
ηη 
res
ηη 
.
ηη 
Types
ηη !
.
ηη! "
Any
ηη" %
(
ηη% &
)
ηη& '
?
ηη( )
String
ηη* 0
.
ηη0 1
Join
ηη1 5
(
ηη5 6
$str
ηη6 :
,
ηη: ;
res
ηη< ?
.
ηη? @
Types
ηη@ E
.
ηηE F
Select
ηηF L
(
ηηL M
t
ηηM N
=>
ηηO Q
t
ηηR S
.
ηηS T
Name
ηηT X
)
ηηX Y
)
ηηY Z
:
ηη[ \
$str
ηη] b
}
θθ 
)
θθ 
;
θθ 
}
ιι 	
[
ξξ 	
HttpPost
ξξ	 
]
ξξ 
[
οο 	&
ValidateAntiForgeryToken
οο	 !
]
οο! "
public
ππ 
ActionResult
ππ 
Edit
ππ  
(
ππ  !
[
ππ! "
Bind
ππ" &
(
ππ& '
Include
ππ' .
=
ππ/ 0
$str
ππ1 R
)
ππR S
]
ππS T

MenuItemVM
ππU _
menuItem
ππ` h
)
ππh i
{
ρρ 	
if
ςς 
(
ςς 

ModelState
ςς 
.
ςς 
IsValid
ςς "
)
ςς" #
{
σσ 
MenuItem
ττ 
res
ττ 
=
ττ 
_menuFacade
ττ *
.
ττ* +
Update
ττ+ 1
(
ττ1 2
new
ττ2 5
MenuItem
ττ6 >
{
υυ 
Id
φφ 
=
φφ 
menuItem
φφ !
.
φφ! "
Id
φφ" $
,
φφ$ %
Name
χχ 
=
χχ 
menuItem
χχ #
.
χχ# $
Name
χχ$ (
,
χχ( )
Description
ψψ 
=
ψψ  !
menuItem
ψψ" *
.
ψψ* +
Description
ψψ+ 6
,
ψψ6 7
Price
ωω 
=
ωω 
menuItem
ωω $
.
ωω$ %
Price
ωω% *
}
ϊϊ 
)
ϊϊ 
;
ϊϊ 
return
 
RedirectToAction
 '
(
' (
$str
( 1
,
1 2
new
3 6
{
7 8
Id
9 ;
=
< =
res
> A
.
A B
Id
B D
}
E F
)
F G
;
G H
}
 
return
‘‘ 
View
‘‘ 
(
‘‘ 
menuItem
‘‘  
)
‘‘  !
;
‘‘! "
}
’’ 	
public
•• 
ActionResult
•• 
Delete
•• "
(
••" #
int
••# &
?
••& '
id
••( *
)
••* +
{
–– 	
if
—— 
(
—— 
id
—— 
==
—— 
null
—— 
)
—— 
return
 
new
 "
HttpStatusCodeResult
 /
(
/ 0
HttpStatusCode
0 >
.
> ?

BadRequest
? I
)
I J
;
J K
MenuItem
 
res
 
=
 
_menuFacade
 &
.
& '
FindById
' /
(
/ 0
(
0 1
int
1 4
)
4 5
id
6 8
)
8 9
;
9 :
if
 
(
 
res
 
==
 
null
 
)
 
return
 
HttpNotFound
 #
(
# $
)
$ %
;
% &
return
 
View
 
(
 
res
 
)
 
;
 
}
   	
[
££ 	
HttpPost
££	 
,
££ 

ActionName
££ 
(
££ 
$str
££ &
)
££& '
]
££' (
[
¤¤ 	&
ValidateAntiForgeryToken
¤¤	 !
]
¤¤! "
public
¥¥ 
ActionResult
¥¥ 
DeleteConfirmed
¥¥ +
(
¥¥+ ,
int
¥¥, /
id
¥¥0 2
)
¥¥2 3
{
¦¦ 	
_menuFacade
§§ 
.
§§ 
Delete
§§ 
(
§§ 
id
§§ !
)
§§! "
;
§§" #
return
¨¨ 
RedirectToAction
¨¨ #
(
¨¨# $
$str
¨¨$ +
)
¨¨+ ,
;
¨¨, -
}
©© 	
private
«« 
MenuItemViewVM
«« 
CreateVMFromDto
«« .
(
««. /
MenuItem
««/ 7
m
««8 9
)
««9 :
{
¬¬ 	
return
­­ 
new
­­ 
MenuItemViewVM
­­ %
{
®® 
Id
―― 
=
―― 
m
―― 
.
―― 
Id
―― 
,
―― 
Name
°° 
=
°° 
m
°° 
.
°° 
Name
°° 
,
°° 
Description
±± 
=
±± 
m
±± 
.
±±  
Description
±±  +
,
±±+ ,
Price
²² 
=
²² 
m
²² 
.
²² 
Price
²² 
,
²²  
ImageId
³³ 
=
³³ 
m
³³ 
.
³³ 
ImageId
³³ #
!=
³³$ &
-
³³' (
$num
³³( )
?
³³* +
m
³³, -
.
³³- .
ImageId
³³. 5
:
³³6 7
null
³³8 <
,
³³< =
	DietInfoS
΄΄ 
=
΄΄ 
m
΄΄ 
.
΄΄ 
DietInfo
΄΄ &
.
΄΄& '
Any
΄΄' *
(
΄΄* +
)
΄΄+ ,
?
΄΄- .
String
΄΄/ 5
.
΄΄5 6
Join
΄΄6 :
(
΄΄: ;
$str
΄΄; ?
,
΄΄? @
m
΄΄A B
.
΄΄B C
DietInfo
΄΄C K
.
΄΄K L
Select
΄΄L R
(
΄΄R S
d
΄΄S T
=>
΄΄U W
d
΄΄X Y
.
΄΄Y Z
Name
΄΄Z ^
)
΄΄^ _
)
΄΄_ `
:
΄΄a b
$str
΄΄c h
,
΄΄h i
TypesS
µµ 
=
µµ 
m
µµ 
.
µµ 
Types
µµ  
.
µµ  !
Any
µµ! $
(
µµ$ %
)
µµ% &
?
µµ' (
String
µµ) /
.
µµ/ 0
Join
µµ0 4
(
µµ4 5
$str
µµ5 9
,
µµ9 :
m
µµ; <
.
µµ< =
Types
µµ= B
.
µµB C
Select
µµC I
(
µµI J
t
µµJ K
=>
µµL N
t
µµO P
.
µµP Q
Name
µµQ U
)
µµU V
)
µµV W
:
µµX Y
$str
µµZ _
}
¶¶ 
;
¶¶ 
}
·· 	
}
ΈΈ 
}ΉΉ °5
™C:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\Controllers\Admin\MenuItemCategoryAdminController.cs
	namespace 	
BookingSystemApp
 
. 
Controllers &
.& '
Admin' ,
{ 
[ 
Route 

(
 
$str 2
)2 3
]3 4
public 

class +
MenuItemCategoryAdminController 0
:1 2!
MessageControllerBase3 H
{ 
MenuItemTypeFacade 
_menuItemTypeFacade .
;. /
public +
MenuItemCategoryAdminController .
(. /
)/ 0
{ 	
_menuItemTypeFacade 
=  !
new" %
MenuItemTypeFacade& 8
(8 9
)9 :
;: ;
} 	
public 
ActionResult 
Index !
(! "
)" #
{ 	
IEnumerable 
< 
MenuItemType $
>$ %
res& )
=* +
_menuItemTypeFacade, ?
.? @
Get@ C
(C D
)D E
;E F
return 
View 
( 
res 
) 
; 
} 	
public   
ActionResult   
Create   "
(  " #
)  # $
{!! 	
return"" 
View"" 
("" 
)"" 
;"" 
}## 	
[(( 	
HttpPost((	 
](( 
[)) 	$
ValidateAntiForgeryToken))	 !
]))! "
public** 
ActionResult** 
Create** "
(**" #
[**# $
Bind**$ (
(**( )
Include**) 0
=**1 2
$str**3 <
)**< =
]**= >
MenuItemTypeVM**? M
menuItemType**N Z
)**Z [
{++ 	
if,, 
(,, 

ModelState,, 
.,, 
IsValid,, "
),," #
{-- 
MenuItemType.. 
res..  
=..! "
_menuItemTypeFacade..# 6
...6 7
Create..7 =
(..= >
new..> A
MenuItemType..B N
{// 
Id00 
=00 
menuItemType00 %
.00% &
Id00& (
,00( )
Name11 
=11 
menuItemType11 '
.11' (
Name11( ,
}22 
)22 
;22 
return33 
RedirectToAction33 '
(33' (
$str33( /
)33/ 0
;330 1
}44 
return66 
View66 
(66 
menuItemType66 $
)66$ %
;66% &
}77 	
public:: 
ActionResult:: 
Edit::  
(::  !
int::! $
?::$ %
id::& (
)::( )
{;; 	
if<< 
(<< 
id<< 
==<< 
null<< 
)<< 
return== 
new==  
HttpStatusCodeResult== /
(==/ 0
HttpStatusCode==0 >
.==> ?

BadRequest==? I
)==I J
;==J K
MenuItemType?? 
res?? 
=?? 
_menuItemTypeFacade?? 2
.??2 3
FindById??3 ;
(??; <
(??< =
int??= @
)??@ A
id??A C
)??C D
;??D E
ifAA 
(AA 
resAA 
==AA 
nullAA 
)AA 
returnBB 
HttpNotFoundBB #
(BB# $
)BB$ %
;BB% &
returnDD 
ViewDD 
(DD 
newDD 
MenuItemTypeVMDD *
{EE 
IdFF 
=FF 
resFF 
.FF 
IdFF 
,FF 
NameGG 
=GG 
resGG 
.GG 
NameGG 
}HH 
)HH 
;HH 
}II 	
[NN 	
HttpPostNN	 
]NN 
[OO 	$
ValidateAntiForgeryTokenOO	 !
]OO! "
publicPP 
ActionResultPP 
EditPP  
(PP  !
[PP! "
BindPP" &
(PP& '
IncludePP' .
=PP/ 0
$strPP1 :
)PP: ;
]PP; <
MenuItemTypeVMPP= K
menuItemTypePPL X
)PPX Y
{QQ 	
ifRR 
(RR 

ModelStateRR 
.RR 
IsValidRR "
)RR" #
{SS 
MenuItemTypeTT 
resTT  
=TT! "
_menuItemTypeFacadeTT# 6
.TT6 7
UpdateTT7 =
(TT= >
newTT> A
MenuItemTypeTTB N
{UU 
IdVV 
=VV 
menuItemTypeVV %
.VV% &
IdVV& (
,VV( )
NameWW 
=WW 
menuItemTypeWW '
.WW' (
NameWW( ,
}XX 
)XX 
;XX 
returnYY 
RedirectToActionYY '
(YY' (
$strYY( /
)YY/ 0
;YY0 1
}ZZ 
return\\ 
View\\ 
(\\ 
menuItemType\\ $
)\\$ %
;\\% &
}]] 	
public`` 
ActionResult`` 
Delete`` "
(``" #
int``# &
?``& '
id``( *
)``* +
{aa 	
ifbb 
(bb 
idbb 
==bb 
nullbb 
)bb 
returncc 
newcc  
HttpStatusCodeResultcc /
(cc/ 0
HttpStatusCodecc0 >
.cc> ?

BadRequestcc? I
)ccI J
;ccJ K
MenuItemTypeee 
resee 
=ee 
_menuItemTypeFacadeee 2
.ee2 3
FindByIdee3 ;
(ee; <
(ee< =
intee= @
)ee@ A
ideeA C
)eeC D
;eeD E
ifgg 
(gg 
resgg 
==gg 
nullgg 
)gg 
returnhh 
HttpNotFoundhh #
(hh# $
)hh$ %
;hh% &
returnjj 
Viewjj 
(jj 
resjj 
)jj 
;jj 
}kk 	
[nn 	
HttpPostnn	 
,nn 

ActionNamenn 
(nn 
$strnn &
)nn& '
]nn' (
[oo 	$
ValidateAntiForgeryTokenoo	 !
]oo! "
publicpp 
ActionResultpp 
DeleteConfirmedpp +
(pp+ ,
intpp, /
idpp0 2
)pp2 3
{qq 	
_menuItemTypeFacaderr 
.rr  
Deleterr  &
(rr& '
idrr' )
)rr) *
;rr* +
returnss 
RedirectToActionss #
(ss# $
$strss$ +
)ss+ ,
;ss, -
}tt 	
}uu 
}vv φή
“C:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\Controllers\Admin\RestaurantAdminController.cs
	namespace 	
BookingSystemApp
 
. 
Controllers &
.& '
Admin' ,
{ 
[ 
Route 

(
 
$str ,
), -
]- .
public 

class %
RestaurantAdminController *
:+ ,!
MessageControllerBase- B
{ 
private 
readonly 
RestaurantFacade )
_restaurantFacade* ;
;; <
private 
readonly 
CompanyFacade &
_companyFacade' 5
;5 6
private 
readonly 

MenuFacade #
_menuFacade$ /
;/ 0
private 
readonly 
TableFacade $
_tableFacade% 1
;1 2
private 
readonly 
ImageFacade $
_imageFacade% 1
;1 2
public %
RestaurantAdminController (
(( )
)) *
{ 	
_restaurantFacade 
= 
new  #
RestaurantFacade$ 4
(4 5
)5 6
;6 7
_companyFacade 
= 
new  
CompanyFacade! .
(. /
)/ 0
;0 1
_menuFacade 
= 
new 

MenuFacade (
(( )
)) *
;* +
_tableFacade 
= 
new 
TableFacade *
(* +
)+ ,
;, -
_imageFacade 
= 
new 
ImageFacade *
(* +
)+ ,
;, -
}   	
public## 
ActionResult## 
Index## !
(##! "
)##" #
{$$ 	
IEnumerable%% 
<%% 

Restaurant%% "
>%%" #
res%%$ '
=%%( )
_restaurantFacade%%* ;
.%%; <
Get%%< ?
(%%? @
)%%@ A
;%%A B
return'' 
View'' 
('' 
res'' 
.'' 
Select'' "
(''" #
r''# $
=>''% '
CreateVMFromDto''( 7
(''7 8
r''8 9
)''9 :
)'': ;
)''; <
;''< =
}(( 	
public++ 
ActionResult++ 
Details++ #
(++# $
int++$ '
?++' (
id++) +
)+++ ,
{,, 	
if-- 
(-- 
id-- 
==-- 
null-- 
)-- 
return.. 
new..  
HttpStatusCodeResult.. /
(../ 0
HttpStatusCode..0 >
...> ?

BadRequest..? I
)..I J
;..J K

Restaurant00 
res00 
=00 
_restaurantFacade00 .
.00. /
FindById00/ 7
(007 8
(008 9
int009 <
)00< =
id00= ?
)00? @
;00@ A
if22 
(22 
res22 
==22 
null22 
)22 
return33 
HttpNotFound33 #
(33# $
)33$ %
;33% &
ViewBag55 
.55 

menuItemId55 
=55  
new55! $

SelectList55% /
(55/ 0
_menuFacade550 ;
.55; <
Get55< ?
(55? @
)55@ A
.55A B
OrderBy55B I
(55I J
d55J K
=>55L N
d55O P
.55P Q
Name55Q U
)55U V
,55V W
$str55X \
,55\ ]
$str55^ d
,55d e
$str55f x
)55x y
;55y z
Session66 
[66 
$str66 "
]66" #
=66$ %
res66& )
.66) *
Id66* ,
;66, -
return88 
View88 
(88 
CreateVMFromDto88 '
(88' (
res88( +
)88+ ,
)88, -
;88- .
}99 	
public<< 
ActionResult<< 
RemoveMenuItem<< *
(<<* +
int<<+ .
?<<. /
id<<0 2
)<<2 3
{== 	
int>> 
restaurantId>> 
=>> 
Session>> &
[>>& '
$str>>' 5
]>>5 6
!=>>7 9
null>>: >
?>>? @
(>>A B
int>>B E
)>>E F
Session>>G N
[>>N O
$str>>O ]
]>>] ^
:>>_ `
->>a b
$num>>b c
;>>c d
if@@ 
(@@ 
id@@ 
!=@@ 
null@@ 
&&@@ 
restaurantId@@ *
!=@@+ -
-@@. /
$num@@/ 0
)@@0 1
{AA 
_restaurantFacadeBB !
.BB! "(
RemoveMenuItemFromRestaurantBB" >
(BB> ?
restaurantIdBB? K
,BBK L
(BBM N
intBBN Q
)BBQ R
idBBR T
)BBT U
;BBU V
}CC 
returnDD 
RedirectToActionDD #
(DD# $
$strDD$ -
,DD- .
newDD/ 2
{DD3 4
idDD5 7
=DD8 9
restaurantIdDD: F
}DDG H
)DDH I
;DDI J
}EE 	
[GG 	
HttpPostGG	 
]GG 
publicII 
ActionResultII 
AddMenuItemII '
(II' (
intII( +
?II+ ,

menuItemIdII- 7
)II7 8
{JJ 	
intKK 
restaurantIdKK 
=KK 
SessionKK &
[KK& '
$strKK' 5
]KK5 6
!=KK7 9
nullKK: >
?KK? @
(KKA B
intKKB E
)KKE F
SessionKKG N
[KKN O
$strKKO ]
]KK] ^
:KK_ `
-KKa b
$numKKb c
;KKc d
ifMM 
(MM 

menuItemIdMM 
!=MM 
nullMM "
&&MM# %
restaurantIdMM& 2
!=MM3 5
-MM6 7
$numMM7 8
)MM8 9
{NN 
_restaurantFacadeOO !
.OO! "#
AddMenuItemToRestaurantOO" 9
(OO9 :
restaurantIdOO: F
,OOF G
(OOH I
intOOI L
)OOL M

menuItemIdOON X
)OOX Y
;OOY Z
}PP 
returnQQ 
RedirectToActionQQ #
(QQ# $
$strQQ$ -
,QQ- .
newQQ/ 2
{QQ3 4
idQQ5 7
=QQ8 9
restaurantIdQQ: F
}QQG H
)QQH I
;QQI J
}RR 	
publicUU 
ActionResultUU 
NewTableUU $
(UU$ %
intUU% (
idUU) +
)UU+ ,
{VV 	
returnWW 
ViewWW 
(WW 
newWW 
TableVMWW #
{WW$ %
RestaurantIdWW& 2
=WW3 4
idWW5 7
}WW8 9
)WW9 :
;WW: ;
}XX 	
[]] 	
HttpPost]]	 
]]] 
[^^ 	$
ValidateAntiForgeryToken^^	 !
]^^! "
public__ 
ActionResult__ 
NewTable__ $
(__$ %
[__% &
Bind__& *
(__* +
Include__+ 2
=__3 4
$str__5 k
)__k l
]__l m
TableVM__n u
table__v {
)__{ |
{`` 	
ifaa 
(aa 

ModelStateaa 
.aa 
IsValidaa "
)aa" #
{bb 
Tablecc 
rescc 
=cc 
_tableFacadecc (
.cc( )
Createcc) /
(cc/ 0
newcc0 3
Tablecc4 9
{dd 
RestaurantIdee  
=ee! "
tableee# (
.ee( )
RestaurantIdee) 5
,ee5 6
TableNoff 
=ff 
tableff #
.ff# $
TableNoff$ +
,ff+ ,
NoSeatsgg 
=gg 
tablegg #
.gg# $
NoSeatsgg$ +
,gg+ ,
AdditionalNoteshh #
=hh$ %
tablehh& +
.hh+ ,
AdditionalNoteshh, ;
,hh; <
Activeii 
=ii 
trueii !
}jj 
)jj 
;jj 
returnkk 
RedirectToActionkk '
(kk' (
$strkk( 1
,kk1 2
newkk3 6
{kk7 8
idkk9 ;
=kk< =
reskk> A
.kkA B
RestaurantIdkkB N
}kkO P
)kkP Q
;kkQ R
}ll 
returnnn 
Viewnn 
(nn 
tablenn 
)nn 
;nn 
}oo 	
publicrr 
ActionResultrr 
RemoveTablerr '
(rr' (
intrr( +
?rr+ ,
idrr- /
)rr/ 0
{ss 	
inttt 
restaurantIdtt 
=tt 
Sessiontt &
[tt& '
$strtt' 5
]tt5 6
!=tt7 9
nulltt: >
?tt? @
(ttA B
intttB E
)ttE F
SessionttF M
[ttM N
$strttN \
]tt\ ]
:tt^ _
-tt` a
$numtta b
;ttb c
ifvv 
(vv 
idvv 
!=vv 
nullvv 
&&vv 
restaurantIdvv *
!=vv+ -
-vv. /
$numvv/ 0
)vv0 1
{ww 
_tableFacadexx 
.xx 
Deletexx #
(xx# $
(xx$ %
intxx% (
)xx( )
idxx* ,
)xx, -
;xx- .
}yy 
returnzz 
RedirectToActionzz #
(zz# $
$strzz$ -
,zz- .
newzz/ 2
{zz3 4
idzz5 7
=zz8 9
restaurantIdzz: F
}zzG H
)zzH I
;zzI J
}{{ 	
public~~ 
ActionResult~~ 
ActivateTable~~ )
(~~) *
int~~* -
?~~- .
id~~/ 1
)~~1 2
{ 	
int
€€ 
restaurantId
€€ 
=
€€ 
Session
€€ &
[
€€& '
$str
€€' 5
]
€€5 6
!=
€€7 9
null
€€: >
?
€€? @
(
€€A B
int
€€B E
)
€€E F
Session
€€F M
[
€€M N
$str
€€N \
]
€€\ ]
:
€€^ _
-
€€` a
$num
€€a b
;
€€b c
if
‚‚ 
(
‚‚ 
id
‚‚ 
!=
‚‚ 
null
‚‚ 
&&
‚‚ 
restaurantId
‚‚ *
!=
‚‚+ -
-
‚‚. /
$num
‚‚/ 0
)
‚‚0 1
{
ƒƒ 
Table
„„ 
table
„„ 
=
„„ 
_tableFacade
„„ *
.
„„* +
FindById
„„+ 3
(
„„3 4
(
„„4 5
int
„„5 8
)
„„8 9
id
„„: <
)
„„< =
;
„„= >
table
…… 
.
…… 
Active
…… 
=
…… 
true
…… #
;
……# $
_tableFacade
†† 
.
†† 
Update
†† #
(
††# $
table
††$ )
)
††) *
;
††* +
}
‡‡ 
return
 
RedirectToAction
 #
(
# $
$str
$ -
,
- .
new
/ 2
{
3 4
id
5 7
=
8 9
restaurantId
: F
}
G H
)
H I
;
I J
}
‰‰ 	
public
 
ActionResult
 
DeactivateTable
 +
(
+ ,
int
, /
?
/ 0
id
1 3
)
3 4
{
 	
int
 
restaurantId
 
=
 
Session
 &
[
& '
$str
' 5
]
5 6
!=
7 9
null
: >
?
? @
(
A B
int
B E
)
E F
Session
F M
[
M N
$str
N \
]
\ ]
:
^ _
-
` a
$num
a b
;
b c
if
 
(
 
id
 
!=
 
null
 
&&
 
restaurantId
 *
!=
+ -
-
. /
$num
/ 0
)
0 1
{
‘‘ 
Table
’’ 
table
’’ 
=
’’ 
_tableFacade
’’ *
.
’’* +
FindById
’’+ 3
(
’’3 4
(
’’4 5
int
’’5 8
)
’’8 9
id
’’: <
)
’’< =
;
’’= >
table
““ 
.
““ 
Active
““ 
=
““ 
false
““ $
;
““$ %
_tableFacade
”” 
.
”” 
Update
”” #
(
””# $
table
””$ )
)
””) *
;
””* +
}
•• 
return
–– 
RedirectToAction
–– #
(
––# $
$str
––$ -
,
––- .
new
––/ 2
{
––3 4
id
––5 7
=
––8 9
restaurantId
––: F
}
––G H
)
––H I
;
––I J
}
—— 	
public
 
ActionResult
 
Create
 "
(
" #
)
# $
{
›› 	
return
 
View
 
(
 
)
 
;
 
}
 	
[
ΆΆ 	
HttpPost
ΆΆ	 
]
ΆΆ 
[
££ 	&
ValidateAntiForgeryToken
££	 !
]
££! "
public
¤¤ 
ActionResult
¤¤ 
Create
¤¤ "
(
¤¤" #
[
¤¤# $
Bind
¤¤$ (
(
¤¤( )
Include
¤¤) 0
=
¤¤1 2
$str
¤¤3 ~
)
¤¤~ 
]¤¤ €
RestaurantVM¤¤ 

restaurant¤¤ 
)¤¤ ™
{
¥¥ 	
if
¦¦ 
(
¦¦ 

ModelState
¦¦ 
.
¦¦ 
IsValid
¦¦ "
)
¦¦" #
{
§§ 

Restaurant
¨¨ 
res
¨¨ 
=
¨¨  
_restaurantFacade
¨¨! 2
.
¨¨2 3
Create
¨¨3 9
(
¨¨9 :
new
¨¨: =

Restaurant
¨¨> H
{
©© 
Id
 
=
 

restaurant
 #
.
# $
Id
$ &
,
& '
	CompanyId
«« 
=
«« 
_companyFacade
««  .
.
««. /
Get
««/ 2
(
««2 3
)
««3 4
.
««4 5
Id
««5 7
,
««7 8
Name
¬¬ 
=
¬¬ 

restaurant
¬¬ %
.
¬¬% &
Name
¬¬& *
,
¬¬* +
PhoneNo
­­ 
=
­­ 

restaurant
­­ (
.
­­( )
PhoneNo
­­) 0
,
­­0 1
AddressStreet
®® !
=
®®" #

restaurant
®®$ .
.
®®. /
AddressStreet
®®/ <
,
®®< =
AddressTown
―― 
=
――  !

restaurant
――" ,
.
――, -
AddressTown
――- 8
,
――8 9
AddressCounty
°° !
=
°°" #

restaurant
°°$ .
.
°°. /
AddressCounty
°°/ <
,
°°< =
AddressPostalCode
±± %
=
±±& '

restaurant
±±( 2
.
±±2 3
AddressPostalCode
±±3 D
}
²² 
)
²² 
;
²² 
return
³³ 
RedirectToAction
³³ '
(
³³' (
$str
³³( 1
,
³³1 2
new
³³3 6
{
³³7 8
Id
³³9 ;
=
³³< =
res
³³> A
.
³³A B
Id
³³B D
}
³³E F
)
³³F G
;
³³G H
}
΄΄ 
return
¶¶ 
View
¶¶ 
(
¶¶ 

restaurant
¶¶ "
)
¶¶" #
;
¶¶# $
}
·· 	
public
ΊΊ 
ActionResult
ΊΊ 
Edit
ΊΊ  
(
ΊΊ  !
int
ΊΊ! $
?
ΊΊ$ %
id
ΊΊ& (
)
ΊΊ( )
{
»» 	
if
ΌΌ 
(
ΌΌ 
id
ΌΌ 
==
ΌΌ 
null
ΌΌ 
)
ΌΌ 
return
½½ 
new
½½ "
HttpStatusCodeResult
½½ /
(
½½/ 0
HttpStatusCode
½½0 >
.
½½> ?

BadRequest
½½? I
)
½½I J
;
½½J K

Restaurant
ΏΏ 
res
ΏΏ 
=
ΏΏ 
_restaurantFacade
ΏΏ .
.
ΏΏ. /
FindById
ΏΏ/ 7
(
ΏΏ7 8
(
ΏΏ8 9
int
ΏΏ9 <
)
ΏΏ< =
id
ΏΏ= ?
)
ΏΏ? @
;
ΏΏ@ A
if
ΑΑ 
(
ΑΑ 
res
ΑΑ 
==
ΑΑ 
null
ΑΑ 
)
ΑΑ 
return
ΒΒ 
HttpNotFound
ΒΒ #
(
ΒΒ# $
)
ΒΒ$ %
;
ΒΒ% &
return
ΔΔ 
View
ΔΔ 
(
ΔΔ 
CreateVMFromDto
ΔΔ '
(
ΔΔ' (
res
ΔΔ( +
)
ΔΔ+ ,
)
ΔΔ, -
;
ΔΔ- .
}
ΕΕ 	
[
ΚΚ 	
HttpPost
ΚΚ	 
]
ΚΚ 
[
ΛΛ 	&
ValidateAntiForgeryToken
ΛΛ	 !
]
ΛΛ! "
public
ΜΜ 
ActionResult
ΜΜ 
Edit
ΜΜ  
(
ΜΜ  !
[
ΜΜ! "
Bind
ΜΜ" &
(
ΜΜ& '
Include
ΜΜ' .
=
ΜΜ/ 0
$strΜΜ1 †
)ΜΜ† ‡
]ΜΜ‡ 
RestaurantVMΜΜ‰ •

restaurantΜΜ–  
)ΜΜ  ΅
{
ΝΝ 	
if
ΞΞ 
(
ΞΞ 

ModelState
ΞΞ 
.
ΞΞ 
IsValid
ΞΞ "
)
ΞΞ" #
{
ΟΟ 

Restaurant
ΠΠ 
res
ΠΠ 
=
ΠΠ  
_restaurantFacade
ΠΠ! 2
.
ΠΠ2 3
Update
ΠΠ3 9
(
ΠΠ9 :
new
ΠΠ: =

Restaurant
ΠΠ> H
{
ΡΡ 
Id
 
=
 

restaurant
 #
.
# $
Id
$ &
,
& '
	CompanyId
ΣΣ 
=
ΣΣ 

restaurant
ΣΣ  *
.
ΣΣ* +
	CompanyId
ΣΣ+ 4
,
ΣΣ4 5
Name
ΤΤ 
=
ΤΤ 

restaurant
ΤΤ %
.
ΤΤ% &
Name
ΤΤ& *
,
ΤΤ* +
PhoneNo
ΥΥ 
=
ΥΥ 

restaurant
ΥΥ (
.
ΥΥ( )
PhoneNo
ΥΥ) 0
,
ΥΥ0 1
AddressStreet
ΦΦ !
=
ΦΦ" #

restaurant
ΦΦ$ .
.
ΦΦ. /
AddressStreet
ΦΦ/ <
,
ΦΦ< =
AddressTown
ΧΧ 
=
ΧΧ  !

restaurant
ΧΧ" ,
.
ΧΧ, -
AddressTown
ΧΧ- 8
,
ΧΧ8 9
AddressCounty
ΨΨ !
=
ΨΨ" #

restaurant
ΨΨ$ .
.
ΨΨ. /
AddressCounty
ΨΨ/ <
,
ΨΨ< =
AddressPostalCode
ΩΩ %
=
ΩΩ& '

restaurant
ΩΩ( 2
.
ΩΩ2 3
AddressPostalCode
ΩΩ3 D
}
ΪΪ 
)
ΪΪ 
;
ΪΪ 
return
ΫΫ 
RedirectToAction
ΫΫ '
(
ΫΫ' (
$str
ΫΫ( 1
,
ΫΫ1 2
new
ΫΫ3 6
{
ΫΫ7 8
Id
ΫΫ9 ;
=
ΫΫ< =
res
ΫΫ> A
.
ΫΫA B
Id
ΫΫB D
}
ΫΫE F
)
ΫΫF G
;
ΫΫG H
}
άά 
return
ήή 
View
ήή 
(
ήή 

restaurant
ήή "
)
ήή" #
;
ήή# $
}
ίί 	
public
ββ 
ActionResult
ββ 
Delete
ββ "
(
ββ" #
int
ββ# &
?
ββ& '
id
ββ( *
)
ββ* +
{
γγ 	
if
δδ 
(
δδ 
id
δδ 
==
δδ 
null
δδ 
)
δδ 
return
εε 
new
εε "
HttpStatusCodeResult
εε /
(
εε/ 0
HttpStatusCode
εε0 >
.
εε> ?

BadRequest
εε? I
)
εεI J
;
εεJ K

Restaurant
ηη 
res
ηη 
=
ηη 
_restaurantFacade
ηη .
.
ηη. /
FindById
ηη/ 7
(
ηη7 8
(
ηη8 9
int
ηη9 <
)
ηη< =
id
ηη> @
)
ηη@ A
;
ηηA B
if
ιι 
(
ιι 
res
ιι 
==
ιι 
null
ιι 
)
ιι 
return
κκ 
HttpNotFound
κκ #
(
κκ# $
)
κκ$ %
;
κκ% &
return
μμ 
View
μμ 
(
μμ 
CreateVMFromDto
μμ '
(
μμ' (
res
μμ( +
)
μμ+ ,
)
μμ, -
;
μμ- .
}
νν 	
[
ππ 	
HttpPost
ππ	 
,
ππ 

ActionName
ππ 
(
ππ 
$str
ππ &
)
ππ& '
]
ππ' (
[
ρρ 	&
ValidateAntiForgeryToken
ρρ	 !
]
ρρ! "
public
ςς 
ActionResult
ςς 
DeleteConfirmed
ςς +
(
ςς+ ,
int
ςς, /
id
ςς0 2
)
ςς2 3
{
σσ 	
_restaurantFacade
ττ 
.
ττ 
Delete
ττ $
(
ττ$ %
id
ττ% '
)
ττ' (
;
ττ( )
return
υυ 
RedirectToAction
υυ #
(
υυ# $
$str
υυ$ +
)
υυ+ ,
;
υυ, -
}
φφ 	
private
ψψ 
RestaurantVM
ψψ 
CreateVMFromDto
ψψ ,
(
ψψ, -

Restaurant
ψψ- 7
r
ψψ8 9
)
ψψ9 :
{
ωω 	
return
ϊϊ 
new
ϊϊ 
RestaurantVM
ϊϊ #
{
ϋϋ 
Id
όό 
=
όό 
r
όό 
.
όό 
Id
όό 
,
όό 
	CompanyId
ύύ 
=
ύύ 
r
ύύ 
.
ύύ 
	CompanyId
ύύ '
,
ύύ' (
Name
ώώ 
=
ώώ 
r
ώώ 
.
ώώ 
Name
ώώ 
,
ώώ 
PhoneNo
 
=
 
r
 
.
 
PhoneNo
 #
,
# $
AddressStreet
€€ 
=
€€ 
r
€€  !
.
€€! "
AddressStreet
€€" /
,
€€/ 0
AddressTown
 
=
 
r
 
.
  
AddressTown
  +
,
+ ,
AddressCounty
‚‚ 
=
‚‚ 
r
‚‚  !
.
‚‚! "
AddressCounty
‚‚" /
,
‚‚/ 0
AddressPostalCode
ƒƒ !
=
ƒƒ" #
r
ƒƒ$ %
.
ƒƒ% &
AddressPostalCode
ƒƒ& 7
,
ƒƒ7 8
	MenuItems
„„ 
=
„„ 
r
„„ 
.
„„ 
	MenuItems
„„ '
.
„„' (
Select
„„( .
(
„„. /
m
„„/ 0
=>
„„1 3
new
„„4 7

MenuItemVM
„„8 B
{
…… 
Id
†† 
=
†† 
m
†† 
.
†† 
Id
†† 
,
†† 
Name
‡‡ 
=
‡‡ 
m
‡‡ 
.
‡‡ 
Name
‡‡ !
,
‡‡! "
Description
 
=
  !
m
" #
.
# $
Description
$ /
??
0 2
$str
3 C
,
C D
DietInfo
‰‰ 
=
‰‰ 
m
‰‰  
.
‰‰  !
DietInfo
‰‰! )
.
‰‰) *
Any
‰‰* -
(
‰‰- .
)
‰‰. /
?
‰‰0 1
String
‰‰2 8
.
‰‰8 9
Join
‰‰9 =
(
‰‰= >
$str
‰‰> B
,
‰‰B C
m
‰‰D E
.
‰‰E F
DietInfo
‰‰F N
.
‰‰N O
Select
‰‰O U
(
‰‰U V
d
‰‰V W
=>
‰‰X Z
d
‰‰[ \
.
‰‰\ ]
Name
‰‰] a
)
‰‰a b
)
‰‰b c
:
‰‰d e
$str
‰‰f k
,
‰‰k l
Types
 
=
 
m
 
.
 
Types
 #
.
# $
Any
$ '
(
' (
)
( )
?
* +
String
, 2
.
2 3
Join
3 7
(
7 8
$str
8 <
,
< =
m
> ?
.
? @
Types
@ E
.
E F
Select
F L
(
L M
t
M N
=>
O Q
t
R S
.
S T
Name
T X
)
X Y
)
Y Z
:
[ \
$str
] b
}
‹‹ 
)
‹‹ 
.
‹‹ 
OrderBy
‹‹ 
(
‹‹ 
m
‹‹ 
=>
‹‹ 
m
‹‹  !
.
‹‹! "
Name
‹‹" &
)
‹‹& '
,
‹‹' (

TableCount
 
=
 
r
 
.
 
Tables
 %
.
% &
Count
& +
(
+ ,
)
, -
,
- .
Tables
 
=
 
r
 
.
 
Tables
 !
,
! "
ImageIds
 
=
 
r
 
.
 
ImageIds
 %
}
 
;
 
}
 	
public
’’ 
int
’’ 
AddImage
’’ 
(
’’ 
int
’’ 
Id
’’  "
,
’’" # 
HttpPostedFileBase
’’$ 6
Image
’’7 <
)
’’< =
{
““ 	
if
”” 
(
”” 
Image
”” 
!=
”” 
null
”” 
)
”” 
{
•• 
var
–– 
fileName
–– 
=
–– 
Path
–– #
.
––# $
GetFileName
––$ /
(
––/ 0
Image
––0 5
.
––5 6
FileName
––6 >
)
––> ?
;
––? @
var
—— 
path
—— 
=
—— 
Path
—— 
.
——  
Combine
——  '
(
——' (
Server
——( .
.
——. /
MapPath
——/ 6
(
——6 7
$str
——7 B
)
——B C
,
——C D
fileName
——E M
)
——M N
;
——N O
Stream
 
imgFileStream
 $
=
% &
Image
' ,
.
, -
InputStream
- 8
;
8 9
byte
™™ 
[
™™ 
]
™™ 
documentBytes
™™ $
=
™™% &
new
™™' *
byte
™™+ /
[
™™/ 0
imgFileStream
™™0 =
.
™™= >
Length
™™> D
]
™™D E
;
™™E F
imgFileStream
 
.
 
Read
 "
(
" #
documentBytes
# 0
,
0 1
$num
2 3
,
3 4
documentBytes
5 B
.
B C
Length
C I
)
I J
;
J K
Image
 
img
 
=
 
_imageFacade
 (
.
( )#
UploadRestaurantImage
) >
(
> ?
new
? B
Image
C H
{
 
Name
 
=
 
fileName
 #
,
# $
Size
 
=
 
Image
  
.
  !
ContentLength
! .
,
. /
Type
   
=
   
Image
    
.
    !
ContentType
  ! ,
,
  , -
FileContent
΅΅ 
=
΅΅  !
documentBytes
΅΅" /
,
΅΅/ 0
	CreatedOn
ΆΆ 
=
ΆΆ 
DateTime
ΆΆ  (
.
ΆΆ( )
Now
ΆΆ) ,
,
ΆΆ, -
Source
££ 
=
££ 
Id
££ 
}
¤¤ 
)
¤¤ 
;
¤¤ 
return
¦¦ 
img
¦¦ 
.
¦¦ 
Id
¦¦ 
;
¦¦ 
}
§§ 
else
¨¨ 
{
©© 
return
 
-
 
$num
 
;
 
}
«« 
}
¬¬ 	
public
®® 
void
®® 
RemoveImage
®® 
(
®®  
int
®®  #
Id
®®$ &
,
®®& '
int
®®( +
ImgId
®®, 1
)
®®1 2
{
―― 	
_imageFacade
°° 
.
°° #
RemoveRestaurantImage
°° .
(
°°. /
new
°°/ 2
Image
°°3 8
{
°°9 :
Id
°°; =
=
°°> ?
ImgId
°°@ E
,
°°E F
Source
°°G M
=
°°N O
Id
°°P R
}
°°S T
)
°°T U
;
°°U V
}
±± 	
public
³³ 
async
³³ 
Task
³³ 
<
³³ 
ActionResult
³³ &
>
³³& '
ImageFromId
³³( 3
(
³³3 4
int
³³4 7
id
³³8 :
)
³³: ;
{
΄΄ 	
Image
µµ 
i
µµ 
=
µµ 
_imageFacade
µµ "
.
µµ" #
	LoadImage
µµ# ,
(
µµ, -
id
µµ- /
)
µµ/ 0
;
µµ0 1
return
·· 
File
·· 
(
·· 
i
·· 
.
·· 
FileContent
·· %
,
··% &
i
··' (
.
··( )
Type
··) -
)
··- .
;
··. /
}
ΈΈ 	
}
ΉΉ 
}ΊΊ £
…C:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\Controllers\BookingController.cs
	namespace 	
BookingSystemApp
 
. 
Controllers &
{ 
public 

class 
BookingController "
:# $!
MessageControllerBase% :
{ 
private 
readonly 
BookingFacade &
_bookingFacade' 5
;5 6
private 
readonly 

MenuFacade #
_menuFacade$ /
;/ 0
public 
BookingController  
(  !
)! "
{ 	
_bookingFacade 
= 
new  
BookingFacade! .
(. /
)/ 0
;0 1
_menuFacade 
= 
new 

MenuFacade (
(( )
)) *
;* +
} 	
public 
ActionResult 
Index !
(! "
)" #
{ 	
int 
? 
userId 
= 
( 
int 
? 
)  
Session! (
[( )
Global) /
./ 0
UserIdSessionVar0 @
]@ A
;A B
if 
( 
userId 
!= 
null 
) 
{   
IEnumerable!! 
<!! 
Booking!! #
>!!# $
res!!% (
=!!) *
_bookingFacade!!+ 9
.!!9 :
FindByCustomerId!!: J
(!!J K
(!!K L
int!!L O
)!!O P
userId!!Q W
)!!W X
;!!X Y
return## 
View## 
(## 
res## 
.##  
Select##  &
(##& '
b##' (
=>##) +"
CreateBookingVMFromDto##, B
(##B C
b##C D
)##D E
)##E F
)##F G
;##G H
}$$ 
return&& 
new&&  
HttpStatusCodeResult&& +
(&&+ ,
HttpStatusCode&&, :
.&&: ;

BadRequest&&; E
)&&E F
;&&F G
}'' 	
public** 
ActionResult** 
Details** #
(**# $
int**$ '
?**' (
id**) +
)**+ ,
{++ 	
if,, 
(,, 
id,, 
==,, 
null,, 
),, 
return-- 
new--  
HttpStatusCodeResult-- /
(--/ 0
HttpStatusCode--0 >
.--> ?

BadRequest--? I
)--I J
;--J K
Booking// 
res// 
=// 
_bookingFacade// (
.//( )
FindById//) 1
(//1 2
(//2 3
int//3 6
)//6 7
id//7 9
)//9 :
;//: ;
if11 
(11 
res11 
==11 
null11 
)11 
return22 
HttpNotFound22 #
(22# $
)22$ %
;22% &
return44 
View44 
(44 "
CreateBookingVMFromDto44 .
(44. /
res44/ 2
)442 3
)443 4
;444 5
}55 	
public88 
ActionResult88 
Create88 "
(88" #
int88# &
?88& '
RestaurantId88( 4
)884 5
{99 	
if:: 
(:: 
RestaurantId:: 
==:: 
null::  $
)::$ %
return;; 
new;;  
HttpStatusCodeResult;; /
(;;/ 0
HttpStatusCode;;0 >
.;;> ?

BadRequest;;? I
);;I J
;;;J K
if== 
(== 
Session== 
[== 
Global== 
.== 
RolesSessionVar== .
]==. /
!===0 2
null==3 7
&&==8 :
(==; <
(==< =
IList=== B
<==B C
string==C I
>==I J
)==J K
Session==K R
[==R S
Global==S Y
.==Y Z
RolesSessionVar==Z i
]==i j
)==j k
.==k l
Contains==l t
(==t u
Global==u {
.=={ |
	AdminRole	==| …
)
==… †
)
==† ‡
{>> 
AddToastMessage?? 
(??  
$str??  '
,??' (
$str??) K
,??K L
Toast??M R
.??R S
	ToastType??S \
.??\ ]
Warning??] d
)??d e
;??e f
return@@ 
Redirect@@ 
(@@  
Request@@  '
.@@' (
UrlReferrer@@( 3
.@@3 4
ToString@@4 <
(@@< =
)@@= >
)@@> ?
;@@? @
}AA 
ifCC 
(CC 
SessionCC 
[CC 
GlobalCC 
.CC 
UserIdSessionVarCC /
]CC/ 0
==CC1 3
nullCC4 8
)CC8 9
{DD 
AddToastMessageEE 
(EE  
$strEE  '
,EE' (
$strEE) P
,EEP Q
ToastEER W
.EEW X
	ToastTypeEEX a
.EEa b
WarningEEb i
)EEi j
;EEj k
returnFF 
RedirectToActionFF '
(FF' (
$strFF( /
,FF/ 0
$strFF1 ;
)FF; <
;FF< =
}GG 
SessionII 
[II 
GlobalII 
.II "
RestaurantIdSessionVarII 1
]II1 2
=II3 4
RestaurantIdII5 A
;IIA B
ViewBagKK 
.KK 
	StartTimeKK 
=KK 
newKK  #

SelectListKK$ .
(KK. /
newKK/ 2
ListKK3 7
<KK7 8
TimeSpanKK8 @
>KK@ A
(KKA B
)KKB C
,KKC D
$strKKE R
)KKR S
;KKS T
returnLL 
ViewLL 
(LL 
)LL 
;LL 
}MM 	
[RR 	
HttpPostRR	 
]RR 
[SS 	$
ValidateAntiForgeryTokenSS	 !
]SS! "
publicTT 
ActionResultTT 
CreateTT "
(TT" #
[TT# $
BindTT$ (
(TT( )
IncludeTT) 0
=TT1 2
$strTT3 _
)TT_ `
]TT` a
	BookingVMTTb k
bookingTTl s
)TTs t
{UU 	
bookingVV 
.VV 
BookingMadeDateVV #
=VV$ %
DateTimeVV& .
.VV. /
NowVV/ 2
;VV2 3
bookingWW 
.WW 
BookingMadeTimeWW #
=WW$ %
DateTimeWW& .
.WW. /
NowWW/ 2
.WW2 3
	TimeOfDayWW3 <
;WW< =
bookingXX 
.XX 
RestaurantIdXX  
=XX! "
(XX# $
intXX$ '
)XX' (
SessionXX) 0
[XX0 1
GlobalXX1 7
.XX7 8"
RestaurantIdSessionVarXX8 N
]XXN O
;XXO P
bookingYY 
.YY 

CustomerIdYY 
=YY  
(YY! "
intYY" %
)YY% &
SessionYY' .
[YY. /
GlobalYY/ 5
.YY5 6
UserIdSessionVarYY6 F
]YYF G
;YYG H
bookingZZ 
.ZZ 
EndTimeZZ 
=ZZ 
bookingZZ %
.ZZ% &
	StartTimeZZ& /
.ZZ/ 0
AddZZ0 3
(ZZ3 4
newZZ4 7
TimeSpanZZ8 @
(ZZ@ A
$numZZA B
,ZZB C
$numZZD F
,ZZF G
$numZZH J
)ZZJ K
)ZZK L
;ZZL M
if\\ 
(\\ 

ModelState\\ 
.\\ 
IsValid\\ "
)\\" #
{]] 
Booking^^ 
res^^ 
=^^ 
new^^ !
Booking^^" )
{__ 
Id`` 
=`` 
booking``  
.``  !
Id``! #
,``# $

CustomerIdaa 
=aa  
bookingaa! (
.aa( )

CustomerIdaa) 3
,aa3 4
RestaurantIdbb  
=bb! "
bookingbb# *
.bb* +
RestaurantIdbb+ 7
,bb7 8
BookingMadeDatecc #
=cc$ %
bookingcc& -
.cc- .
BookingMadeDatecc. =
,cc= >
BookingMadeTimedd #
=dd$ %
bookingdd& -
.dd- .
BookingMadeTimedd. =
,dd= >
BookingDateee 
=ee  !
bookingee" )
.ee) *
BookingDateee* 5
,ee5 6
	StartTimeff 
=ff 
bookingff  '
.ff' (
	StartTimeff( 1
,ff1 2
EndTimegg 
=gg 
bookinggg %
.gg% &
EndTimegg& -
,gg- .
PaymentTotalhh  
=hh! "
bookinghh# *
.hh* +
PaymentTotalhh+ 7
,hh7 8
PaymentMadeDateii #
=ii$ %
bookingii& -
.ii- .
PaymentMadeDateii. =
,ii= >
NoCustomersjj 
=jj  !
bookingjj" )
.jj) *
NoCustomersjj* 5
,jj5 6
Commentskk 
=kk 
bookingkk &
.kk& '
Commentskk' /
}ll 
;ll 
Tablenn 
tablenn 
=nn 
_bookingFacadenn ,
.nn, -
GetAvailableTablenn- >
(nn> ?
resnn? B
)nnB C
;nnC D
ifpp 
(pp 
tablepp 
!=pp 
nullpp !
)pp! "
{qq 
Listrr 
<rr 
Tablerr 
>rr 
	resTablesrr  )
=rr* +
newrr, /
Listrr0 4
<rr4 5
Tablerr5 :
>rr: ;
{ss 
tablett 
}uu 
;uu 
resvv 
.vv 
Tablesvv 
=vv  
	resTablesvv! *
.vv* +
AsEnumerablevv+ 7
(vv7 8
)vv8 9
;vv9 :
Sessionxx 
[xx 
$strxx %
]xx% &
=xx' (
resxx) ,
;xx, -
return|| 
RedirectToAction|| +
(||+ ,
$str||, :
,||: ;
new||< ?
{||@ A
userId||B H
=||I J
Session||K R
[||R S
Global||S Y
.||Y Z
UserIdSessionVar||Z j
]||j k
}||l m
)||m n
;||n o
}}} 
else~~ 
{ 
AddToastMessage
€€ #
(
€€# $
$str
€€$ .
,
€€. /
$str
€€0 e
,
€€e f
Toast
€€g l
.
€€l m
	ToastType
€€m v
.
€€v w
Info
€€w {
)
€€{ |
;
€€| }
}
 
}
‚‚ 
GetTimes
„„ 
(
„„ 
)
„„ 
;
„„ 
return
…… 
View
…… 
(
…… 
booking
…… 
)
……  
;
……  !
}
†† 	
public
 
ActionResult
 
AddMenuItems
 (
(
( )
)
) *
{
‰‰ 	
IEnumerable
 
<
 
MenuItem
  
>
  !
res
" %
=
& '
_menuFacade
( 3
.
3 4 
FindByRestaurantId
4 F
(
F G
(
G H
int
H K
)
K L
Session
L S
[
S T
Global
T Z
.
Z [$
RestaurantIdSessionVar
[ q
]
q r
)
r s
;
s t
return
 
View
 
(
 
res
 
.
 
Select
 "
(
" #
m
# $
=>
% '
new
( +
AddMenuItemVM
, 9
{
 
Id
 
=
 
m
 
.
 
Id
 
,
 
Name
‘‘ 
=
‘‘ 
m
‘‘ 
.
‘‘ 
Name
‘‘ 
,
‘‘ 
Description
’’ 
=
’’ 
m
’’ 
.
’’  
Description
’’  +
,
’’+ ,
Price
““ 
=
““ 
m
““ 
.
““ 
Price
““ 
,
““  
DietInfo
”” 
=
”” 
m
”” 
.
”” 
DietInfo
”” %
.
””% &
Any
””& )
(
””) *
)
””* +
?
””, -
String
””. 4
.
””4 5
Join
””5 9
(
””9 :
$str
””: >
,
””> ?
m
””@ A
.
””A B
DietInfo
””B J
.
””J K
Select
””K Q
(
””Q R
d
””R S
=>
””T V
d
””W X
.
””X Y
Name
””Y ]
)
””] ^
)
””^ _
:
””` a
$str
””b g
,
””g h
Types
•• 
=
•• 
m
•• 
.
•• 
Types
•• 
.
••  
Any
••  #
(
••# $
)
••$ %
?
••& '
String
••( .
.
••. /
Join
••/ 3
(
••3 4
$str
••4 8
,
••8 9
m
••: ;
.
••; <
Types
••< A
.
••A B
Select
••B H
(
••H I
t
••I J
=>
••K M
t
••N O
.
••O P
Name
••P T
)
••T U
)
••U V
:
••W X
$str
••Y ^
}
–– 
)
–– 
.
–– 
ToList
–– 
(
–– 
)
–– 
)
–– 
;
–– 
}
—— 	
[
™™ 	
HttpPost
™™	 
]
™™ 
[
 	&
ValidateAntiForgeryToken
	 !
]
! "
public
›› 
ActionResult
›› 
AddMenuItems
›› (
(
››( )
[
››) *
Bind
››* .
(
››. /
Include
››/ 6
=
››7 8
$str
››9 ]
)
››] ^
]
››^ _
IList
››` e
<
››e f
AddMenuItemVM
››f s
>
››s t
	menuItems
››u ~
)
››~ 
{
 	
List
 
<
 
int
 
>
 
ids
 
=
 
Session
 #
[
# $
$str
$ /
]
/ 0
as
1 3
List
4 8
<
8 9
int
9 <
>
< =
;
= >
if
 
(
 
ids
 
!=
 
null
 
&&
 
ids
 "
.
" #
Any
# &
(
& '
)
' (
)
( )
{
   
return
΅΅ 
RedirectToAction
΅΅ '
(
΅΅' (
$str
΅΅( 0
,
΅΅0 1
$str
΅΅2 ;
)
΅΅; <
;
΅΅< =
}
ΆΆ 
Booking
¤¤ 
booking
¤¤ 
=
¤¤ 
(
¤¤ 
Booking
¤¤ &
)
¤¤& '
Session
¤¤' .
[
¤¤. /
$str
¤¤/ 8
]
¤¤8 9
;
¤¤9 :
_bookingFacade
¥¥ 
.
¥¥ 
Create
¥¥ !
(
¥¥! "
booking
¥¥" )
)
¥¥) *
;
¥¥* +
AddToastMessage
¦¦ 
(
¦¦ 
$str
¦¦ '
,
¦¦' (
$str
¦¦) <
,
¦¦< =
Toast
¦¦> C
.
¦¦C D
	ToastType
¦¦D M
.
¦¦M N
Success
¦¦N U
)
¦¦U V
;
¦¦V W
return
¨¨ 
RedirectToAction
¨¨ #
(
¨¨# $
$str
¨¨$ +
,
¨¨+ ,
new
¨¨- 0
{
¨¨1 2
userId
¨¨3 9
=
¨¨: ;
Session
¨¨< C
[
¨¨C D
Global
¨¨D J
.
¨¨J K
UserIdSessionVar
¨¨K [
]
¨¨[ \
}
¨¨] ^
)
¨¨^ _
;
¨¨_ `
}
©© 	
public
«« 
void
«« 
AddMenuItem
«« 
(
««  
int
««  #
Id
««$ &
)
««& '
{
¬¬ 	
if
­­ 
(
­­ 
Session
­­ 
[
­­ 
$str
­­ #
]
­­# $
==
­­% '
null
­­( ,
)
­­, -
{
®® 
List
―― 
<
―― 
int
―― 
>
―― 
ids
―― 
=
―― 
new
――  #
List
――$ (
<
――( )
int
――) ,
>
――, -
{
°° 
Id
±± 
}
²² 
;
²² 
Session
³³ 
[
³³ 
$str
³³ #
]
³³# $
=
³³% &
ids
³³' *
;
³³* +
}
΄΄ 
else
µµ 
{
¶¶ 
List
·· 
<
·· 
int
·· 
>
·· 
ids
·· 
=
·· 
Session
··  '
[
··' (
$str
··( 3
]
··3 4
as
··5 7
List
··8 <
<
··< =
int
··= @
>
··@ A
;
··A B
ids
ΈΈ 
.
ΈΈ 
Add
ΈΈ 
(
ΈΈ 
Id
ΈΈ 
)
ΈΈ 
;
ΈΈ 
Session
ΉΉ 
[
ΉΉ 
$str
ΉΉ #
]
ΉΉ# $
=
ΉΉ% &
ids
ΉΉ' *
;
ΉΉ* +
}
ΊΊ 
}
»» 	
public
½½ 
void
½½ 
RemoveMenuItem
½½ "
(
½½" #
int
½½# &
Id
½½' )
)
½½) *
{
ΎΎ 	
List
ΏΏ 
<
ΏΏ 
int
ΏΏ 
>
ΏΏ 
ids
ΏΏ 
=
ΏΏ 
Session
ΏΏ #
[
ΏΏ# $
$str
ΏΏ$ /
]
ΏΏ/ 0
as
ΏΏ1 3
List
ΏΏ4 8
<
ΏΏ8 9
int
ΏΏ9 <
>
ΏΏ< =
;
ΏΏ= >
ids
ΐΐ 
.
ΐΐ 
Remove
ΐΐ 
(
ΐΐ 
Id
ΐΐ 
)
ΐΐ 
;
ΐΐ 
Session
ΑΑ 
[
ΑΑ 
$str
ΑΑ 
]
ΑΑ  
=
ΑΑ! "
ids
ΑΑ# &
;
ΑΑ& '
}
ΒΒ 	
public
ΕΕ 
ActionResult
ΕΕ 
Cancel
ΕΕ "
(
ΕΕ" #
int
ΕΕ# &
?
ΕΕ& '
id
ΕΕ( *
)
ΕΕ* +
{
ΖΖ 	
if
ΗΗ 
(
ΗΗ 
id
ΗΗ 
==
ΗΗ 
null
ΗΗ 
)
ΗΗ 
return
ΘΘ 
new
ΘΘ "
HttpStatusCodeResult
ΘΘ /
(
ΘΘ/ 0
HttpStatusCode
ΘΘ0 >
.
ΘΘ> ?

BadRequest
ΘΘ? I
)
ΘΘI J
;
ΘΘJ K
Booking
ΚΚ 
res
ΚΚ 
=
ΚΚ 
_bookingFacade
ΚΚ (
.
ΚΚ( )
FindById
ΚΚ) 1
(
ΚΚ1 2
(
ΚΚ2 3
int
ΚΚ3 6
)
ΚΚ6 7
id
ΚΚ7 9
)
ΚΚ9 :
;
ΚΚ: ;
if
ΜΜ 
(
ΜΜ 
res
ΜΜ 
==
ΜΜ 
null
ΜΜ 
)
ΜΜ 
return
ΝΝ 
HttpNotFound
ΝΝ #
(
ΝΝ# $
)
ΝΝ$ %
;
ΝΝ% &
return
ΟΟ 
View
ΟΟ 
(
ΟΟ $
CreateBookingVMFromDto
ΟΟ .
(
ΟΟ. /
res
ΟΟ/ 2
)
ΟΟ2 3
)
ΟΟ3 4
;
ΟΟ4 5
}
ΠΠ 	
[
ΣΣ 	
HttpPost
ΣΣ	 
,
ΣΣ 

ActionName
ΣΣ 
(
ΣΣ 
$str
ΣΣ &
)
ΣΣ& '
]
ΣΣ' (
[
ΤΤ 	&
ValidateAntiForgeryToken
ΤΤ	 !
]
ΤΤ! "
public
ΥΥ 
ActionResult
ΥΥ 
CancelConfirmed
ΥΥ +
(
ΥΥ+ ,
int
ΥΥ, /
id
ΥΥ0 2
)
ΥΥ2 3
{
ΦΦ 	
_bookingFacade
ΧΧ 
.
ΧΧ 
Cancel
ΧΧ !
(
ΧΧ! "
id
ΧΧ" $
)
ΧΧ$ %
;
ΧΧ% &
return
ΨΨ 
RedirectToAction
ΨΨ #
(
ΨΨ# $
$str
ΨΨ$ +
,
ΨΨ+ ,
new
ΨΨ- 0
{
ΨΨ1 2
userId
ΨΨ3 9
=
ΨΨ: ;
Session
ΨΨ< C
[
ΨΨC D
Global
ΨΨD J
.
ΨΨJ K
UserIdSessionVar
ΨΨK [
]
ΨΨ[ \
}
ΨΨ] ^
)
ΨΨ^ _
;
ΨΨ_ `
}
ΩΩ 	
[
ΫΫ 	
HttpPost
ΫΫ	 
]
ΫΫ 
public
άά 

JsonResult
άά 
GetTimes
άά "
(
άά" #
)
άά# $
{
έέ 	
List
ήή 
<
ήή 
SelectListItem
ήή 
>
ήή  
list
ήή! %
=
ήή& '
new
ήή( +
List
ήή, 0
<
ήή0 1
SelectListItem
ήή1 ?
>
ήή? @
(
ήή@ A
)
ήήA B
;
ήήB C
SelectListItem
ίί 

defaultVal
ίί %
=
ίί& '
new
ίί( +
SelectListItem
ίί, :
{
ΰΰ 
Value
αα 
=
αα 
null
αα 
,
αα 
Text
ββ 
=
ββ 
$str
ββ $
,
ββ$ %
Selected
γγ 
=
γγ 
true
γγ 
}
δδ 
;
δδ 
list
εε 
.
εε 
Add
εε 
(
εε 

defaultVal
εε 
)
εε  
;
εε  !
List
ηη 
<
ηη 
TimeSpan
ηη 
>
ηη 
times
ηη  
=
ηη! "
new
ηη# &
List
ηη' +
<
ηη+ ,
TimeSpan
ηη, 4
>
ηη4 5
(
ηη5 6
)
ηη6 7
;
ηη7 8
List
θθ 
<
θθ 
int
θθ 
>
θθ 
minutes
θθ 
=
θθ 
new
θθ  #
List
θθ$ (
<
θθ( )
int
θθ) ,
>
θθ, -
{
ιι 
$num
κκ 
,
κκ 
$num
λλ 
,
λλ 
$num
μμ 
,
μμ 
$num
νν 
}
ξξ 
;
ξξ 
for
ππ 
(
ππ 
int
ππ 
i
ππ 
=
ππ 
$num
ππ 
;
ππ 
i
ππ 
<
ππ 
$num
ππ  "
;
ππ" #
i
ππ$ %
++
ππ% '
)
ππ' (
{
ρρ 
foreach
ςς 
(
ςς 
int
ςς 
ii
ςς 
in
ςς  "
minutes
ςς# *
)
ςς* +
{
σσ 
times
ττ 
.
ττ 
Add
ττ 
(
ττ 
new
ττ !
TimeSpan
ττ" *
(
ττ* +
i
ττ+ ,
,
ττ, -
ii
ττ. 0
,
ττ0 1
$num
ττ2 3
)
ττ3 4
)
ττ4 5
;
ττ5 6
}
υυ 
}
φφ 
foreach
ψψ 
(
ψψ 
var
ψψ 
t
ψψ 
in
ψψ 
times
ψψ #
.
ψψ# $
Select
ψψ$ *
(
ψψ* +
tt
ψψ+ -
=>
ψψ. 0
new
ψψ1 4
SelectListItem
ψψ5 C
{
ψψD E
Value
ψψF K
=
ψψL M
tt
ψψN P
.
ψψP Q
ToString
ψψQ Y
(
ψψY Z
)
ψψZ [
,
ψψ[ \
Text
ψψ] a
=
ψψb c
tt
ψψd f
.
ψψf g
ToString
ψψg o
(
ψψo p
)
ψψp q
}
ψψr s
)
ψψs t
)
ψψt u
{
ωω 
list
ϊϊ 
.
ϊϊ 
Add
ϊϊ 
(
ϊϊ 
t
ϊϊ 
)
ϊϊ 
;
ϊϊ 
}
ϋϋ 
ViewBag
ύύ 
.
ύύ 
	StartTime
ύύ 
=
ύύ 
new
ύύ  #

SelectList
ύύ$ .
(
ύύ. /
times
ύύ/ 4
,
ύύ4 5
$str
ύύ6 C
)
ύύC D
;
ύύD E
return
 
Json
 
(
 
list
 
,
 !
JsonRequestBehavior
 1
.
1 2
AllowGet
2 :
)
: ;
;
; <
}
€€ 	
private
‚‚ 
	BookingVM
‚‚ $
CreateBookingVMFromDto
‚‚ 0
(
‚‚0 1
Booking
‚‚1 8
dto
‚‚9 <
)
‚‚< =
{
ƒƒ 	
return
„„ 
new
„„ 
	BookingVM
„„  
{
…… 
Id
†† 
=
†† 
dto
†† 
.
†† 
Id
†† 
,
†† 

CustomerId
‡‡ 
=
‡‡ 
dto
‡‡  
.
‡‡  !

CustomerId
‡‡! +
,
‡‡+ ,
RestaurantId
 
=
 
dto
 "
.
" #
RestaurantId
# /
,
/ 0

Restaurant
‰‰ 
=
‰‰ 
new
‰‰  
RestaurantVM
‰‰! -
{
 
Id
‹‹ 
=
‹‹ 
dto
‹‹ 
.
‹‹ 

Restaurant
‹‹ '
.
‹‹' (
Id
‹‹( *
,
‹‹* +
	CompanyId
 
=
 
dto
  #
.
# $

Restaurant
$ .
.
. /
	CompanyId
/ 8
,
8 9
Name
 
=
 
dto
 
.
 

Restaurant
 )
.
) *
Name
* .
,
. /
PhoneNo
 
=
 
dto
 !
.
! "

Restaurant
" ,
.
, -
PhoneNo
- 4
,
4 5
AddressStreet
 !
=
" #
dto
$ '
.
' (

Restaurant
( 2
.
2 3
AddressStreet
3 @
,
@ A
AddressTown
 
=
  !
dto
" %
.
% &

Restaurant
& 0
.
0 1
AddressTown
1 <
,
< =
AddressCounty
‘‘ !
=
‘‘" #
dto
‘‘$ '
.
‘‘' (

Restaurant
‘‘( 2
.
‘‘2 3
AddressCounty
‘‘3 @
,
‘‘@ A
AddressPostalCode
’’ %
=
’’& '
dto
’’( +
.
’’+ ,

Restaurant
’’, 6
.
’’6 7
AddressPostalCode
’’7 H
,
’’H I

TableCount
““ 
=
““  
dto
““! $
.
““$ %

Restaurant
““% /
.
““/ 0
Tables
““0 6
.
““6 7
Count
““7 <
(
““< =
)
““= >
}
”” 
,
”” 
BookingMadeDate
•• 
=
••  !
dto
••" %
.
••% &
BookingMadeDate
••& 5
,
••5 6
BookingMadeTime
–– 
=
––  !
dto
––" %
.
––% &
BookingMadeTime
––& 5
,
––5 6
BookingDate
—— 
=
—— 
dto
—— !
.
——! "
BookingDate
——" -
,
——- .
	StartTime
 
=
 
dto
 
.
  
	StartTime
  )
,
) *
EndTime
™™ 
=
™™ 
dto
™™ 
.
™™ 
EndTime
™™ %
,
™™% &
PaymentTotal
 
=
 
dto
 "
.
" #
PaymentTotal
# /
,
/ 0
NoCustomers
›› 
=
›› 
dto
›› !
.
››! "
NoCustomers
››" -
,
››- .
Comments
 
=
 
dto
 
.
 
Comments
 '
,
' (
	Cancelled
 
=
 
dto
 
.
  
	Cancelled
  )
}
 
;
 
}
 	
}
   
}΅΅ ο

C:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\Controllers\ControllerExtensions\MessageControllerBase.cs
	namespace 	
BookingSystemApp
 
. 
Controllers &
.& ' 
ControllerExtensions' ;
{		 
public

 

abstract

 
class

 !
MessageControllerBase

 /
:

0 1

Controller

2 <
{ 
public !
MessageControllerBase $
($ %
)% &
{ 	
Toastr 
= 
new 
Toastr 
(  
)  !
;! "
} 	
public 
Toastr 
Toastr 
{ 
get "
;" #
set$ '
;' (
}) *
public 
ToastMessage 
AddToastMessage +
(+ ,
string, 2
title3 8
,8 9
string: @
messageA H
,H I
	ToastTypeJ S
	toastTypeT ]
)] ^
{ 	
return 
Toastr 
. 
AddToastMessage )
() *
title* /
,/ 0
message1 8
,8 9
	toastType: C
)C D
;D E
} 	
} 
} α
C:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\Controllers\ControllerExtensions\MessagesActionFilter.cs
	namespace 	
BookingSystemApp
 
. 
Controllers &
.& ' 
ControllerExtensions' ;
{		 
public

 

class

  
MessagesActionFilter

 %
:

& '!
ActionFilterAttribute

( =
{ 
public 
override 
void 
OnActionExecuting .
(. /"
ActionExecutingContext/ E
filterContextF S
)S T
{ 	!
MessageControllerBase !

controller" ,
=- .
filterContext/ <
.< =

Controller= G
asH J!
MessageControllerBaseK `
;` a
if 
( 

controller 
!= 
null "
)" #

controller 
. 
Toastr !
=" #
($ %

controller% /
./ 0
TempData0 8
[8 9
$str9 A
]A B
asC E
ToastrF L
)L M
??% '
new( +
Toastr, 2
(2 3
)3 4
;4 5
base 
. 
OnActionExecuting "
(" #
filterContext# 0
)0 1
;1 2
} 	
public 
override 
void 
OnActionExecuted -
(- .!
ActionExecutedContext. C
filterContextD Q
)Q R
{ 	!
MessageControllerBase !

controller" ,
=- .
filterContext/ <
.< =

Controller= G
asH J!
MessageControllerBaseK `
;` a
if 
( 
filterContext 
. 
Result $
.$ %
GetType% ,
(, -
)- .
==/ 1
typeof2 8
(8 9

ViewResult9 C
)C D
)D E
{ 
if 
( 

controller 
. 
Toastr %
!=& (
null) -
&&. 0

controller1 ;
.; <
Toastr< B
.B C
ToastMessagesC P
.P Q
CountQ V
(V W
)W X
>Y Z
$num[ \
)\ ]
{   

controller"" 
."" 
ViewData"" '
[""' (
$str""( 0
]""0 1
=""2 3

controller""4 >
.""> ?
Toastr""? E
;""E F
}## 
}$$ 
else%% 
if%% 
(%% 
filterContext%% "
.%%" #
Result%%# )
.%%) *
GetType%%* 1
(%%1 2
)%%2 3
==%%4 6
typeof%%7 =
(%%= >!
RedirectToRouteResult%%> S
)%%S T
||%%U W
filterContext%%X e
.%%e f
Result%%f l
.%%l m
GetType%%m t
(%%t u
)%%u v
==%%w y
typeof	%%z €
(
%%€ 
RedirectResult
%% 
)
%% 
)
%% ‘
{&& 
if'' 
('' 

controller'' 
.'' 
Toastr'' %
!=''& (
null'') -
&&''. 0

controller''1 ;
.''; <
Toastr''< B
.''B C
ToastMessages''C P
.''P Q
Count''Q V
(''V W
)''W X
>''Y Z
$num''[ \
)''\ ]
{(( 

controller++ 
.++ 
TempData++ '
[++' (
$str++( 0
]++0 1
=++2 3

controller++4 >
.++> ?
Toastr++? E
;++E F
},, 
}-- 
base// 
.// 
OnActionExecuted// !
(//! "
filterContext//" /
)/// 0
;//0 1
}00 	
}11 
}22 ™e
†C:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\Controllers\CustomerController.cs
	namespace 	
BookingSystemApp
 
. 
Controllers &
{ 
public 

class 
CustomerController #
:$ %!
MessageControllerBase& ;
{ 
private 
readonly 

AuthFacade #
_authFacade$ /
;/ 0
private 
readonly 
CustomerFacade '
_customerFacade( 7
;7 8
public 
CustomerController !
(! "
)" #
{ 	
_authFacade 
= 
new 

AuthFacade (
(( )
)) *
;* +
_customerFacade 
= 
new !
CustomerFacade" 0
(0 1
)1 2
;2 3
} 	
public 
ActionResult 
Index !
(! "
)" #
{ 	
return 
View 
( 
) 
; 
} 	
public   
ActionResult   
Details   #
(  # $
int  $ '
?  ' (
id  ) +
)  + ,
{!! 	
if"" 
("" 
id"" 
=="" 
null"" 
)"" 
return## 
new##  
HttpStatusCodeResult## /
(##/ 0
HttpStatusCode##0 >
.##> ?

BadRequest##? I
)##I J
;##J K
Customer%% 
res%% 
=%% 
_customerFacade%% *
.%%* +
Get%%+ .
(%%. /
)%%/ 0
;%%0 1
if'' 
('' 
res'' 
=='' 
null'' 
)'' 
return(( 
HttpNotFound(( #
(((# $
)(($ %
;((% &
return** 
View** 
(** 
new** 

RegisterVM** &
{++ 
Id,, 
=,, 
res,, 
.,, 
Id,, 
,,, 
Username-- 
=-- 
res-- 
.-- 
UserName-- '
,--' (
Title.. 
=.. 
res.. 
... 
Title.. !
,..! "
Forename// 
=// 
res// 
.// 
Forename// '
,//' (
Surname00 
=00 
res00 
.00 
Surname00 %
,00% &
Dob11 
=11 
res11 
.11 
DoB11 
,11 
AddressStreet22 
=22 
res22  #
.22# $
AddressStreet22$ 1
,221 2
AddressTown33 
=33 
res33 !
.33! "
AddressTown33" -
,33- .
AddressCounty44 
=44 
res44  #
.44# $
AddressCounty44$ 1
,441 2
AddressPostalCode55 !
=55" #
res55$ '
.55' (
AddressPostalCode55( 9
,559 :
HomePhoneNo66 
=66 
res66 !
.66! "
HomePhoneNo66" -
,66- .
WorkPhoneNo77 
=77 
res77 !
.77! "
WorkPhoneNo77" -
??77. 0
$str771 <
,77< =
MobilePhoneNo88 
=88 
res88  #
.88# $
MobilePhoneNo88$ 1
,881 2
Email99 
=99 
res99 
.99 
Email99 !
,99! "
}:: 
):: 
;:: 
};; 	
public== 
ActionResult== 
Register== $
(==$ %
)==% &
{>> 	
return?? 
View?? 
(?? 
)?? 
;?? 
}@@ 	
[BB 	
HttpPostBB	 
]BB 
[CC 	$
ValidateAntiForgeryTokenCC	 !
]CC! "
publicDD 
ActionResultDD 
RegisterDD $
(DD$ %
[DD% &
BindDD& *
(DD* +
IncludeDD+ 2
=DD3 4
$str	DD5 …
+
DD† ‡
$strEE e
)EEe f
]EEf g

RegisterVMEEh r
registrationEEs 
)	EE €
{FF 	
ifGG 
(GG 

ModelStateGG 
.GG 
IsValidGG "
)GG" #
{HH 
ifII 
(II 
_authFacadeII 
.II  
RegisterII  (
(II( )
registrationII) 5
.II5 6
UsernameII6 >
,II> ?
registrationII@ L
.IIL M
PasswordIIM U
,IIU V
registrationIIW c
.IIc d
ConfirmPasswordIId s
)IIs t
)IIt u
{JJ 
_authFacadeKK 
.KK  
GetTokenKK  (
(KK( )
registrationKK) 5
.KK5 6
UsernameKK6 >
,KK> ?
registrationKK@ L
.KKL M
PasswordKKM U
)KKU V
;KKV W
GenericFacadeMM !
.MM! "
UserNameMM" *
=MM+ ,
registrationMM- 9
.MM9 :
UsernameMM: B
;MMB C
stringOO 
owinIdOO !
=OO" #
_authFacadeOO$ /
.OO/ 0
	GetUserIdOO0 9
(OO9 :
)OO: ;
;OO; <
GenericFacadeQQ !
.QQ! "
OwinIdQQ" (
=QQ) *
owinIdQQ+ 1
;QQ1 2
_authFacadeRR 
.RR  
AddCustomerRoleRR  /
(RR/ 0
)RR0 1
;RR1 2
SessionTT 
[TT 
GlobalTT "
.TT" #
RolesSessionVarTT# 2
]TT2 3
=TT4 5
GenericFacadeTT6 C
.TTC D
IsAdminTTD K
;TTK L
_customerFacadeVV #
.VV# $
CreateVV$ *
(VV* +
newVV+ .
CustomerVV/ 7
{WW 

OwinUserIdXX "
=XX# $
owinIdXX% +
,XX+ ,
UserNameYY  
=YY! "
registrationYY# /
.YY/ 0
UsernameYY0 8
,YY8 9
TitleZZ 
=ZZ 
registrationZZ  ,
.ZZ, -
TitleZZ- 2
,ZZ2 3
Forename[[  
=[[! "
registration[[# /
.[[/ 0
Forename[[0 8
,[[8 9
Surname\\ 
=\\  !
registration\\" .
.\\. /
Surname\\/ 6
,\\6 7
DoB]] 
=]] 
registration]] *
.]]* +
Dob]]+ .
,]]. /
AddressStreet^^ %
=^^& '
registration^^( 4
.^^4 5
AddressStreet^^5 B
,^^B C
AddressTown__ #
=__$ %
registration__& 2
.__2 3
AddressTown__3 >
,__> ?
AddressCounty`` %
=``& '
registration``( 4
.``4 5
AddressCounty``5 B
,``B C
AddressPostalCodeaa )
=aa* +
registrationaa, 8
.aa8 9
AddressPostalCodeaa9 J
,aaJ K
HomePhoneNobb #
=bb$ %
registrationbb& 2
.bb2 3
HomePhoneNobb3 >
,bb> ?
WorkPhoneNocc #
=cc$ %
registrationcc& 2
.cc2 3
WorkPhoneNocc3 >
,cc> ?
MobilePhoneNodd %
=dd& '
registrationdd( 4
.dd4 5
MobilePhoneNodd5 B
,ddB C
Emailee 
=ee 
registrationee  ,
.ee, -
Emailee- 2
}ff 
)ff 
;ff 
Customerhh 
chh 
=hh  
_customerFacadehh! 0
.hh0 1
Gethh1 4
(hh4 5
)hh5 6
;hh6 7
Sessionjj 
[jj 
Globaljj "
.jj" #
UserIdSessionVarjj# 3
]jj3 4
=jj5 6
cjj7 8
.jj8 9
Idjj9 ;
;jj; <
Sessionkk 
[kk 
Globalkk "
.kk" #
UsernameSessionVarkk# 5
]kk5 6
=kk7 8
registrationkk9 E
.kkE F
UsernamekkF N
;kkN O
returnmm 
RedirectToActionmm +
(mm+ ,
$strmm, 3
,mm3 4
$strmm5 ;
)mm; <
;mm< =
}nn 
elseoo 
{pp 
returnqq 
Viewqq 
(qq  
registrationqq  ,
)qq, -
;qq- .
}rr 
}tt 
returnvv 
Viewvv 
(vv 
registrationvv $
)vv$ %
;vv% &
}ww 	
publicyy 
ActionResultyy 
Loginyy !
(yy! "
)yy" #
{zz 	
Session{{ 
[{{ 
$str{{ 
]{{ 
={{  
Request{{! (
.{{( )
UrlReferrer{{) 4
.{{4 5
ToString{{5 =
({{= >
){{> ?
;{{? @
return|| 
View|| 
(|| 
)|| 
;|| 
}}} 	
[ 	
HttpPost	 
] 
[
€€ 	&
ValidateAntiForgeryToken
€€	 !
]
€€! "
public
 
ActionResult
 
Login
 !
(
! "
LoginVM
" )
login
* /
)
/ 0
{
‚‚ 	
if
ƒƒ 
(
ƒƒ 

ModelState
ƒƒ 
.
ƒƒ 
IsValid
ƒƒ "
)
ƒƒ" #
{
„„ 
_authFacade
…… 
.
…… 
GetToken
…… $
(
……$ %
login
……% *
.
……* +
Username
……+ 3
,
……3 4
login
……5 :
.
……: ;
Password
……; C
)
……C D
;
……D E
Customer
‡‡ 
c
‡‡ 
=
‡‡ 
_customerFacade
‡‡ ,
.
‡‡, -
Get
‡‡- 0
(
‡‡0 1
)
‡‡1 2
;
‡‡2 3
Session
‰‰ 
[
‰‰ 
Global
‰‰ 
.
‰‰ 
RolesSessionVar
‰‰ .
]
‰‰. /
=
‰‰0 1
GenericFacade
‰‰2 ?
.
‰‰? @
Roles
‰‰@ E
;
‰‰E F
Session
 
[
 
Global
 
.
  
UsernameSessionVar
 1
]
1 2
=
3 4
login
5 :
.
: ;
Username
; C
;
C D
if
 
(
 
c
 
!=
 
null
 
||
  
!
! "
GenericFacade
" /
.
/ 0
Roles
0 5
.
5 6
Contains
6 >
(
> ?
Global
? E
.
E F
	AdminRole
F O
)
O P
)
P Q
{
 
Session
 
[
 
Global
 "
.
" #
UserIdSessionVar
# 3
]
3 4
=
5 6
c
7 8
.
8 9
Id
9 ;
;
; <
}
 
string
‘‘ 
url
‘‘ 
=
‘‘ 
(
‘‘ 
string
‘‘ $
)
‘‘$ %
Session
‘‘& -
[
‘‘- .
$str
‘‘. 7
]
‘‘7 8
;
‘‘8 9
return
““ 
Redirect
““ 
(
““  
url
““  #
)
““# $
;
““$ %
}
”” 
return
–– 
View
–– 
(
–– 
login
–– 
)
–– 
;
–– 
}
—— 	
public
™™ 
ActionResult
™™ 
Logout
™™ "
(
™™" #
)
™™# $
{
 	
Session
›› 
[
›› 
Global
›› 
.
›› 
UserIdSessionVar
›› +
]
››+ ,
=
››- .
null
››/ 3
;
››3 4
Session
 
[
 
Global
 
.
  
UsernameSessionVar
 -
]
- .
=
/ 0
null
2 6
;
6 7
Session
 
[
 
Global
 
.
 
RolesSessionVar
 *
]
* +
=
, -
null
. 2
;
2 3
GenericFacade
 
.
 
Token
 
=
  !
null
" &
;
& '
GenericFacade
   
.
   
UserName
   "
=
  # $
null
  % )
;
  ) *
GenericFacade
΅΅ 
.
΅΅ 
OwinId
΅΅  
=
΅΅! "
null
΅΅# '
;
΅΅' (
GenericFacade
ΆΆ 
.
ΆΆ 
IsAdmin
ΆΆ !
=
ΆΆ" #
false
ΆΆ$ )
;
ΆΆ) *
GenericFacade
££ 
.
££ 
Roles
££ 
=
££  !
null
££" &
;
££& '
return
¥¥ 
RedirectToAction
¥¥ #
(
¥¥# $
$str
¥¥$ +
,
¥¥+ ,
$str
¥¥- 3
)
¥¥3 4
;
¥¥4 5
}
¦¦ 	
}
§§ 
}¨¨ …
‚C:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\Controllers\HomeController.cs
	namespace 	
BookingSystemApp
 
. 
Controllers &
{ 
public 

class 
HomeController 
:  !!
MessageControllerBase" 7
{ 
private 
readonly 
CompanyFacade &
_companyFacade' 5
;5 6
private 
readonly 
RestaurantFacade )
_restaurantFacade* ;
;; <
public 
HomeController 
( 
) 
{ 	
ViewBag 
. 
Admin 
= 
true  
;  !
_companyFacade 
= 
new  
CompanyFacade! .
(. /
)/ 0
;0 1
_restaurantFacade 
= 
new  #
RestaurantFacade$ 4
(4 5
)5 6
;6 7
} 	
public 
ActionResult 
Index !
(! "
)" #
{ 	
ViewBag 
. 
Description 
=  !
_companyFacade" 0
.0 1
Get1 4
(4 5
)5 6
.6 7
Description7 B
;B C
ViewBag 
. 
RestaurantId  
=! "
new# &

SelectList' 1
(1 2
_restaurantFacade2 C
.C D
GetD G
(G H
)H I
,I J
$strK O
,O P
$strQ W
,W X
$strY l
)l m
;m n
return   
View   
(   
)   
;   
}!! 	
public## 
ActionResult## 
About## !
(##! "
)##" #
{$$ 	
Company%% 
company%% 
=%% 
_companyFacade%% ,
.%%, -
Get%%- 0
(%%0 1
)%%1 2
;%%2 3
return'' 
View'' 
('' 
new'' 
	CompanyVM'' %
{(( 
Id)) 
=)) 
company)) 
.)) 
Id)) 
,))  
Name** 
=** 
company** 
.** 
Name** #
,**# $
Description++ 
=++ 
company++ %
.++% &
Description++& 1
,++1 2
AddressStreet,, 
=,, 
company,,  '
.,,' (
AddressStreet,,( 5
,,,5 6
AddressTown-- 
=-- 
company-- %
.--% &
AddressTown--& 1
,--1 2
AddressCounty.. 
=.. 
company..  '
...' (
AddressCounty..( 5
,..5 6
AddressPostalCode// !
=//" #
company//$ +
.//+ ,
AddressPostalCode//, =
,//= >
PhoneNo00 
=00 
company00 !
.00! "
PhoneNo00" )
,00) *
Email11 
=11 
company11 
.11  
Email11  %
,11% &
RestaurantCount22 
=22  !
company22" )
.22) *
Restaurants22* 5
!=226 8
null229 =
?22> ?
company22@ G
.22G H
Restaurants22H S
.22S T
Count22T Y
(22Y Z
)22Z [
:22\ ]
$num22^ _
}33 
)33 
;33 
}44 	
public66 
ActionResult66 
Contact66 #
(66# $
)66$ %
{77 	
ViewBag88 
.88 
Message88 
=88 
$str88 2
;882 3
return:: 
View:: 
(:: 
):: 
;:: 
};; 	
}<< 
}== X
‚C:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\Controllers\MenuController.cs
	namespace 	
BookingSystemApp
 
. 
Controllers &
{ 
public 

class 
MenuController 
:  !!
MessageControllerBase" 7
{ 
private 
readonly 

MenuFacade #
_menuFacade$ /
;/ 0
private 
readonly 
DietInfoFacade '
_dietInfoFacade( 7
;7 8
private 
readonly 
MenuItemTypeFacade +
_menuItemTypeFacade, ?
;? @
private 
readonly 
ImageFacade $
_imageFacade% 1
;1 2
public 
MenuController 
( 
) 
{ 	
_menuFacade 
= 
new 

MenuFacade (
(( )
)) *
;* +
_dietInfoFacade 
= 
new !
DietInfoFacade" 0
(0 1
)1 2
;2 3
_menuItemTypeFacade 
=  !
new" %
MenuItemTypeFacade& 8
(8 9
)9 :
;: ;
_imageFacade 
= 
new 
ImageFacade *
(* +
)+ ,
;, -
} 	
public 
ActionResult 
Index !
(! "
MenuIndexVM" -
indexVM. 5
=6 7
null8 <
)< =
{ 	

IQueryable   
<   
MenuItem   
>    
res  ! $
=  % &
_menuFacade  ' 2
.  2 3
Get  3 6
(  6 7
)  7 8
.  8 9
AsQueryable  9 D
(  D E
)  E F
;  F G
ViewBag"" 
."" 
Type"" 
="" 
new"" 

SelectList"" )
("") *
_menuItemTypeFacade""* =
.""= >
Get""> A
(""A B
)""B C
.""C D
OrderBy""D K
(""K L
d""L M
=>""N P
d""Q R
.""R S
Name""S W
)""W X
,""X Y
$str""Z ^
,""^ _
$str""` f
,""f g
$str""h y
)""y z
;""z {
ViewBag## 
.## 
DietInfo## 
=## 
new## "

SelectList### -
(##- .
_dietInfoFacade##. =
.##= >
Get##> A
(##A B
)##B C
.##C D
OrderBy##D K
(##K L
d##L M
=>##N P
d##Q R
.##R S
Name##S W
)##W X
,##X Y
$str##Z ^
,##^ _
$str##` f
,##f g
$str	##h 
)
## ‚
;
##‚ ƒ
if%% 
(%% 
indexVM%% 
!=%% 
null%% 
)%%  
{&& 
if'' 
('' 
indexVM'' 
.'' 
Type''  
!=''! #
null''$ (
)''( )
res(( 
=(( 
res(( 
.(( 
Where(( #
(((# $
m(($ %
=>((& (
m(() *
.((* +
Types((+ 0
.((0 1
Select((1 7
(((7 8
mm((8 :
=>((; =
mm((> @
.((@ A
Id((A C
)((C D
.((D E
ToList((E K
(((K L
)((L M
.((M N
Contains((N V
(((V W
(((W X
int((X [
)(([ \
indexVM((] d
.((d e
Type((e i
)((i j
)((j k
;((k l
if** 
(** 
indexVM** 
.** 
DietInfo** $
!=**% '
null**( ,
)**, -
res++ 
=++ 
res++ 
.++ 
Where++ #
(++# $
m++$ %
=>++& (
m++) *
.++* +
DietInfo+++ 3
.++3 4
Select++4 :
(++: ;
mm++; =
=>++> @
mm++A C
.++C D
Id++D F
)++F G
.++G H
ToList++H N
(++N O
)++O P
.++P Q
Contains++Q Y
(++Y Z
(++Z [
int++[ ^
)++^ _
indexVM++` g
.++g h
DietInfo++h p
)++p q
)++q r
;++r s
if-- 
(-- 
indexVM-- 
.-- 

StartPrice-- &
!=--' )
null--* .
)--. /
res.. 
=.. 
res.. 
... 
Where.. #
(..# $
m..$ %
=>..& (
m..) *
...* +
Price..+ 0
>=..1 3
indexVM..4 ;
...; <

StartPrice..< F
)..F G
;..G H
if00 
(00 
indexVM00 
.00 
EndPrice00 $
!=00% '
null00( ,
)00, -
res11 
=11 
res11 
.11 
Where11 #
(11# $
m11$ %
=>11& (
m11) *
.11* +
Price11+ 0
<=111 3
indexVM114 ;
.11; <
EndPrice11< D
)11D E
;11E F
IEnumerable33 
<33 
MenuItemType33 (
>33( )
types33* /
=330 1
_menuItemTypeFacade332 E
.33E F
Get33F I
(33I J
)33J K
;33K L
List44 
<44 
MenuIndexCategoryVM44 (
>44( )

categories44* 4
=445 6
new447 :
List44; ?
<44? @
MenuIndexCategoryVM44@ S
>44S T
(44T U
)44U V
;44V W
foreach66 
(66 
var66 
type66 !
in66" $
types66% *
)66* +
{77 

categories88 
.88 
Add88 "
(88" #
new88# &
MenuIndexCategoryVM88' :
{99 
Category::  
=::! "
type::# '
,::' (
	MenuItems;; !
=;;" #
res;;$ '
.;;' (
Where;;( -
(;;- .
m;;. /
=>;;0 2
m;;3 4
.;;4 5
Types;;5 :
.;;: ;
Where;;; @
(;;@ A
t;;B C
=>;;D F
t;;G H
.;;H I
Id;;I K
==;;L N
type;;O S
.;;S T
Id;;T V
);;V W
.;;W X
Any;;X [
(;;[ \
);;\ ]
);;] ^
.;;^ _
Select;;_ e
(;;e f
m;;f g
=>;;h j
new;;k n
MenuItemViewVM;;o }
{<< 
Id== 
===  
m==! "
.==" #
Id==# %
,==% &
Name>>  
=>>! "
m>># $
.>>$ %
Name>>% )
,>>) *
Description?? '
=??( )
m??* +
.??+ ,
Description??, 7
????8 :
$str??; K
,??K L
Price@@ !
=@@" #
m@@$ %
.@@% &
Price@@& +
,@@+ ,
ImageIdAA #
=AA$ %
mAA& '
.AA' (
ImageIdAA( /
,AA/ 0
	DietInfoSBB %
=BB& '
mBB( )
.BB) *
DietInfoBB* 2
.BB2 3
AnyBB3 6
(BB6 7
)BB7 8
?BB9 :
StringBB; A
.BBA B
JoinBBB F
(BBF G
$strBBG K
,BBK L
mBBM N
.BBN O
DietInfoBBO W
.BBW X
SelectBBX ^
(BB^ _
dBB_ `
=>BBa c
dBBd e
.BBe f
NameBBf j
)BBj k
)BBk l
:BBm n
$strBBo t
,BBt u
TypesSCC "
=CC# $
mCC% &
.CC& '
TypesCC' ,
.CC, -
AnyCC- 0
(CC0 1
)CC1 2
?CC3 4
StringCC5 ;
.CC; <
JoinCC< @
(CC@ A
$strCCA E
,CCE F
mCCG H
.CCH I
TypesCCI N
.CCN O
SelectCCO U
(CCU V
tCCV W
=>CCX Z
tCC[ \
.CC\ ]
NameCC] a
)CCa b
)CCb c
:CCd e
$strCCf k
}DD 
)DD 
}EE 
)EE 
;EE 
}FF 
returnHH 
ViewHH 
(HH 

categoriesHH &
.HH& '
AsEnumerableHH' 3
(HH3 4
)HH4 5
)HH5 6
;HH6 7
}II 
returnKK 
ViewKK 
(KK 
newKK 
MenuIndexVMKK '
{LL 
	MenuItemsMM 
=MM 
resMM 
.MM  
SelectMM  &
(MM& '
mMM' (
=>MM) +
newMM, /
MenuItemViewVMMM0 >
{NN 
IdOO 
=OO 
mOO 
.OO 
IdOO 
,OO 
NamePP 
=PP 
mPP 
.PP 
NamePP !
,PP! "
DescriptionQQ 
=QQ  !
mQQ" #
.QQ# $
DescriptionQQ$ /
??QQ0 2
$strQQ3 C
,QQC D
PriceRR 
=RR 
mRR 
.RR 
PriceRR #
,RR# $
ImageIdSS 
=SS 
mSS 
.SS  
ImageIdSS  '
,SS' (
	DietInfoSTT 
=TT 
mTT  !
.TT! "
DietInfoTT" *
.TT* +
AnyTT+ .
(TT. /
)TT/ 0
?TT1 2
StringTT3 9
.TT9 :
JoinTT: >
(TT> ?
$strTT? C
,TTC D
mTTE F
.TTF G
DietInfoTTG O
.TTO P
SelectTTP V
(TTV W
dTTW X
=>TTY [
dTT\ ]
.TT] ^
NameTT^ b
)TTb c
)TTc d
:TTe f
$strTTg l
,TTl m
TypesSUU 
=UU 
mUU 
.UU 
TypesUU $
.UU$ %
AnyUU% (
(UU( )
)UU) *
?UU+ ,
StringUU- 3
.UU3 4
JoinUU4 8
(UU8 9
$strUU9 =
,UU= >
mUU? @
.UU@ A
TypesUUA F
.UUF G
SelectUUG M
(UUM N
tUUN O
=>UUP R
tUUS T
.UUT U
NameUUU Y
)UUY Z
)UUZ [
:UU\ ]
$strUU^ c
}VV 
)VV 
.VV 
AsEnumerableVV 
(VV  
)VV  !
}WW 
)WW 
;WW 
}XX 	
publicZZ 
asyncZZ 
TaskZZ 
<ZZ 
ActionResultZZ &
>ZZ& '
ImageFromIdZZ( 3
(ZZ3 4
intZZ4 7
idZZ8 :
)ZZ: ;
{[[ 	
Image\\ 
i\\ 
=\\ 
_imageFacade\\ "
.\\" #
	LoadImage\\# ,
(\\, -
id\\- /
)\\/ 0
;\\0 1
return^^ 
File^^ 
(^^ 
i^^ 
.^^ 
FileContent^^ %
,^^% &
i^^' (
.^^( )
Type^^) -
)^^- .
;^^. /
}__ 	
}`` 
}aa ίA
…C:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\Controllers\PaymentController.cs
	namespace 	
BookingSystemApp
 
. 
Controllers &
{ 
public 

class 
PaymentController "
:# $!
MessageControllerBase% :
{ 
private 
readonly 
BookingFacade &
_bookingFacade' 5
;5 6
private 
readonly 

MenuFacade #
_menuFacade$ /
;/ 0
private 
readonly 
PaymentFacade &
_paymentFacade' 5
;5 6
public 
PaymentController  
(  !
)! "
{ 	
_bookingFacade 
= 
new  
BookingFacade! .
(. /
)/ 0
;0 1
_menuFacade 
= 
new 

MenuFacade (
(( )
)) *
;* +
_paymentFacade 
= 
new  
PaymentFacade! .
(. /
)/ 0
;0 1
} 	
public 
ActionResult 
Index !
(! "
)" #
{ 	
return 
View 
( 
) 
; 
} 	
public   
ActionResult   
Create   "
(  " #
)  # $
{!! 	
List"" 
<"" 
int"" 
>"" 
ids"" 
="" 
Session"" #
[""# $
$str""$ /
]""/ 0
as""1 3
List""4 8
<""8 9
int""9 <
>""< =
;""= >
IEnumerable$$ 
<$$ 
PaymentMethod$$ %
>$$% &
paymentMethods$$' 5
=$$6 7
_paymentFacade$$8 F
.$$F G
GetPaymentMethod$$G W
($$W X
)$$X Y
.$$Y Z
OrderBy$$Z a
($$a b
p$$b c
=>$$d f
p$$g h
.$$h i
Name$$i m
)$$m n
;$$n o
IEnumerable&& 
<&& 
MenuItem&&  
>&&  !
selectedItems&&" /
=&&0 1
_menuFacade&&2 =
.&&= >
Get&&> A
(&&A B
)&&B C
.&&C D
Where&&D I
(&&I J
m&&J K
=>&&L N
ids&&O R
.&&R S
Contains&&S [
(&&[ \
m&&\ ]
.&&] ^
Id&&^ `
)&&` a
)&&a b
;&&b c
ViewBag(( 
.(( 
PaymentMethod(( !
=((" #
new(($ '

SelectList((( 2
(((2 3
paymentMethods((3 A
,((A B
$str((C G
,((G H
$str((I O
,((O P
$str((Q h
)((h i
;((i j
double** 
total** 
=** 
$num** 
;** 
foreach,, 
(,, 
var,, 
item,, 
in,,  
selectedItems,,! .
),,. /
{-- 
total.. 
+=.. 
item.. 
... 
Price.. #
;..# $
}// 
return11 
View11 
(11 
new11 
	PaymentVM11 %
{22 
Amount33 
=33 
total33 
}44 
)44 
;44 
}55 	
[:: 	
HttpPost::	 
]:: 
[;; 	$
ValidateAntiForgeryToken;;	 !
];;! "
public<< 
ActionResult<< 
Create<< "
(<<" #
[<<# $
Bind<<$ (
(<<( )
Include<<) 0
=<<1 2
$str<<3 g
)<<g h
]<<h i
	PaymentVM<<j s
payment<<t {
)<<{ |
{== 	
Booking>> 
booking>> 
=>> 
(>> 
Booking>> &
)>>& '
Session>>' .
[>>. /
$str>>/ 8
]>>8 9
;>>9 :
List?? 
<?? 
int?? 
>?? 
ids?? 
=?? 
Session?? #
[??# $
$str??$ /
]??/ 0
as??1 3
List??4 8
<??8 9
int??9 <
>??< =
;??= >
paymentAA 
.AA 

CustomerIdAA 
=AA  
(AA! "
intAA" %
)AA% &
SessionAA& -
[AA- .
GlobalAA. 4
.AA4 5
UserIdSessionVarAA5 E
]AAE F
;AAF G
paymentBB 
.BB 
	BookingIdBB 
=BB 
bookingBB  '
.BB' (
IdBB( *
;BB* +
ifDD 
(DD 

ModelStateDD 
.DD 
IsValidDD "
)DD" #
{EE 
bookingFF 
.FF 
PaymentMadeDateFF '
=FF( )
DateTimeFF* 2
.FF2 3
NowFF3 6
.FF6 7
DateFF7 ;
;FF; <
bookingGG 
.GG 
PaymentTotalGG $
=GG% &
ConvertGG' .
.GG. /
	ToDecimalGG/ 8
(GG8 9
paymentGG9 @
.GG@ A
AmountGGA G
)GGG H
;GGH I
IEnumerableII 
<II 
BookingMenuItemII +
>II+ ,
	menuItemsII- 6
=II7 8
idsII9 <
.II< =
SelectII= C
(IIC D
mIID E
=>IIF H
newIII L
BookingMenuItemIIM \
{II] ^

MenuItemIdII_ i
=IIj k
mIIl m
,IIm n
QuantityIIo w
=IIx y
$numIIz {
}II| }
)II} ~
;II~ 
bookingJJ 
.JJ 
	MenuItemsJJ !
=JJ" #
	menuItemsJJ$ -
;JJ- .
BookingLL 

resBookingLL "
=LL# $
_bookingFacadeLL% 3
.LL3 4
CreateLL4 :
(LL: ;
bookingLL; B
)LLB C
;LLC D
paymentNN 
.NN 
	BookingIdNN !
=NN" #

resBookingNN$ .
.NN. /
IdNN/ 1
;NN1 2
PaymentPP 
resPP 
=PP 
_paymentFacadePP ,
.PP, -
CreatePP- 3
(PP3 4
newPP4 7
PaymentPP8 ?
{QQ 
AmountRR 
=RR 
ConvertRR $
.RR$ %
	ToDecimalRR% .
(RR. /
paymentRR/ 6
.RR6 7
AmountRR7 =
)RR= >
,RR> ?
CommentsSS 
=SS 
paymentSS &
.SS& '
CommentsSS' /
,SS/ 0
	BookingIdTT 
=TT 
paymentTT  '
.TT' (
	BookingIdTT( 1
,TT1 2

CustomerIdUU 
=UU  
paymentUU! (
.UU( )

CustomerIdUU) 3
,UU3 4
PaymentMethodVV !
=VV" #
newVV$ '
PaymentMethodVV( 5
{WW 
IdXX 
=XX 
paymentXX $
.XX$ %
PaymentMethodXX% 2
}YY 
}ZZ 
)ZZ 
;ZZ 
AddToastMessage\\ 
(\\  
$str\\  +
,\\+ ,
$str\\- @
,\\@ A
Toast\\B G
.\\G H
	ToastType\\H Q
.\\Q R
Success\\R Y
)\\Y Z
;\\Z [
return]] 
RedirectToAction]] '
(]]' (
$str]]( /
,]]/ 0
$str]]1 :
,]]: ;
new]]< ?
{]]@ A
userId]]B H
=]]I J
Session]]K R
[]]R S
Global]]S Y
.]]Y Z
UserIdSessionVar]]Z j
]]]j k
}]]l m
)]]m n
;]]n o
}^^ 
ViewBag`` 
.`` 
PaymentMethod`` !
=``" #
new``$ '

SelectList``( 2
(``2 3
_paymentFacade``3 A
.``A B
GetPaymentMethod``B R
(``R S
)``S T
.``T U
OrderBy``U \
(``\ ]
d``] ^
=>``_ a
d``b c
.``c d
Name``d h
)``h i
,``i j
$str``k o
,``o p
$str``q w
,``w x
$str	``y 
)
`` ‘
;
``‘ ’
returnbb 
Viewbb 
(bb 
paymentbb 
)bb  
;bb  !
}cc 	
}dd 
}ee μA
C:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\Controllers\RestaurantController.cs
	namespace 	
BookingSystemApp
 
. 
Controllers &
{ 
public 

class  
RestaurantController %
:& '!
MessageControllerBase( =
{ 
private 
readonly 
RestaurantFacade )
_restaurantFacade* ;
;; <
private 
readonly 
BookingFacade &
_bookingFacade' 5
;5 6
private 
readonly 
ImageFacade $
_imageFacade% 1
;1 2
private 
readonly 
MenuItemTypeFacade +
_menuItemTypeFacade, ?
;? @
public  
RestaurantController #
(# $
)$ %
{ 	
_restaurantFacade 
= 
new  #
RestaurantFacade$ 4
(4 5
)5 6
;6 7
_bookingFacade 
= 
new  
BookingFacade! .
(. /
)/ 0
;0 1
_imageFacade 
= 
new 
ImageFacade *
(* +
)+ ,
;, -
_menuItemTypeFacade 
=  !
new" %
MenuItemTypeFacade& 8
(8 9
)9 :
;: ;
} 	
public!! 
ActionResult!! 
Index!! !
(!!! "
int!!" %
?!!% &
RestaurantId!!' 3
)!!3 4
{"" 	
if## 
(## 
RestaurantId## 
!=## 
null##  $
)##$ %
return$$ 
RedirectToAction$$ '
($$' (
$str$$( 1
,$$1 2
new$$3 6
{$$7 8
id$$9 ;
=$$< =
RestaurantId$$> J
}$$K L
)$$L M
;$$M N
return&& 
View&& 
(&& 
_restaurantFacade&& )
.&&) *
Get&&* -
(&&- .
)&&. /
)&&/ 0
;&&0 1
}'' 	
public** 
ActionResult** 
Details** #
(**# $
int**$ '
?**' (
id**) +
)**+ ,
{++ 	
if,, 
(,, 
id,, 
==,, 
null,, 
),, 
{-- 
return.. 
new..  
HttpStatusCodeResult.. /
(../ 0
HttpStatusCode..0 >
...> ?

BadRequest..? I
)..I J
;..J K
}// 

Restaurant00 

restaurant00 !
=00" #
_restaurantFacade00$ 5
.005 6
FindById006 >
(00> ?
(00? @
int00@ C
)00C D
id00E G
)00G H
;00H I
if11 
(11 

restaurant11 
==11 
null11 "
)11" #
{22 
return33 
HttpNotFound33 #
(33# $
)33$ %
;33% &
}44 
IEnumerable66 
<66 
MenuItemType66 $
>66$ %
types66& +
=66, -
_menuItemTypeFacade66. A
.66A B
Get66B E
(66E F
)66F G
;66G H
List77 
<77 
MenuIndexCategoryVM77 $
>77$ %

categories77& 0
=771 2
new773 6
List777 ;
<77; <
MenuIndexCategoryVM77< O
>77O P
(77P Q
)77Q R
;77R S
foreach99 
(99 
var99 
type99 
in99  
types99! &
)99& '
{:: 

categories;; 
.;; 
Add;; 
(;; 
new;; "
MenuIndexCategoryVM;;# 6
{<< 
Category== 
=== 
type== #
,==# $
	MenuItems>> 
=>> 

restaurant>>  *
.>>* +
	MenuItems>>+ 4
.>>4 5
Where>>5 :
(>>: ;
m>>; <
=>>>= ?
m>>@ A
.>>A B
Types>>B G
.>>G H
Where>>H M
(>>M N
t>>N O
=>>>P R
t>>S T
.>>T U
Id>>U W
==>>X Z
type>>[ _
.>>_ `
Id>>` b
)>>b c
.>>c d
Any>>d g
(>>g h
)>>h i
)>>i j
.>>j k
Select>>k q
(>>q r
m>>r s
=>>>t v
new>>w z
MenuItemViewVM	>>{ ‰
{?? 
Id@@ 
=@@ 
m@@ 
.@@ 
Id@@ !
,@@! "
NameAA 
=AA 
mAA  
.AA  !
NameAA! %
,AA% &
DescriptionBB #
=BB$ %
mBB& '
.BB' (
DescriptionBB( 3
??BB4 6
$strBB7 G
,BBG H
PriceCC 
=CC 
mCC  !
.CC! "
PriceCC" '
,CC' (
ImageIdDD 
=DD  !
mDD" #
.DD# $
ImageIdDD$ +
,DD+ ,
	DietInfoSEE !
=EE" #
mEE$ %
.EE% &
DietInfoEE& .
.EE. /
AnyEE/ 2
(EE2 3
)EE3 4
?EE5 6
StringEE7 =
.EE= >
JoinEE> B
(EEB C
$strEEC G
,EEG H
mEEI J
.EEJ K
DietInfoEEK S
.EES T
SelectEET Z
(EEZ [
dEE[ \
=>EE] _
dEE` a
.EEa b
NameEEb f
)EEf g
)EEg h
:EEi j
$strEEk p
,EEp q
TypesSFF 
=FF  
mFF! "
.FF" #
TypesFF# (
.FF( )
AnyFF) ,
(FF, -
)FF- .
?FF/ 0
StringFF1 7
.FF7 8
JoinFF8 <
(FF< =
$strFF= A
,FFA B
mFFC D
.FFD E
TypesFFE J
.FFJ K
SelectFFK Q
(FFQ R
tFFR S
=>FFT V
tFFW X
.FFX Y
NameFFY ]
)FF] ^
)FF^ _
:FF` a
$strFFb g
}GG 
)GG 
}HH 
)HH 
;HH 
}II 
returnKK 
ViewKK 
(KK 
newKK 
RestaurantDetailsVMKK /
{LL 
IdMM 
=MM 

restaurantMM 
.MM  
IdMM  "
,MM" #
	CompanyIdNN 
=NN 

restaurantNN &
.NN& '
	CompanyIdNN' 0
,NN0 1
NameOO 
=OO 

restaurantOO !
.OO! "
NameOO" &
,OO& '
PhoneNoPP 
=PP 

restaurantPP $
.PP$ %
PhoneNoPP% ,
,PP, -
AddressStreetQQ 
=QQ 

restaurantQQ  *
.QQ* +
AddressStreetQQ+ 8
,QQ8 9
AddressTownRR 
=RR 

restaurantRR (
.RR( )
AddressTownRR) 4
,RR4 5
AddressCountySS 
=SS 

restaurantSS  *
.SS* +
AddressCountySS+ 8
,SS8 9
AddressPostalCodeTT !
=TT" #

restaurantTT$ .
.TT. /
AddressPostalCodeTT/ @
,TT@ A
	MenuItemsUU 
=UU 

categoriesUU &
.UU& '
AsEnumerableUU' 3
(UU3 4
)UU4 5
,UU5 6

TableCountVV 
=VV 

restaurantVV '
.VV' (
TablesVV( .
.VV. /
CountVV/ 4
(VV4 5
)VV5 6
,VV6 7
ImageIdsWW 
=WW 

restaurantWW %
.WW% &
ImageIdsWW& .
}XX 
)XX 
;XX 
}YY 	
public[[ 
async[[ 
Task[[ 
<[[ 
ActionResult[[ &
>[[& '
ImageFromId[[( 3
([[3 4
int[[4 7
id[[8 :
)[[: ;
{\\ 	
Image]] 
i]] 
=]] 
_imageFacade]] "
.]]" #
	LoadImage]]# ,
(]], -
id]]- /
)]]/ 0
;]]0 1
return__ 
File__ 
(__ 
i__ 
.__ 
FileContent__ %
,__% &
i__' (
.__( )
Type__) -
)__- .
;__. /
}`` 	
}aa 
}bb ¥y
zC:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\Facades\AuthFacade.cs
	namespace 	
BookingSystemApp
 
. 
Facades "
{ 
public 

class 

AuthFacade 
{ 
	protected 
readonly 

HttpClient %
_client& -
;- .
	protected "
JsonSerializerSettings (
_serializerSettings) <
;< =
	protected 
readonly 
string !
_baseUrl" *
=+ ,
$str- \
;\ ]
public"" 

AuthFacade"" 
("" 
)"" 
{## 	
_client$$ 
=$$ 
new$$ 

HttpClient$$ $
($$$ %
)$$% &
;$$& '
_client%% 
.%% !
DefaultRequestHeaders%% )
.%%) *
Accept%%* 0
.%%0 1
Add%%1 4
(%%4 5
new%%5 8+
MediaTypeWithQualityHeaderValue%%9 X
(%%X Y
$str%%Y k
)%%k l
)%%l m
;%%m n
_serializerSettings&& 
=&&  !
new&&" %"
JsonSerializerSettings&&& <
{&&= >
NullValueHandling&&? P
=&&Q R
NullValueHandling&&S d
.&&d e
Ignore&&e k
,&&k l"
MissingMemberHandling	&&m ‚
=
&&ƒ „#
MissingMemberHandling
&&… 
.
&& ›
Ignore
&&› ΅
}
&&Ά £
;
&&£ ¤
}'' 	
public-- 

AuthFacade-- 
(-- 

HttpClient-- $
client--% +
)--+ ,
{.. 	
_client// 
=// 
client// 
;// 
_serializerSettings00 
=00  !
new00" %"
JsonSerializerSettings00& <
{00= >
NullValueHandling00? P
=00Q R
NullValueHandling00S d
.00d e
Ignore00e k
,00k l"
MissingMemberHandling	00m ‚
=
00ƒ „#
MissingMemberHandling
00… 
.
00 ›
Ignore
00› ΅
}
00Ά £
;
00£ ¤
}11 	
public33 
void33 
GetToken33 
(33 
string33 #
username33$ ,
,33, -
string33. 4
password335 =
)33= >
{44 	
try55 
{66 
var77 

dictionary77 
=77  
new77! $

Dictionary77% /
<77/ 0
string770 6
,776 7
string778 >
>77> ?
{88 
{99 
$str99 "
,99" #
$str99$ .
}99/ 0
,990 1
{:: 
$str::  
,::  !
username::" *
}::+ ,
,::, -
{;; 
$str;;  
,;;  !
password;;" *
};;+ ,
}<< 
;<< 
HttpRequestMessage>> "
request>># *
=>>+ ,
new>>- 0
HttpRequestMessage>>1 C
{?? 
Method@@ 
=@@ 

HttpMethod@@ '
.@@' (
Post@@( ,
,@@, -

RequestUriAA 
=AA  
newAA! $
UriAA% (
(AA( )
_baseUrlAA) 1
+AA2 3
$strAA4 ;
)AA; <
,AA< =
ContentBB 
=BB 
newBB !!
FormUrlEncodedContentBB" 7
(BB7 8

dictionaryBB8 B
)BBB C
}CC 
;CC 
varEE 
resEE 
=EE 
_clientEE !
.EE! "
	SendAsyncEE" +
(EE+ ,
requestEE, 3
)EE3 4
.EE4 5
ResultEE5 ;
;EE; <
resGG 
.GG #
EnsureSuccessStatusCodeGG +
(GG+ ,
)GG, -
;GG- .
stringII 
contentII 
=II  
resII! $
.II$ %
ContentII% ,
.II, -
ReadAsStringAsyncII- >
(II> ?
)II? @
.II@ A
ResultIIA G
;IIG H
varJJ 
modelJJ 
=JJ 
JsonConvertJJ '
.JJ' (
DeserializeObjectJJ( 9
<JJ9 :

DictionaryJJ: D
<JJD E
stringJJE K
,JJK L
stringJJM S
>JJS T
>JJT U
(JJU V
contentJJV ]
,JJ] ^
_serializerSettingsJJ_ r
)JJr s
;JJs t
GenericFacadeLL 
.LL 
TokenLL #
=LL$ %
modelLL& +
[LL+ ,
$strLL, :
]LL: ;
;LL; <
requestNN 
=NN 
newNN 
HttpRequestMessageNN 0
{OO 
MethodPP 
=PP 

HttpMethodPP '
.PP' (
GetPP( +
,PP+ ,

RequestUriQQ 
=QQ  
newQQ! $
UriQQ% (
(QQ( )
_baseUrlQQ) 1
+QQ2 3
$strQQ4 J
)QQJ K
}RR 
;RR 
_clientSS 
.SS !
DefaultRequestHeadersSS -
.SS- .
AuthorizationSS. ;
=SS< =
newSS> A%
AuthenticationHeaderValueSSB [
(SS[ \
$strSS\ d
,SSd e
GenericFacadeSSf s
.SSs t
TokenSSt y
)SSy z
;SSz {
resUU 
=UU 
_clientUU 
.UU 
	SendAsyncUU '
(UU' (
requestUU( /
)UU/ 0
.UU0 1
ResultUU1 7
;UU7 8
contentWW 
=WW 
resWW 
.WW 
ContentWW %
.WW% &
ReadAsStringAsyncWW& 7
(WW7 8
)WW8 9
.WW9 :
ResultWW: @
;WW@ A
varYY 
rolesYY 
=YY 
JsonConvertYY '
.YY' (
DeserializeObjectYY( 9
<YY9 :
IListYY: ?
<YY? @
stringYY@ F
>YYF G
>YYG H
(YYH I
contentYYI P
,YYP Q
_serializerSettingsYYR e
)YYe f
;YYf g
GenericFacade[[ 
.[[ 
Roles[[ #
=[[$ %
roles[[& +
;[[+ ,
}\\ 
catch]] 
(]] 
	Exception]] 
ex]] 
)]]  
{^^ 
}`` 
}aa 	
publiccc 
stringcc 
	GetUserIdcc 
(cc  
)cc  !
{dd 	
tryee 
{ff 
usinggg 
(gg 

HttpClientgg !
_cgg" $
=gg% &
newgg' *

HttpClientgg+ 5
(gg5 6
)gg6 7
)gg7 8
{hh 
_cii 
.ii !
DefaultRequestHeadersii ,
.ii, -
Acceptii- 3
.ii3 4
Addii4 7
(ii7 8
newii8 ;+
MediaTypeWithQualityHeaderValueii< [
(ii[ \
$strii\ n
)iin o
)iio p
;iip q
_cjj 
.jj !
DefaultRequestHeadersjj ,
.jj, -
Authorizationjj- :
=jj; <
newjj= @%
AuthenticationHeaderValuejjA Z
(jjZ [
$strjj[ c
,jjc d
GenericFacadejje r
.jjr s
Tokenjjs x
)jjx y
;jjy z
HttpRequestMessagell &
requestll' .
=ll/ 0
newll1 4
HttpRequestMessagell5 G
{mm 
Methodnn 
=nn  

HttpMethodnn! +
.nn+ ,
Getnn, /
,nn/ 0

RequestUrioo "
=oo# $
newoo% (
Urioo) ,
(oo, -
_baseUrloo- 5
+oo6 7
$stroo8 N
)ooN O
}pp 
;pp 
varrr 
resrr 
=rr 
_crr  
.rr  !
	SendAsyncrr! *
(rr* +
requestrr+ 2
)rr2 3
.rr3 4
Resultrr4 :
;rr: ;
restt 
.tt #
EnsureSuccessStatusCodett /
(tt/ 0
)tt0 1
;tt1 2
stringvv 
contentvv "
=vv# $
resvv% (
.vv( )
Contentvv) 0
.vv0 1
ReadAsStringAsyncvv1 B
(vvB C
)vvC D
.vvD E
ResultvvE K
;vvK L
varww 
modelww 
=ww 
JsonConvertww  +
.ww+ ,
DeserializeObjectww, =
<ww= >

Dictionaryww> H
<wwH I
stringwwI O
,wwO P
stringwwQ W
>wwW X
>wwX Y
(wwY Z
contentwwZ a
,wwa b
_serializerSettingswwc v
)wwv w
;www x
returnyy 
modelyy  
[yy  !
$stryy! )
]yy) *
;yy* +
}zz 
}{{ 
catch|| 
(|| 
	Exception|| 
ex|| 
)||  
{}} 
return~~ 
$str~~ 
;~~ 
} 
}
€€ 	
public
‚‚ 
void
‚‚ 
AddCustomerRole
‚‚ #
(
‚‚# $
)
‚‚$ %
{
ƒƒ 	
try
„„ 
{
…… 
using
†† 
(
†† 

HttpClient
†† !
_c
††" $
=
††% &
new
††' *

HttpClient
††+ 5
(
††5 6
)
††6 7
)
††7 8
{
‡‡ 
_c
 
.
 #
DefaultRequestHeaders
 ,
.
, -
Accept
- 3
.
3 4
Add
4 7
(
7 8
new
8 ;-
MediaTypeWithQualityHeaderValue
< [
(
[ \
$str
\ n
)
n o
)
o p
;
p q
_c
‰‰ 
.
‰‰ #
DefaultRequestHeaders
‰‰ ,
.
‰‰, -
Authorization
‰‰- :
=
‰‰; <
new
‰‰= @'
AuthenticationHeaderValue
‰‰A Z
(
‰‰Z [
$str
‰‰[ c
,
‰‰c d
GenericFacade
‰‰e r
.
‰‰r s
Token
‰‰s x
)
‰‰x y
;
‰‰y z 
HttpRequestMessage
‹‹ &
request
‹‹' .
=
‹‹/ 0
new
‹‹1 4 
HttpRequestMessage
‹‹5 G
{
 
Method
 
=
  

HttpMethod
! +
.
+ ,
Post
, 0
,
0 1

RequestUri
 "
=
# $
new
% (
Uri
) ,
(
, -
_baseUrl
- 5
+
6 7
$str
8 U
)
U V
}
 
;
 
var
‘‘ 
res
‘‘ 
=
‘‘ 
_c
‘‘  
.
‘‘  !
	SendAsync
‘‘! *
(
‘‘* +
request
‘‘+ 2
)
‘‘2 3
.
‘‘3 4
Result
‘‘4 :
;
‘‘: ;
res
““ 
.
““ %
EnsureSuccessStatusCode
““ /
(
““/ 0
)
““0 1
;
““1 2
}
”” 
}
•• 
catch
–– 
(
–– 
	Exception
–– 
ex
–– 
)
––  
{
—— 
}
 
}
™™ 	
public
 
bool
 
Register
 
(
 
string
 #
username
$ ,
,
, -
string
. 4
password
5 =
,
= >
string
? E
confirmPassword
F U
)
U V
{
 	
try
 
{
 
var
   

dictionary
   
=
    
new
  ! $

Dictionary
  % /
<
  / 0
string
  0 6
,
  6 7
string
  8 >
>
  > ?
{
΅΅ 
{
ΆΆ 
$str
ΆΆ  
,
ΆΆ  !
username
ΆΆ" *
}
ΆΆ+ ,
,
ΆΆ, -
{
££ 
$str
££  
,
££  !
password
££" *
}
££+ ,
,
££, -
{
¤¤ 
$str
¤¤ '
,
¤¤' (
confirmPassword
¤¤) 8
}
¤¤9 :
}
¥¥ 
;
¥¥  
HttpRequestMessage
§§ "
request
§§# *
=
§§+ ,
new
§§- 0 
HttpRequestMessage
§§1 C
{
¨¨ 
Method
©© 
=
©© 

HttpMethod
©© '
.
©©' (
Post
©©( ,
,
©©, -

RequestUri
 
=
  
new
! $
Uri
% (
(
( )
_baseUrl
) 1
+
2 3
$str
4 J
)
J K
,
K L
Content
«« 
=
«« 
new
«« !
StringContent
««" /
(
««/ 0
JsonConvert
««0 ;
.
««; <
SerializeObject
««< K
(
««K L

dictionary
««L V
)
««V W
,
««W X
Encoding
««Y a
.
««a b
UTF8
««b f
,
««f g
$str
««h z
)
««z {
}
¬¬ 
;
¬¬ 
var
®® 
res
®® 
=
®® 
_client
®® !
.
®®! "
	SendAsync
®®" +
(
®®+ ,
request
®®, 3
)
®®3 4
.
®®4 5
Result
®®5 ;
;
®®; <
res
°° 
.
°° %
EnsureSuccessStatusCode
°° +
(
°°+ ,
)
°°, -
;
°°- .
return
²² 
true
²² 
;
²² 
}
³³ 
catch
΄΄ 
(
΄΄ 
	Exception
΄΄ 
ex
΄΄ 
)
΄΄  
{
µµ 
return
¶¶ 
false
¶¶ 
;
¶¶ 
}
·· 
}
ΈΈ 	
public
ΊΊ 
IEnumerable
ΊΊ 
<
ΊΊ 
string
ΊΊ !
>
ΊΊ! "
GetRoles
ΊΊ# +
(
ΊΊ+ ,
)
ΊΊ, -
{
»» 	
try
ΌΌ 
{
½½  
HttpRequestMessage
ΎΎ "
request
ΎΎ# *
=
ΎΎ+ ,
new
ΎΎ- 0 
HttpRequestMessage
ΎΎ1 C
{
ΏΏ 
Method
ΐΐ 
=
ΐΐ 

HttpMethod
ΐΐ '
.
ΐΐ' (
Get
ΐΐ( +
,
ΐΐ+ ,

RequestUri
ΑΑ 
=
ΑΑ  
new
ΑΑ! $
Uri
ΑΑ% (
(
ΑΑ( )
_baseUrl
ΑΑ) 1
+
ΑΑ2 3
$str
ΑΑ4 ;
)
ΑΑ; <
}
ΒΒ 
;
ΒΒ 
var
ΔΔ 
res
ΔΔ 
=
ΔΔ 
_client
ΔΔ !
.
ΔΔ! "
	SendAsync
ΔΔ" +
(
ΔΔ+ ,
request
ΔΔ, 3
)
ΔΔ3 4
.
ΔΔ4 5
Result
ΔΔ5 ;
;
ΔΔ; <
res
ΖΖ 
.
ΖΖ %
EnsureSuccessStatusCode
ΖΖ +
(
ΖΖ+ ,
)
ΖΖ, -
;
ΖΖ- .
string
ΘΘ 
content
ΘΘ 
=
ΘΘ  
res
ΘΘ! $
.
ΘΘ$ %
Content
ΘΘ% ,
.
ΘΘ, -
ReadAsStringAsync
ΘΘ- >
(
ΘΘ> ?
)
ΘΘ? @
.
ΘΘ@ A
Result
ΘΘA G
;
ΘΘG H
return
ΙΙ 
JsonConvert
ΙΙ "
.
ΙΙ" #
DeserializeObject
ΙΙ# 4
<
ΙΙ4 5
List
ΙΙ5 9
<
ΙΙ9 :
string
ΙΙ: @
>
ΙΙ@ A
>
ΙΙA B
(
ΙΙB C
content
ΙΙC J
,
ΙΙJ K!
_serializerSettings
ΙΙL _
)
ΙΙ_ `
.
ΙΙ` a
AsEnumerable
ΙΙa m
(
ΙΙm n
)
ΙΙn o
;
ΙΙo p
}
ΚΚ 
catch
ΛΛ 
(
ΛΛ 
	Exception
ΛΛ 
ex
ΛΛ 
)
ΛΛ  
{
ΜΜ 
return
ΝΝ 

Enumerable
ΝΝ !
.
ΝΝ! "
Empty
ΝΝ" '
<
ΝΝ' (
string
ΝΝ( .
>
ΝΝ. /
(
ΝΝ/ 0
)
ΝΝ0 1
;
ΝΝ1 2
}
ΞΞ 
}
ΟΟ 	
}
ΠΠ 
}ΡΡ ΫL
}C:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\Facades\BookingFacade.cs
	namespace 	
BookingSystemApp
 
. 
Facades "
{ 
public 

class 
BookingFacade 
:  
GenericFacade! .
{ 
public 
BookingFacade 
( 
) 
:  
base! %
(% &
$str& 0
)0 1
{ 	
} 	
public 
IEnumerable 
< 
Booking "
>" #
Get$ '
(' (
)( )
{ 	
try 
{ 
HttpRequestMessage "
request# *
=+ ,
new- 0
HttpRequestMessage1 C
{ 
Method   
=   

HttpMethod   '
.  ' (
Get  ( +
,  + ,

RequestUri!! 
=!!  
new!!! $
Uri!!% (
(!!( )
_baseUrl!!) 1
+!!2 3
$str!!4 9
)!!9 :
}"" 
;"" 
IEnumerable$$ 
<$$ 
Booking$$ #
>$$# $
res$$% (
=$$) *
ExecuteRequestList$$+ =
<$$= >
Booking$$> E
>$$E F
($$F G
request$$G N
)$$N O
;$$O P
return&& 
res&& 
.&& 
Any&& 
(&& 
)&&  
?'' 
res'' 
:(( 

Enumerable((  
.((  !
Empty((! &
<((& '
Booking((' .
>((. /
(((/ 0
)((0 1
;((1 2
})) 
catch** 
(** 
	Exception** 
ex** 
)**  
{++ 
return,, 

Enumerable,, !
.,,! "
Empty,," '
<,,' (
Booking,,( /
>,,/ 0
(,,0 1
),,1 2
;,,2 3
}-- 
}.. 	
public55 
Booking55 
FindById55 
(55  
int55  #
id55$ &
)55& '
{66 	
try77 
{88 
HttpRequestMessage99 "
request99# *
=99+ ,
new99- 0
HttpRequestMessage991 C
{:: 
Method;; 
=;; 

HttpMethod;; '
.;;' (
Get;;( +
,;;+ ,

RequestUri<< 
=<<  
new<<! $
Uri<<% (
(<<( )
_baseUrl<<) 1
+<<2 3
$str<<4 :
+<<; <
id<<= ?
)<<? @
}== 
;== 
return?? 
ExecuteRequest?? %
<??% &
Booking??& -
>??- .
(??. /
request??/ 6
)??6 7
;??7 8
}@@ 
catchAA 
(AA 
	ExceptionAA 
exAA 
)AA  
{BB 
returnCC 
nullCC 
;CC 
}DD 
}EE 	
publicLL 
IEnumerableLL 
<LL 
BookingLL "
>LL" #
FindByCustomerIdLL$ 4
(LL4 5
intLL5 8
idLL9 ;
)LL; <
{MM 	
tryNN 
{OO 
HttpRequestMessagePP "
requestPP# *
=PP+ ,
newPP- 0
HttpRequestMessagePP1 C
{QQ 
MethodRR 
=RR 

HttpMethodRR '
.RR' (
GetRR( +
,RR+ ,

RequestUriSS 
=SS  
newSS! $
UriSS% (
(SS( )
_baseUrlSS) 1
+SS2 3
$strSS4 D
+SSE F
idSSG I
)SSI J
}TT 
;TT 
IEnumerableVV 
<VV 
BookingVV #
>VV# $
resVV% (
=VV) *
ExecuteRequestListVV+ =
<VV= >
BookingVV> E
>VVE F
(VVF G
requestVVG N
)VVN O
;VVO P
returnXX 
resXX 
.XX 
AnyXX 
(XX 
)XX  
?YY 
resYY 
:ZZ 

EnumerableZZ  
.ZZ  !
EmptyZZ! &
<ZZ& '
BookingZZ' .
>ZZ. /
(ZZ/ 0
)ZZ0 1
;ZZ1 2
}[[ 
catch\\ 
(\\ 
	Exception\\ 
ex\\ 
)\\  
{]] 
return^^ 

Enumerable^^ !
.^^! "
Empty^^" '
<^^' (
Booking^^( /
>^^/ 0
(^^0 1
)^^1 2
;^^2 3
}__ 
}`` 	
publicgg 
Tablegg 
GetAvailableTablegg &
(gg& '
Bookinggg' .
modelgg/ 4
)gg4 5
{hh 	
tryii 
{jj 
HttpRequestMessagekk "
requestkk# *
=kk+ ,
newkk- 0
HttpRequestMessagekk1 C
{ll 
Methodmm 
=mm 

HttpMethodmm '
.mm' (
Postmm( ,
,mm, -

RequestUrinn 
=nn  
newnn! $
Urinn% (
(nn( )
_baseUrlnn) 1
+nn2 3
$strnn4 G
)nnG H
,nnH I
Contentoo 
=oo 
newoo !
StringContentoo" /
(oo/ 0
JsonConvertoo0 ;
.oo; <
SerializeObjectoo< K
(ooK L
modelooL Q
)ooQ R
,ooR S
EncodingooT \
.oo\ ]
UTF8oo] a
,ooa b
$strooc u
)oou v
}pp 
;pp 
returnrr 
ExecuteRequestrr %
<rr% &
Tablerr& +
>rr+ ,
(rr, -
requestrr- 4
)rr4 5
;rr5 6
}ss 
catchtt 
(tt 
	Exceptiontt 
extt 
)tt  
{uu 
returnvv 
nullvv 
;vv 
}ww 
}xx 	
public 
Booking 
Create 
( 
Booking %
model& +
)+ ,
{
€€ 	
try
 
{
‚‚  
HttpRequestMessage
ƒƒ "
request
ƒƒ# *
=
ƒƒ+ ,
new
ƒƒ- 0 
HttpRequestMessage
ƒƒ1 C
{
„„ 
Method
…… 
=
…… 

HttpMethod
…… '
.
……' (
Post
……( ,
,
……, -

RequestUri
†† 
=
††  
new
††! $
Uri
††% (
(
††( )
_baseUrl
††) 1
+
††2 3
$str
††4 :
)
††: ;
,
††; <
Content
‡‡ 
=
‡‡ 
new
‡‡ !
StringContent
‡‡" /
(
‡‡/ 0
JsonConvert
‡‡0 ;
.
‡‡; <
SerializeObject
‡‡< K
(
‡‡K L
model
‡‡L Q
)
‡‡Q R
,
‡‡R S
Encoding
‡‡T \
.
‡‡\ ]
UTF8
‡‡] a
,
‡‡a b
$str
‡‡c u
)
‡‡u v
}
 
;
 
return
 
ExecuteRequest
 %
<
% &
Booking
& -
>
- .
(
. /
request
/ 6
)
6 7
;
7 8
}
‹‹ 
catch
 
(
 
	Exception
 
ex
 
)
  
{
 
return
 
null
 
;
 
}
 
}
 	
public
—— 
Booking
—— 
Update
—— 
(
—— 
Booking
—— %
model
——& +
)
——+ ,
{
 	
try
™™ 
{
  
HttpRequestMessage
›› "
request
››# *
=
››+ ,
new
››- 0 
HttpRequestMessage
››1 C
{
 
Method
 
=
 

HttpMethod
 '
.
' (
Put
( +
,
+ ,

RequestUri
 
=
  
new
! $
Uri
% (
(
( )
_baseUrl
) 1
+
2 3
$str
4 =
+
> ?
model
@ E
.
E F
Id
F H
)
H I
,
I J
Content
 
=
 
new
 !
StringContent
" /
(
/ 0
JsonConvert
0 ;
.
; <
SerializeObject
< K
(
K L
model
L Q
)
Q R
,
R S
Encoding
T \
.
\ ]
UTF8
] a
,
a b
$str
c u
)
u v
}
   
;
   
return
ΆΆ 
ExecuteRequest
ΆΆ %
<
ΆΆ% &
Booking
ΆΆ& -
>
ΆΆ- .
(
ΆΆ. /
request
ΆΆ/ 6
)
ΆΆ6 7
;
ΆΆ7 8
}
££ 
catch
¤¤ 
(
¤¤ 
	Exception
¤¤ 
ex
¤¤ 
)
¤¤  
{
¥¥ 
return
¦¦ 
null
¦¦ 
;
¦¦ 
}
§§ 
}
¨¨ 	
public
―― 
bool
―― 
Delete
―― 
(
―― 
int
―― 
id
―― !
)
――! "
{
°° 	
return
±± 
ExecuteRemove
±±  
(
±±  !
new
±±! $
Uri
±±% (
(
±±( )
_baseUrl
±±) 1
+
±±2 3
$str
±±4 =
+
±±> ?
id
±±@ B
)
±±B C
)
±±C D
;
±±D E
}
²² 	
public
ΉΉ 
bool
ΉΉ 
Cancel
ΉΉ 
(
ΉΉ 
int
ΉΉ 
id
ΉΉ !
)
ΉΉ! "
{
ΊΊ 	
return
»» 
ExecuteRemove
»»  
(
»»  !
new
»»! $
Uri
»»% (
(
»»( )
_baseUrl
»») 1
+
»»2 3
$str
»»4 =
+
»»> ?
id
»»@ B
)
»»B C
)
»»C D
;
»»D E
}
ΌΌ 	
}
½½ 
}ΎΎ Μ
}C:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\Facades\CompanyFacade.cs
	namespace		 	
BookingSystemApp		
 
.		 
Facades		 "
{

 
public 

class 
CompanyFacade 
:  
GenericFacade! .
{ 
public 
CompanyFacade 
( 
) 
:  
base! %
(% &
$str& 0
)0 1
{ 	
} 	
public 
Company 
Get 
( 
) 
{ 	
try 
{ 
HttpRequestMessage "
request# *
=+ ,
new- 0
HttpRequestMessage1 C
{ 
Method 
= 

HttpMethod '
.' (
Get( +
,+ ,

RequestUri 
=  
new! $
Uri% (
(( )
_baseUrl) 1
+2 3
$str4 9
)9 :
}   
;   
Company"" 
res"" 
="" 
ExecuteRequest"" ,
<"", -
Company""- 4
>""4 5
(""5 6
request""6 =
)""= >
;""> ?
return$$ 
res$$ 
??$$ 
null$$ "
;$$" #
}%% 
catch&& 
(&& 
	Exception&& 
ex&& 
)&&  
{'' 
return(( 
null(( 
;(( 
})) 
}** 	
}++ 
},, ―X
‚C:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\Facades\Core\GenericFacade.cs
	namespace

 	
BookingSystemApp


 
.

 
Facades

 "
.

" #
Core

# '
{ 
public 

class 
GenericFacade 
{ 
public 
static 
string 
Token "
{ 	
get 
{ 
HttpContext 
c 
= 
HttpContext  +
.+ ,
Current, 3
;3 4
return 
( 
string 
) 
c  !
.! "
Session" )
[) *
$str* 5
]5 6
;6 7
} 
set 
{ 
HttpContext 
c 
= 
HttpContext  +
.+ ,
Current, 3
;3 4
c 
. 
Session 
[ 
$str %
]% &
=' (
value) .
;. /
} 
} 	
public 
static 
bool 
IsAdmin "
{ 	
get 
{ 
HttpContext   
c   
=   
HttpContext    +
.  + ,
Current  , 3
;  3 4
if"" 
("" 
c"" 
."" 
Session"" 
["" 
$str"" +
]""+ ,
==""- /
null""0 4
)""4 5
return## 
false##  
;##  !
return%% 
(%% 
bool%% 
)%% 
c%% 
.%% 
Session%% &
[%%& '
$str%%' 4
]%%4 5
;%%5 6
}&& 
set'' 
{(( 
HttpContext)) 
c)) 
=)) 
HttpContext))  +
.))+ ,
Current)), 3
;))3 4
c** 
.** 
Session** 
[** 
$str** '
]**' (
=**) *
value**+ 0
;**0 1
}++ 
},, 	
public.. 
static.. 
IList.. 
<.. 
string.. "
>.." #
Roles..$ )
{// 	
get00 
{11 
HttpContext22 
c22 
=22 
HttpContext22  +
.22+ ,
Current22, 3
;223 4
return33 
c33 
.33 
Session33  
[33  !
$str33! ,
]33, -
as33. 0
IList331 6
<336 7
string337 =
>33= >
;33> ?
}44 
set55 
{66 
HttpContext77 
c77 
=77 
HttpContext77  +
.77+ ,
Current77, 3
;773 4
c88 
.88 
Session88 
[88 
$str88 %
]88% &
=88' (
value88) .
;88. /
}99 
}:: 	
public<< 
static<< 
string<< 
UserName<< %
{== 	
get>> 
{?? 
HttpContext@@ 
c@@ 
=@@ 
HttpContext@@  +
.@@+ ,
Current@@, 3
;@@3 4
returnAA 
(AA 
stringAA 
)AA 
cAA  !
.AA! "
SessionAA" )
[AA) *
$strAA* 8
]AA8 9
;AA9 :
}BB 
setCC 
{DD 
HttpContextEE 
cEE 
=EE 
HttpContextEE  +
.EE+ ,
CurrentEE, 3
;EE3 4
cFF 
.FF 
SessionFF 
[FF 
$strFF (
]FF( )
=FF* +
valueFF, 1
;FF1 2
}GG 
}HH 	
publicJJ 
staticJJ 
stringJJ 
OwinIdJJ #
{KK 	
getLL 
{MM 
HttpContextNN 
cNN 
=NN 
HttpContextNN  +
.NN+ ,
CurrentNN, 3
;NN3 4
returnOO 
(OO 
stringOO 
)OO 
cOO  !
.OO! "
SessionOO" )
[OO) *
$strOO* 6
]OO6 7
;OO7 8
}PP 
setQQ 
{RR 
HttpContextSS 
cSS 
=SS 
HttpContextSS  +
.SS+ ,
CurrentSS, 3
;SS3 4
cTT 
.TT 
SessionTT 
[TT 
$strTT &
]TT& '
=TT( )
valueTT* /
;TT/ 0
}UU 
}VV 	
	protected[[ 
readonly[[ 

HttpClient[[ %
_client[[& -
;[[- .
	protected`` "
JsonSerializerSettings`` (
_serializerSettings``) <
;``< =
	protectedee 
readonlyee 
stringee !
_baseUrlee" *
=ee+ ,
$stree- a
;eea b
publickk 
GenericFacadekk 
(kk 
stringkk #
apiControllerkk$ 1
)kk1 2
{ll 	
_clientmm 
=mm 
newmm 

HttpClientmm $
(mm$ %
)mm% &
;mm& '
_clientnn 
.nn !
DefaultRequestHeadersnn )
.nn) *
Authorizationnn* 7
=nn8 9
newnn: =%
AuthenticationHeaderValuenn> W
(nnW X
$strnnX `
,nn` a
Tokennnb g
)nng h
;nnh i
_clientoo 
.oo !
DefaultRequestHeadersoo )
.oo) *
Acceptoo* 0
.oo0 1
Addoo1 4
(oo4 5
newoo5 8+
MediaTypeWithQualityHeaderValueoo9 X
(ooX Y
$strooY k
)ook l
)ool m
;oom n
_serializerSettingspp 
=pp  !
newpp" %"
JsonSerializerSettingspp& <
{pp= >
NullValueHandlingpp? P
=ppQ R
NullValueHandlingppS d
.ppd e
Ignoreppe k
,ppk l"
MissingMemberHandling	ppm ‚
=
ppƒ „#
MissingMemberHandling
pp… 
.
pp ›
Ignore
pp› ΅
}
ppΆ £
;
pp£ ¤
_baseUrlqq 
+=qq 
apiControllerqq %
;qq% &
}rr 	
publicxx 
GenericFacadexx 
(xx 

HttpClientxx '
clientxx( .
)xx. /
{yy 	
_clientzz 
=zz 
clientzz 
;zz 
_serializerSettings{{ 
={{  !
new{{" %"
JsonSerializerSettings{{& <
{{{= >
NullValueHandling{{? P
={{Q R
NullValueHandling{{S d
.{{d e
Ignore{{e k
,{{k l"
MissingMemberHandling	{{m ‚
=
{{ƒ „#
MissingMemberHandling
{{… 
.
{{ ›
Ignore
{{› ΅
}
{{Ά £
;
{{£ ¤
}|| 	
	protected
„„ 
T
„„ 
ExecuteRequest
„„ "
<
„„" #
T
„„# $
>
„„$ %
(
„„% & 
HttpRequestMessage
„„& 8
request
„„9 @
)
„„@ A
{
…… 	
_client
†† 
.
†† #
DefaultRequestHeaders
†† )
.
††) *
Authorization
††* 7
=
††8 9
new
††: ='
AuthenticationHeaderValue
††> W
(
††W X
$str
††X `
,
††` a
Token
††b g
)
††g h
;
††h i!
HttpResponseMessage
‡‡ 
response
‡‡  (
=
‡‡) *
_client
‡‡+ 2
.
‡‡2 3
	SendAsync
‡‡3 <
(
‡‡< =
request
‡‡= D
)
‡‡D E
.
‡‡E F
Result
‡‡F L
;
‡‡L M
response
 
.
 %
EnsureSuccessStatusCode
 ,
(
, -
)
- .
;
. /
string
‰‰ 
content
‰‰ 
=
‰‰ 
response
‰‰ %
.
‰‰% &
Content
‰‰& -
.
‰‰- .
ReadAsStringAsync
‰‰. ?
(
‰‰? @
)
‰‰@ A
.
‰‰A B
Result
‰‰B H
;
‰‰H I
return
 
JsonConvert
 
.
 
DeserializeObject
 0
<
0 1
T
1 2
>
2 3
(
3 4
content
4 ;
,
; <!
_serializerSettings
= P
)
P Q
;
Q R
}
‹‹ 	
	protected
““ 
IEnumerable
““ 
<
““ 
T
““ 
>
““   
ExecuteRequestList
““! 3
<
““3 4
T
““4 5
>
““5 6
(
““6 7 
HttpRequestMessage
““7 I
request
““J Q
)
““Q R
{
”” 	
_client
•• 
.
•• #
DefaultRequestHeaders
•• )
.
••) *
Authorization
••* 7
=
••8 9
new
••: ='
AuthenticationHeaderValue
••> W
(
••W X
$str
••X `
,
••` a
Token
••b g
)
••g h
;
••h i!
HttpResponseMessage
–– 
response
––  (
=
––) *
_client
––+ 2
.
––2 3
	SendAsync
––3 <
(
––< =
request
––= D
)
––D E
.
––E F
Result
––F L
;
––L M
response
—— 
.
—— %
EnsureSuccessStatusCode
—— ,
(
——, -
)
——- .
;
——. /
string
 
content
 
=
 
response
 %
.
% &
Content
& -
.
- .
ReadAsStringAsync
. ?
(
? @
)
@ A
.
A B
Result
B H
;
H I
return
™™ 
JsonConvert
™™ 
.
™™ 
DeserializeObject
™™ 0
<
™™0 1
List
™™1 5
<
™™5 6
T
™™6 7
>
™™7 8
>
™™8 9
(
™™9 :
content
™™: A
,
™™A B!
_serializerSettings
™™C V
)
™™V W
;
™™W X
}
 	
	protected
΅΅ 
bool
΅΅ 
ExecuteRemove
΅΅ $
(
΅΅$ %
Uri
΅΅% (
uri
΅΅) ,
)
΅΅, -
{
ΆΆ 	
try
££ 
{
¤¤  
HttpRequestMessage
¥¥ "
request
¥¥# *
=
¥¥+ ,
new
¥¥- 0 
HttpRequestMessage
¥¥1 C
{
¦¦ 
Method
§§ 
=
§§ 

HttpMethod
§§ '
.
§§' (
Delete
§§( .
,
§§. /

RequestUri
¨¨ 
=
¨¨  
uri
¨¨! $
}
©© 
;
©© !
HttpResponseMessage
«« #
response
««$ ,
=
««- .
_client
««/ 6
.
««6 7
	SendAsync
««7 @
(
««@ A
request
««A H
)
««H I
.
««I J
Result
««J P
;
««P Q
response
¬¬ 
.
¬¬ %
EnsureSuccessStatusCode
¬¬ 0
(
¬¬0 1
)
¬¬1 2
;
¬¬2 3
return
®® 
true
®® 
;
®® 
}
―― 
catch
°° 
(
°° 
	Exception
°° 
ex
°° 
)
°°  
{
±± 
return
²² 
false
²² 
;
²² 
}
³³ 
}
΄΄ 	
}
µµ 
}¶¶ Τ+
~C:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\Facades\CustomerFacade.cs
	namespace 	
BookingSystemApp
 
. 
Facades "
{ 
public 

class 
CustomerFacade 
:  !
GenericFacade" /
{ 
public 
CustomerFacade 
( 
) 
:  !
base" &
(& '
$str' 2
)2 3
{ 	
} 	
public 
Customer 
Get 
( 
int 
id  "
)" #
{ 	
try 
{ 
HttpRequestMessage "
request# *
=+ ,
new- 0
HttpRequestMessage1 C
{   
Method!! 
=!! 

HttpMethod!! '
.!!' (
Get!!( +
,!!+ ,

RequestUri"" 
=""  
new""! $
Uri""% (
(""( )
_baseUrl"") 1
+""2 3
$str""4 :
+""; <
id""= ?
)""? @
}## 
;## 
return%% 
ExecuteRequest%% %
<%%% &
Customer%%& .
>%%. /
(%%/ 0
request%%0 7
)%%7 8
;%%8 9
}&& 
catch'' 
('' 
	Exception'' 
ex'' 
)''  
{(( 
return)) 
null)) 
;)) 
}** 
}++ 	
public11 
Customer11 
Get11 
(11 
)11 
{22 	
try33 
{44 
HttpRequestMessage55 "
request55# *
=55+ ,
new55- 0
HttpRequestMessage551 C
{66 
Method77 
=77 

HttpMethod77 '
.77' (
Get77( +
,77+ ,

RequestUri88 
=88  
new88! $
Uri88% (
(88( )
_baseUrl88) 1
+882 3
$str884 ?
)88? @
}99 
;99 
return;; 
ExecuteRequest;; %
<;;% &
Customer;;& .
>;;. /
(;;/ 0
request;;0 7
);;7 8
;;;8 9
}<< 
catch== 
(== 
	Exception== 
ex== 
)==  
{>> 
return?? 
null?? 
;?? 
}@@ 
}AA 	
publicHH 
CustomerHH 
CreateHH 
(HH 
CustomerHH '
modelHH( -
)HH- .
{II 	
tryJJ 
{KK 
HttpRequestMessageLL "
requestLL# *
=LL+ ,
newLL- 0
HttpRequestMessageLL1 C
{MM 
MethodNN 
=NN 

HttpMethodNN '
.NN' (
PostNN( ,
,NN, -

RequestUriOO 
=OO  
newOO! $
UriOO% (
(OO( )
_baseUrlOO) 1
+OO2 3
$strOO4 :
)OO: ;
,OO; <
ContentPP 
=PP 
newPP !
StringContentPP" /
(PP/ 0
JsonConvertPP0 ;
.PP; <
SerializeObjectPP< K
(PPK L
modelPPL Q
)PPQ R
,PPR S
EncodingPPT \
.PP\ ]
UTF8PP] a
,PPa b
$strPPc u
)PPu v
}QQ 
;QQ 
returnSS 
ExecuteRequestSS %
<SS% &
CustomerSS& .
>SS. /
(SS/ 0
requestSS0 7
)SS7 8
;SS8 9
}TT 
catchUU 
(UU 
	ExceptionUU 
exUU 
)UU  
{VV 
returnWW 
nullWW 
;WW 
}XX 
}YY 	
public`` 
Customer`` 
Update`` 
(`` 
Customer`` '
model``( -
)``- .
{aa 	
trybb 
{cc 
HttpRequestMessagedd "
requestdd# *
=dd+ ,
newdd- 0
HttpRequestMessagedd1 C
{ee 
Methodff 
=ff 

HttpMethodff '
.ff' (
Putff( +
,ff+ ,

RequestUrigg 
=gg  
newgg! $
Urigg% (
(gg( )
_baseUrlgg) 1
+gg2 3
$strgg4 =
+gg> ?
modelgg@ E
.ggE F
IdggF H
)ggH I
,ggI J
Contenthh 
=hh 
newhh !
StringContenthh" /
(hh/ 0
JsonConverthh0 ;
.hh; <
SerializeObjecthh< K
(hhK L
modelhhL Q
)hhQ R
,hhR S
EncodinghhT \
.hh\ ]
UTF8hh] a
,hha b
$strhhc u
)hhu v
}ii 
;ii 
returnkk 
ExecuteRequestkk %
<kk% &
Customerkk& .
>kk. /
(kk/ 0
requestkk0 7
)kk7 8
;kk8 9
}ll 
catchmm 
(mm 
	Exceptionmm 
exmm 
)mm  
{nn 
returnoo 
nulloo 
;oo 
}pp 
}qq 	
publicxx 
boolxx 
Deletexx 
(xx 
intxx 
idxx !
)xx! "
{yy 	
returnzz 
ExecuteRemovezz  
(zz  !
newzz! $
Urizz% (
(zz( )
_baseUrlzz) 1
+zz2 3
$strzz4 =
+zz> ?
idzz@ B
)zzB C
)zzC D
;zzD E
}{{ 	
}|| 
}}} Χ/
~C:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\Facades\DietInfoFacade.cs
	namespace 	
BookingSystemApp
 
. 
Facades "
{ 
public 

class 
DietInfoFacade 
:  !
GenericFacade" /
{ 
public 
DietInfoFacade 
( 
) 
:  !
base" &
(& '
$str' 2
)2 3
{ 	
} 	
public 
IEnumerable 
< 
DietInfo #
># $
Get% (
(( )
)) *
{ 	
try 
{ 
HttpRequestMessage "
request# *
=+ ,
new- 0
HttpRequestMessage1 C
{ 
Method   
=   

HttpMethod   '
.  ' (
Get  ( +
,  + ,

RequestUri!! 
=!!  
new!!! $
Uri!!% (
(!!( )
_baseUrl!!) 1
+!!2 3
$str!!4 9
)!!9 :
}"" 
;"" 
IEnumerable$$ 
<$$ 
DietInfo$$ $
>$$$ %
res$$& )
=$$* +
ExecuteRequestList$$, >
<$$> ?
DietInfo$$? G
>$$G H
($$H I
request$$I P
)$$P Q
;$$Q R
return&& 
res&& 
.&& 
Any&& 
(&& 
)&&  
?'' 
res'' 
:(( 

Enumerable((  
.((  !
Empty((! &
<((& '
DietInfo((' /
>((/ 0
(((0 1
)((1 2
;((2 3
})) 
catch** 
(** 
	Exception** 
ex** 
)**  
{++ 
return,, 

Enumerable,, !
.,,! "
Empty,," '
<,,' (
DietInfo,,( 0
>,,0 1
(,,1 2
),,2 3
;,,3 4
}-- 
}.. 	
public55 
DietInfo55 
FindById55  
(55  !
int55! $
id55% '
)55' (
{66 	
try77 
{88 
HttpRequestMessage99 "
request99# *
=99+ ,
new99- 0
HttpRequestMessage991 C
{:: 
Method;; 
=;; 

HttpMethod;; '
.;;' (
Get;;( +
,;;+ ,

RequestUri<< 
=<<  
new<<! $
Uri<<% (
(<<( )
_baseUrl<<) 1
+<<2 3
$str<<4 :
+<<; <
id<<= ?
)<<? @
}== 
;== 
return?? 
ExecuteRequest?? %
<??% &
DietInfo??& .
>??. /
(??/ 0
request??0 7
)??7 8
;??8 9
}@@ 
catchAA 
(AA 
	ExceptionAA 
exAA 
)AA  
{BB 
returnCC 
nullCC 
;CC 
}DD 
}EE 	
publicLL 
DietInfoLL 
CreateLL 
(LL 
DietInfoLL '
modelLL( -
)LL- .
{MM 	
tryNN 
{OO 
HttpRequestMessagePP "
requestPP# *
=PP+ ,
newPP- 0
HttpRequestMessagePP1 C
{QQ 
MethodRR 
=RR 

HttpMethodRR '
.RR' (
PostRR( ,
,RR, -

RequestUriSS 
=SS  
newSS! $
UriSS% (
(SS( )
_baseUrlSS) 1
+SS2 3
$strSS4 :
)SS: ;
,SS; <
ContentTT 
=TT 
newTT !
StringContentTT" /
(TT/ 0
JsonConvertTT0 ;
.TT; <
SerializeObjectTT< K
(TTK L
modelTTL Q
)TTQ R
,TTR S
EncodingTTT \
.TT\ ]
UTF8TT] a
,TTa b
$strTTc u
)TTu v
}UU 
;UU 
returnWW 
ExecuteRequestWW %
<WW% &
DietInfoWW& .
>WW. /
(WW/ 0
requestWW0 7
)WW7 8
;WW8 9
}XX 
catchYY 
(YY 
	ExceptionYY 
exYY 
)YY  
{ZZ 
return[[ 
null[[ 
;[[ 
}\\ 
}]] 	
publicdd 
DietInfodd 
Updatedd 
(dd 
DietInfodd '
modeldd( -
)dd- .
{ee 	
tryff 
{gg 
HttpRequestMessagehh "
requesthh# *
=hh+ ,
newhh- 0
HttpRequestMessagehh1 C
{ii 
Methodjj 
=jj 

HttpMethodjj '
.jj' (
Putjj( +
,jj+ ,

RequestUrikk 
=kk  
newkk! $
Urikk% (
(kk( )
_baseUrlkk) 1
+kk2 3
$strkk4 <
)kk< =
,kk= >
Contentll 
=ll 
newll !
StringContentll" /
(ll/ 0
JsonConvertll0 ;
.ll; <
SerializeObjectll< K
(llK L
modelllL Q
)llQ R
,llR S
EncodingllT \
.ll\ ]
UTF8ll] a
,lla b
$strllc u
)llu v
}mm 
;mm 
returnoo 
ExecuteRequestoo %
<oo% &
DietInfooo& .
>oo. /
(oo/ 0
requestoo0 7
)oo7 8
;oo8 9
}pp 
catchqq 
(qq 
	Exceptionqq 
exqq 
)qq  
{rr 
returnss 
nullss 
;ss 
}tt 
}uu 	
public|| 
bool|| 
Delete|| 
(|| 
int|| 
id|| !
)||! "
{}} 	
return~~ 
ExecuteRemove~~  
(~~  !
new~~! $
Uri~~% (
(~~( )
_baseUrl~~) 1
+~~2 3
$str~~4 =
+~~> ?
id~~@ B
)~~B C
)~~C D
;~~D E
} 	
}
€€ 
} C
{C:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\Facades\ImageFacade.cs
	namespace 	
BookingSystemApp
 
. 
Facades "
{ 
public 

class 
ImageFacade 
: 
GenericFacade ,
{ 
public 
ImageFacade 
( 
) 
: 
base #
(# $
$str$ ,
), -
{ 	
} 	
public 
Image 
UploadMenuItemImage (
(( )
Image) .
model/ 4
)4 5
{ 	
try 
{ 
HttpRequestMessage "
request# *
=+ ,
new- 0
HttpRequestMessage1 C
{   
Method!! 
=!! 

HttpMethod!! '
.!!' (
Post!!( ,
,!!, -

RequestUri"" 
=""  
new""! $
Uri""% (
(""( )
_baseUrl"") 1
+""2 3
$str""4 I
)""I J
,""J K
Content## 
=## 
new## !
StringContent##" /
(##/ 0
JsonConvert##0 ;
.##; <
SerializeObject##< K
(##K L
model##L Q
)##Q R
,##R S
Encoding##T \
.##\ ]
UTF8##] a
,##a b
$str##c u
)##u v
}$$ 
;$$ 
return&& 
ExecuteRequest&& %
<&&% &
Image&&& +
>&&+ ,
(&&, -
request&&- 4
)&&4 5
;&&5 6
}'' 
catch(( 
((( 
	Exception(( 
ex(( 
)((  
{)) 
return** 
null** 
;** 
}++ 
},, 	
public.. 
bool.. 
RemoveMenuItemImage.. '
(..' (
Image..( -
model... 3
)..3 4
{// 	
try00 
{11 
HttpRequestMessage22 "
request22# *
=22+ ,
new22- 0
HttpRequestMessage221 C
{33 
Method44 
=44 

HttpMethod44 '
.44' (
Post44( ,
,44, -

RequestUri55 
=55  
new55! $
Uri55% (
(55( )
_baseUrl55) 1
+552 3
$str554 I
)55I J
,55J K
Content66 
=66 
new66 !
StringContent66" /
(66/ 0
JsonConvert660 ;
.66; <
SerializeObject66< K
(66K L
model66L Q
)66Q R
,66R S
Encoding66T \
.66\ ]
UTF866] a
,66a b
$str66c u
)66u v
}77 
;77 
return99 
ExecuteRequest99 %
<99% &
bool99& *
>99* +
(99+ ,
request99, 3
)993 4
;994 5
}:: 
catch;; 
(;; 
	Exception;; 
ex;; 
);; 
{<< 
return== 
false== 
;== 
}>> 
}?? 	
publicFF 
ImageFF !
UploadRestaurantImageFF *
(FF* +
ImageFF+ 0
modelFF1 6
)FF6 7
{GG 	
tryHH 
{II 
HttpRequestMessageJJ "
requestJJ# *
=JJ+ ,
newJJ- 0
HttpRequestMessageJJ1 C
{KK 
MethodLL 
=LL 

HttpMethodLL '
.LL' (
PostLL( ,
,LL, -

RequestUriMM 
=MM  
newMM! $
UriMM% (
(MM( )
_baseUrlMM) 1
+MM2 3
$strMM4 K
)MMK L
,MML M
ContentNN 
=NN 
newNN !
StringContentNN" /
(NN/ 0
JsonConvertNN0 ;
.NN; <
SerializeObjectNN< K
(NNK L
modelNNL Q
)NNQ R
,NNR S
EncodingNNT \
.NN\ ]
UTF8NN] a
,NNa b
$strNNc u
)NNu v
}OO 
;OO 
returnQQ 
ExecuteRequestQQ %
<QQ% &
ImageQQ& +
>QQ+ ,
(QQ, -
requestQQ- 4
)QQ4 5
;QQ5 6
}RR 
catchSS 
(SS 
	ExceptionSS 
exSS 
)SS  
{TT 
returnUU 
nullUU 
;UU 
}VV 
}WW 	
publicYY 
boolYY !
RemoveRestaurantImageYY )
(YY) *
ImageYY* /
modelYY0 5
)YY5 6
{ZZ 	
try[[ 
{\\ 
HttpRequestMessage]] "
request]]# *
=]]+ ,
new]]- 0
HttpRequestMessage]]1 C
{^^ 
Method__ 
=__ 

HttpMethod__ '
.__' (
Post__( ,
,__, -

RequestUri`` 
=``  
new``! $
Uri``% (
(``( )
_baseUrl``) 1
+``2 3
$str``4 K
)``K L
,``L M
Contentaa 
=aa 
newaa !
StringContentaa" /
(aa/ 0
JsonConvertaa0 ;
.aa; <
SerializeObjectaa< K
(aaK L
modelaaL Q
)aaQ R
,aaR S
EncodingaaT \
.aa\ ]
UTF8aa] a
,aaa b
$straac u
)aau v
}bb 
;bb 
returndd 
ExecuteRequestdd %
<dd% &
booldd& *
>dd* +
(dd+ ,
requestdd, 3
)dd3 4
;dd4 5
}ee 
catchff 
(ff 
	Exceptionff 
exff 
)ff  
{gg 
returnhh 
falsehh 
;hh 
}ii 
}jj 	
publicqq 
Imageqq 
	LoadImageqq 
(qq 
intqq "
idqq# %
)qq% &
{rr 	
tryss 
{tt 
HttpRequestMessageuu "
requestuu# *
=uu+ ,
newuu- 0
HttpRequestMessageuu1 C
{vv 
Methodww 
=ww 

HttpMethodww '
.ww' (
Getww( +
,ww+ ,

RequestUrixx 
=xx  
newxx! $
Urixx% (
(xx( )
_baseUrlxx) 1
+xx2 3
$strxx4 @
+xxA B
idxxC E
)xxE F
}yy 
;yy 
return{{ 
ExecuteRequest{{ %
<{{% &
Image{{& +
>{{+ ,
({{, -
request{{- 4
){{4 5
;{{5 6
}|| 
catch}} 
(}} 
	Exception}} 
ex}} 
)}}  
{~~ 
return 
null 
; 
}
€€ 
}
 	
public
 
IEnumerable
 
<
 
Image
  
>
  !#
LoadImagesForMenuItem
" 7
(
7 8
int
8 ;
id
< >
)
> ?
{
‰‰ 	
try
 
{
‹‹  
HttpRequestMessage
 "
request
# *
=
+ ,
new
- 0 
HttpRequestMessage
1 C
{
 
Method
 
=
 

HttpMethod
 '
.
' (
Get
( +
,
+ ,

RequestUri
 
=
  
new
! $
Uri
% (
(
( )
_baseUrl
) 1
+
2 3
$str
4 L
+
M N
id
O Q
)
Q R
}
 
;
 
IEnumerable
’’ 
<
’’ 
Image
’’ !
>
’’! "
res
’’# &
=
’’' ( 
ExecuteRequestList
’’) ;
<
’’; <
Image
’’< A
>
’’A B
(
’’B C
request
’’C J
)
’’J K
;
’’K L
return
”” 
res
”” 
.
”” 
Any
”” 
(
”” 
)
””  
?
•• 
res
•• 
:
–– 

Enumerable
––  
.
––  !
Empty
––! &
<
––& '
Image
––' ,
>
––, -
(
––- .
)
––. /
;
––/ 0
}
—— 
catch
 
(
 
	Exception
 
ex
 
)
  
{
™™ 
return
 

Enumerable
 !
.
! "
Empty
" '
<
' (
Image
( -
>
- .
(
. /
)
/ 0
;
0 1
}
›› 
}
 	
}
 
} Ψm
zC:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\Facades\MenuFacade.cs
	namespace 	
BookingSystemApp
 
. 
Facades "
{ 
public 

class 

MenuFacade 
: 
GenericFacade +
{ 
public 

MenuFacade 
( 
) 
: 
base "
(" #
$str# *
)* +
{ 	
} 	
public 
IEnumerable 
< 
MenuItem #
># $
Get% (
(( )
)) *
{ 	
try 
{ 
HttpRequestMessage "
request# *
=+ ,
new- 0
HttpRequestMessage1 C
{ 
Method   
=   

HttpMethod   '
.  ' (
Get  ( +
,  + ,

RequestUri!! 
=!!  
new!!! $
Uri!!% (
(!!( )
_baseUrl!!) 1
+!!2 3
$str!!4 9
)!!9 :
}"" 
;"" 
IEnumerable$$ 
<$$ 
MenuItem$$ $
>$$$ %
res$$& )
=$$* +
ExecuteRequestList$$, >
<$$> ?
MenuItem$$? G
>$$G H
($$H I
request$$I P
)$$P Q
;$$Q R
return&& 
res&& 
.&& 
Any&& 
(&& 
)&&  
?'' 
res'' 
:(( 

Enumerable((  
.((  !
Empty((! &
<((& '
MenuItem((' /
>((/ 0
(((0 1
)((1 2
;((2 3
})) 
catch** 
(** 
	Exception** 
ex** 
)**  
{++ 
return,, 

Enumerable,, !
.,,! "
Empty,," '
<,,' (
MenuItem,,( 0
>,,0 1
(,,1 2
),,2 3
;,,3 4
}-- 
}.. 	
public55 
MenuItem55 
FindById55  
(55  !
int55! $
id55% '
)55' (
{66 	
try77 
{88 
HttpRequestMessage99 "
request99# *
=99+ ,
new99- 0
HttpRequestMessage991 C
{:: 
Method;; 
=;; 

HttpMethod;; '
.;;' (
Get;;( +
,;;+ ,

RequestUri<< 
=<<  
new<<! $
Uri<<% (
(<<( )
_baseUrl<<) 1
+<<2 3
$str<<4 :
+<<; <
id<<= ?
)<<? @
}== 
;== 
return?? 
ExecuteRequest?? %
<??% &
MenuItem??& .
>??. /
(??/ 0
request??0 7
)??7 8
;??8 9
}@@ 
catchAA 
(AA 
	ExceptionAA 
exAA 
)AA  
{BB 
returnCC 
nullCC 
;CC 
}DD 
}EE 	
publicLL 
IEnumerableLL 
<LL 
MenuItemLL #
>LL# $
FindByRestaurantIdLL% 7
(LL7 8
intLL8 ;
idLL< >
)LL> ?
{MM 	
tryNN 
{OO 
HttpRequestMessagePP "
requestPP# *
=PP+ ,
newPP- 0
HttpRequestMessagePP1 C
{QQ 
MethodRR 
=RR 

HttpMethodRR '
.RR' (
GetRR( +
,RR+ ,

RequestUriSS 
=SS  
newSS! $
UriSS% (
(SS( )
_baseUrlSS) 1
+SS2 3
$strSS4 F
+SSG H
idSSI K
)SSK L
}TT 
;TT 
IEnumerableVV 
<VV 
MenuItemVV $
>VV$ %
resVV& )
=VV* +
ExecuteRequestListVV, >
<VV> ?
MenuItemVV? G
>VVG H
(VVH I
requestVVI P
)VVP Q
;VVQ R
returnXX 
resXX 
.XX 
AnyXX 
(XX 
)XX  
?YY 
resYY 
:ZZ 

EnumerableZZ  
.ZZ  !
EmptyZZ! &
<ZZ& '
MenuItemZZ' /
>ZZ/ 0
(ZZ0 1
)ZZ1 2
;ZZ2 3
}[[ 
catch\\ 
(\\ 
	Exception\\ 
ex\\ 
)\\  
{]] 
return^^ 

Enumerable^^ !
.^^! "
Empty^^" '
<^^' (
MenuItem^^( 0
>^^0 1
(^^1 2
)^^2 3
;^^3 4
}__ 
}`` 	
publicgg 
MenuItemgg 
Creategg 
(gg 
MenuItemgg '
modelgg( -
)gg- .
{hh 	
tryii 
{jj 
HttpRequestMessagekk "
requestkk# *
=kk+ ,
newkk- 0
HttpRequestMessagekk1 C
{ll 
Methodmm 
=mm 

HttpMethodmm '
.mm' (
Postmm( ,
,mm, -

RequestUrinn 
=nn  
newnn! $
Urinn% (
(nn( )
_baseUrlnn) 1
+nn2 3
$strnn4 :
)nn: ;
,nn; <
Contentoo 
=oo 
newoo !
StringContentoo" /
(oo/ 0
JsonConvertoo0 ;
.oo; <
SerializeObjectoo< K
(ooK L
modelooL Q
)ooQ R
,ooR S
EncodingooT \
.oo\ ]
UTF8oo] a
,ooa b
$strooc u
)oou v
}pp 
;pp 
returnrr 
ExecuteRequestrr %
<rr% &
MenuItemrr& .
>rr. /
(rr/ 0
requestrr0 7
)rr7 8
;rr8 9
}ss 
catchtt 
(tt 
	Exceptiontt 
extt 
)tt  
{uu 
returnvv 
nullvv 
;vv 
}ww 
}xx 	
public 
MenuItem 
Update 
( 
MenuItem '
model( -
)- .
{
€€ 	
try
 
{
‚‚  
HttpRequestMessage
ƒƒ "
request
ƒƒ# *
=
ƒƒ+ ,
new
ƒƒ- 0 
HttpRequestMessage
ƒƒ1 C
{
„„ 
Method
…… 
=
…… 

HttpMethod
…… '
.
……' (
Put
……( +
,
……+ ,

RequestUri
†† 
=
††  
new
††! $
Uri
††% (
(
††( )
_baseUrl
††) 1
+
††2 3
$str
††4 <
)
††< =
,
††= >
Content
‡‡ 
=
‡‡ 
new
‡‡ !
StringContent
‡‡" /
(
‡‡/ 0
JsonConvert
‡‡0 ;
.
‡‡; <
SerializeObject
‡‡< K
(
‡‡K L
model
‡‡L Q
)
‡‡Q R
,
‡‡R S
Encoding
‡‡T \
.
‡‡\ ]
UTF8
‡‡] a
,
‡‡a b
$str
‡‡c u
)
‡‡u v
}
 
;
 
return
 
ExecuteRequest
 %
<
% &
MenuItem
& .
>
. /
(
/ 0
request
0 7
)
7 8
;
8 9
}
‹‹ 
catch
 
(
 
	Exception
 
ex
 
)
  
{
 
return
 
null
 
;
 
}
 
}
 	
public
—— 
bool
—— 
Delete
—— 
(
—— 
int
—— 
id
—— !
)
——! "
{
 	
return
™™ 
ExecuteRemove
™™  
(
™™  !
new
™™! $
Uri
™™% (
(
™™( )
_baseUrl
™™) 1
+
™™2 3
$str
™™4 =
+
™™> ?
id
™™@ B
)
™™B C
)
™™C D
;
™™D E
}
 	
public
ΆΆ 
bool
ΆΆ #
AddDietInfoToMenuItem
ΆΆ )
(
ΆΆ) *
int
ΆΆ* -

menuItemId
ΆΆ. 8
,
ΆΆ8 9
int
ΆΆ: =

dietInfoId
ΆΆ> H
)
ΆΆH I
{
££ 	
try
¤¤ 
{
¥¥  
HttpRequestMessage
¦¦ "
request
¦¦# *
=
¦¦+ ,
new
¦¦- 0 
HttpRequestMessage
¦¦1 C
{
§§ 
Method
¨¨ 
=
¨¨ 

HttpMethod
¨¨ '
.
¨¨' (
Put
¨¨( +
,
¨¨+ ,

RequestUri
©© 
=
©©  
new
©©! $
Uri
©©% (
(
©©( )
_baseUrl
©©) 1
+
©©2 3
$str
©©4 B
+
©©C D

menuItemId
©©E O
+
©©P Q
$str
©©R U
+
©©V W

dietInfoId
©©X b
)
©©b c
}
 
;
 !
HttpResponseMessage
¬¬ #
response
¬¬$ ,
=
¬¬- .
_client
¬¬/ 6
.
¬¬6 7
	SendAsync
¬¬7 @
(
¬¬@ A
request
¬¬A H
)
¬¬H I
.
¬¬I J
Result
¬¬J P
;
¬¬P Q
response
­­ 
.
­­ %
EnsureSuccessStatusCode
­­ 0
(
­­0 1
)
­­1 2
;
­­2 3
return
―― 
true
―― 
;
―― 
}
°° 
catch
±± 
(
±± 
	Exception
±± 
ex
±± 
)
±±  
{
²² 
return
³³ 
false
³³ 
;
³³ 
}
΄΄ 
}
µµ 	
public
½½ 
bool
½½ (
RemoveDietInfoFromMenuItem
½½ .
(
½½. /
int
½½/ 2

menuItemId
½½3 =
,
½½= >
int
½½? B

dietInfoId
½½C M
)
½½M N
{
ΎΎ 	
try
ΏΏ 
{
ΐΐ  
HttpRequestMessage
ΑΑ "
request
ΑΑ# *
=
ΑΑ+ ,
new
ΑΑ- 0 
HttpRequestMessage
ΑΑ1 C
{
ΒΒ 
Method
ΓΓ 
=
ΓΓ 

HttpMethod
ΓΓ '
.
ΓΓ' (
Delete
ΓΓ( .
,
ΓΓ. /

RequestUri
ΔΔ 
=
ΔΔ  
new
ΔΔ! $
Uri
ΔΔ% (
(
ΔΔ( )
_baseUrl
ΔΔ) 1
+
ΔΔ2 3
$str
ΔΔ4 E
+
ΔΔF G

menuItemId
ΔΔH R
+
ΔΔS T
$str
ΔΔU X
+
ΔΔY Z

dietInfoId
ΔΔ[ e
)
ΔΔe f
}
ΕΕ 
;
ΕΕ !
HttpResponseMessage
ΗΗ #
response
ΗΗ$ ,
=
ΗΗ- .
_client
ΗΗ/ 6
.
ΗΗ6 7
	SendAsync
ΗΗ7 @
(
ΗΗ@ A
request
ΗΗA H
)
ΗΗH I
.
ΗΗI J
Result
ΗΗJ P
;
ΗΗP Q
response
ΘΘ 
.
ΘΘ %
EnsureSuccessStatusCode
ΘΘ 0
(
ΘΘ0 1
)
ΘΘ1 2
;
ΘΘ2 3
return
ΚΚ 
true
ΚΚ 
;
ΚΚ 
}
ΛΛ 
catch
ΜΜ 
(
ΜΜ 
	Exception
ΜΜ 
ex
ΜΜ 
)
ΜΜ  
{
ΝΝ 
return
ΞΞ 
false
ΞΞ 
;
ΞΞ 
}
ΟΟ 
}
ΠΠ 	
public
ΨΨ 
bool
ΨΨ '
AddMenuItemTypeToMenuItem
ΨΨ -
(
ΨΨ- .
int
ΨΨ. 1

menuItemId
ΨΨ2 <
,
ΨΨ< =
int
ΨΨ> A
menuItemTypeId
ΨΨB P
)
ΨΨP Q
{
ΩΩ 	
try
ΪΪ 
{
ΫΫ  
HttpRequestMessage
άά "
request
άά# *
=
άά+ ,
new
άά- 0 
HttpRequestMessage
άά1 C
{
έέ 
Method
ήή 
=
ήή 

HttpMethod
ήή '
.
ήή' (
Put
ήή( +
,
ήή+ ,

RequestUri
ίί 
=
ίί  
new
ίί! $
Uri
ίί% (
(
ίί( )
_baseUrl
ίί) 1
+
ίί2 3
$str
ίί4 F
+
ίίG H

menuItemId
ίίI S
+
ίίT U
$str
ίίV Y
+
ίίZ [
menuItemTypeId
ίί\ j
)
ίίj k
}
ΰΰ 
;
ΰΰ !
HttpResponseMessage
ββ #
response
ββ$ ,
=
ββ- .
_client
ββ/ 6
.
ββ6 7
	SendAsync
ββ7 @
(
ββ@ A
request
ββA H
)
ββH I
.
ββI J
Result
ββJ P
;
ββP Q
response
γγ 
.
γγ %
EnsureSuccessStatusCode
γγ 0
(
γγ0 1
)
γγ1 2
;
γγ2 3
return
εε 
true
εε 
;
εε 
}
ζζ 
catch
ηη 
(
ηη 
	Exception
ηη 
ex
ηη 
)
ηη  
{
θθ 
return
ιι 
false
ιι 
;
ιι 
}
κκ 
}
λλ 	
public
σσ 
bool
σσ ,
RemoveMenuItemTypeFromMenuItem
σσ 2
(
σσ2 3
int
σσ3 6

menuItemId
σσ7 A
,
σσA B
int
σσC F
menuItemTypeId
σσG U
)
σσU V
{
ττ 	
try
υυ 
{
φφ  
HttpRequestMessage
χχ "
request
χχ# *
=
χχ+ ,
new
χχ- 0 
HttpRequestMessage
χχ1 C
{
ψψ 
Method
ωω 
=
ωω 

HttpMethod
ωω '
.
ωω' (
Delete
ωω( .
,
ωω. /

RequestUri
ϊϊ 
=
ϊϊ  
new
ϊϊ! $
Uri
ϊϊ% (
(
ϊϊ( )
_baseUrl
ϊϊ) 1
+
ϊϊ2 3
$str
ϊϊ4 I
+
ϊϊJ K

menuItemId
ϊϊL V
+
ϊϊW X
$str
ϊϊY \
+
ϊϊ] ^
menuItemTypeId
ϊϊ_ m
)
ϊϊm n
}
ϋϋ 
;
ϋϋ !
HttpResponseMessage
ύύ #
response
ύύ$ ,
=
ύύ- .
_client
ύύ/ 6
.
ύύ6 7
	SendAsync
ύύ7 @
(
ύύ@ A
request
ύύA H
)
ύύH I
.
ύύI J
Result
ύύJ P
;
ύύP Q
response
ώώ 
.
ώώ %
EnsureSuccessStatusCode
ώώ 0
(
ώώ0 1
)
ώώ1 2
;
ώώ2 3
return
€€ 
true
€€ 
;
€€ 
}
 
catch
‚‚ 
(
‚‚ 
	Exception
‚‚ 
ex
‚‚ 
)
‚‚  
{
ƒƒ 
return
„„ 
false
„„ 
;
„„ 
}
…… 
}
†† 	
}
‡‡ 
} 0
‚C:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\Facades\MenuItemTypeFacade.cs
	namespace 	
BookingSystemApp
 
. 
Facades "
{ 
public 

class 
MenuItemTypeFacade #
:$ %
GenericFacade& 3
{ 
public 
MenuItemTypeFacade !
(! "
)" #
:$ %
base& *
(* +
$str+ :
): ;
{ 	
} 	
public 
IEnumerable 
< 
MenuItemType '
>' (
Get) ,
(, -
)- .
{ 	
try 
{ 
HttpRequestMessage "
request# *
=+ ,
new- 0
HttpRequestMessage1 C
{ 
Method   
=   

HttpMethod   '
.  ' (
Get  ( +
,  + ,

RequestUri!! 
=!!  
new!!! $
Uri!!% (
(!!( )
_baseUrl!!) 1
+!!2 3
$str!!4 9
)!!9 :
}"" 
;"" 
IEnumerable$$ 
<$$ 
MenuItemType$$ (
>$$( )
res$$* -
=$$. /
ExecuteRequestList$$0 B
<$$B C
MenuItemType$$C O
>$$O P
($$P Q
request$$Q X
)$$X Y
;$$Y Z
return&& 
res&& 
.&& 
Any&& 
(&& 
)&&  
?'' 
res'' 
:(( 

Enumerable((  
.((  !
Empty((! &
<((& '
MenuItemType((' 3
>((3 4
(((4 5
)((5 6
;((6 7
})) 
catch** 
(** 
	Exception** 
ex** 
)**  
{++ 
return,, 

Enumerable,, !
.,,! "
Empty,," '
<,,' (
MenuItemType,,( 4
>,,4 5
(,,5 6
),,6 7
;,,7 8
}-- 
}.. 	
public55 
MenuItemType55 
FindById55 $
(55$ %
int55% (
id55) +
)55+ ,
{66 	
try77 
{88 
HttpRequestMessage99 "
request99# *
=99+ ,
new99- 0
HttpRequestMessage991 C
{:: 
Method;; 
=;; 

HttpMethod;; '
.;;' (
Get;;( +
,;;+ ,

RequestUri<< 
=<<  
new<<! $
Uri<<% (
(<<( )
_baseUrl<<) 1
+<<2 3
$str<<4 :
+<<; <
id<<= ?
)<<? @
}== 
;== 
return?? 
ExecuteRequest?? %
<??% &
MenuItemType??& 2
>??2 3
(??3 4
request??4 ;
)??; <
;??< =
}@@ 
catchAA 
(AA 
	ExceptionAA 
exAA 
)AA  
{BB 
returnCC 
nullCC 
;CC 
}DD 
}EE 	
publicLL 
MenuItemTypeLL 
CreateLL "
(LL" #
MenuItemTypeLL# /
modelLL0 5
)LL5 6
{MM 	
tryNN 
{OO 
HttpRequestMessagePP "
requestPP# *
=PP+ ,
newPP- 0
HttpRequestMessagePP1 C
{QQ 
MethodRR 
=RR 

HttpMethodRR '
.RR' (
PostRR( ,
,RR, -

RequestUriSS 
=SS  
newSS! $
UriSS% (
(SS( )
_baseUrlSS) 1
+SS2 3
$strSS4 :
)SS: ;
,SS; <
ContentTT 
=TT 
newTT !
StringContentTT" /
(TT/ 0
JsonConvertTT0 ;
.TT; <
SerializeObjectTT< K
(TTK L
modelTTL Q
)TTQ R
,TTR S
EncodingTTT \
.TT\ ]
UTF8TT] a
,TTa b
$strTTc u
)TTu v
}UU 
;UU 
returnWW 
ExecuteRequestWW %
<WW% &
MenuItemTypeWW& 2
>WW2 3
(WW3 4
requestWW4 ;
)WW; <
;WW< =
}XX 
catchYY 
(YY 
	ExceptionYY 
exYY 
)YY  
{ZZ 
return[[ 
null[[ 
;[[ 
}\\ 
}]] 	
publicdd 
MenuItemTypedd 
Updatedd "
(dd" #
MenuItemTypedd# /
modeldd0 5
)dd5 6
{ee 	
tryff 
{gg 
HttpRequestMessagehh "
requesthh# *
=hh+ ,
newhh- 0
HttpRequestMessagehh1 C
{ii 
Methodjj 
=jj 

HttpMethodjj '
.jj' (
Putjj( +
,jj+ ,

RequestUrikk 
=kk  
newkk! $
Urikk% (
(kk( )
_baseUrlkk) 1
+kk2 3
$strkk4 <
)kk< =
,kk= >
Contentll 
=ll 
newll !
StringContentll" /
(ll/ 0
JsonConvertll0 ;
.ll; <
SerializeObjectll< K
(llK L
modelllL Q
)llQ R
,llR S
EncodingllT \
.ll\ ]
UTF8ll] a
,lla b
$strllc u
)llu v
}mm 
;mm 
returnoo 
ExecuteRequestoo %
<oo% &
MenuItemTypeoo& 2
>oo2 3
(oo3 4
requestoo4 ;
)oo; <
;oo< =
}pp 
catchqq 
(qq 
	Exceptionqq 
exqq 
)qq  
{rr 
returnss 
nullss 
;ss 
}tt 
}uu 	
public|| 
bool|| 
Delete|| 
(|| 
int|| 
id|| !
)||! "
{}} 	
return~~ 
ExecuteRemove~~  
(~~  !
new~~! $
Uri~~% (
(~~( )
_baseUrl~~) 1
+~~2 3
$str~~4 =
+~~> ?
id~~@ B
)~~B C
)~~C D
;~~D E
} 	
}
€€ 
} ΟF
}C:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\Facades\PaymentFacade.cs
	namespace 	
BookingSystemApp
 
. 
Facades "
{ 
public 

class 
PaymentFacade 
:  
GenericFacade! .
{ 
public 
PaymentFacade 
( 
) 
:  
base! %
(% &
$str& 0
)0 1
{ 	
} 	
public 
IEnumerable 
< 
Payment "
>" #
Get$ '
(' (
)( )
{ 	
try 
{ 
HttpRequestMessage "
request# *
=+ ,
new- 0
HttpRequestMessage1 C
{ 
Method   
=   

HttpMethod   '
.  ' (
Get  ( +
,  + ,

RequestUri!! 
=!!  
new!!! $
Uri!!% (
(!!( )
_baseUrl!!) 1
+!!2 3
$str!!4 9
)!!9 :
}"" 
;"" 
IEnumerable$$ 
<$$ 
Payment$$ #
>$$# $
res$$% (
=$$) *
ExecuteRequestList$$+ =
<$$= >
Payment$$> E
>$$E F
($$F G
request$$G N
)$$N O
;$$O P
return&& 
res&& 
.&& 
Any&& 
(&& 
)&&  
?'' 
res'' 
:(( 

Enumerable((  
.((  !
Empty((! &
<((& '
Payment((' .
>((. /
(((/ 0
)((0 1
;((1 2
})) 
catch** 
(** 
	Exception** 
ex** 
)**  
{++ 
return,, 

Enumerable,, !
.,,! "
Empty,," '
<,,' (
Payment,,( /
>,,/ 0
(,,0 1
),,1 2
;,,2 3
}-- 
}.. 	
public55 
Payment55 
FindById55 
(55  
int55  #
id55$ &
)55& '
{66 	
try77 
{88 
HttpRequestMessage99 "
request99# *
=99+ ,
new99- 0
HttpRequestMessage991 C
{:: 
Method;; 
=;; 

HttpMethod;; '
.;;' (
Get;;( +
,;;+ ,

RequestUri<< 
=<<  
new<<! $
Uri<<% (
(<<( )
_baseUrl<<) 1
+<<2 3
$str<<4 :
+<<; <
id<<= ?
)<<? @
}== 
;== 
return?? 
ExecuteRequest?? %
<??% &
Payment??& -
>??- .
(??. /
request??/ 6
)??6 7
;??7 8
}@@ 
catchAA 
(AA 
	ExceptionAA 
exAA 
)AA  
{BB 
returnCC 
nullCC 
;CC 
}DD 
}EE 	
publicKK 
IEnumerableKK 
<KK 
PaymentMethodKK (
>KK( )
GetPaymentMethodKK* :
(KK: ;
)KK; <
{LL 	
tryMM 
{NN 
HttpRequestMessageOO "
requestOO# *
=OO+ ,
newOO- 0
HttpRequestMessageOO1 C
{PP 
MethodQQ 
=QQ 

HttpMethodQQ '
.QQ' (
GetQQ( +
,QQ+ ,

RequestUriRR 
=RR  
newRR! $
UriRR% (
(RR( )
_baseUrlRR) 1
+RR2 3
$strRR4 F
)RRF G
}SS 
;SS 
IEnumerableUU 
<UU 
PaymentMethodUU )
>UU) *
resUU+ .
=UU/ 0
ExecuteRequestListUU1 C
<UUC D
PaymentMethodUUD Q
>UUQ R
(UUR S
requestUUS Z
)UUZ [
;UU[ \
returnWW 
resWW 
.WW 
AnyWW 
(WW 
)WW  
?XX 
resXX 
:YY 

EnumerableYY  
.YY  !
EmptyYY! &
<YY& '
PaymentMethodYY' 4
>YY4 5
(YY5 6
)YY6 7
;YY7 8
}ZZ 
catch[[ 
([[ 
	Exception[[ 
ex[[ 
)[[  
{\\ 
return]] 

Enumerable]] !
.]]! "
Empty]]" '
<]]' (
PaymentMethod]]( 5
>]]5 6
(]]6 7
)]]7 8
;]]8 9
}^^ 
}__ 	
publicff 
PaymentMethodff !
FindPaymentMethodByIdff 2
(ff2 3
intff3 6
idff7 9
)ff9 :
{gg 	
tryhh 
{ii 
HttpRequestMessagejj "
requestjj# *
=jj+ ,
newjj- 0
HttpRequestMessagejj1 C
{kk 
Methodll 
=ll 

HttpMethodll '
.ll' (
Getll( +
,ll+ ,

RequestUrimm 
=mm  
newmm! $
Urimm% (
(mm( )
_baseUrlmm) 1
+mm2 3
$strmm4 G
+mmH I
idmmJ L
)mmL M
}nn 
;nn 
returnpp 
ExecuteRequestpp %
<pp% &
PaymentMethodpp& 3
>pp3 4
(pp4 5
requestpp5 <
)pp< =
;pp= >
}qq 
catchrr 
(rr 
	Exceptionrr 
exrr 
)rr  
{ss 
returntt 
nulltt 
;tt 
}uu 
}vv 	
public}} 
Payment}} 
Create}} 
(}} 
Payment}} %
model}}& +
)}}+ ,
{~~ 	
try 
{
€€  
HttpRequestMessage
 "
request
# *
=
+ ,
new
- 0 
HttpRequestMessage
1 C
{
‚‚ 
Method
ƒƒ 
=
ƒƒ 

HttpMethod
ƒƒ '
.
ƒƒ' (
Post
ƒƒ( ,
,
ƒƒ, -

RequestUri
„„ 
=
„„  
new
„„! $
Uri
„„% (
(
„„( )
_baseUrl
„„) 1
+
„„2 3
$str
„„4 :
)
„„: ;
,
„„; <
Content
…… 
=
…… 
new
…… !
StringContent
……" /
(
……/ 0
JsonConvert
……0 ;
.
……; <
SerializeObject
……< K
(
……K L
model
……L Q
)
……Q R
,
……R S
Encoding
……T \
.
……\ ]
UTF8
……] a
,
……a b
$str
……c u
)
……u v
}
†† 
;
†† 
return
 
ExecuteRequest
 %
<
% &
Payment
& -
>
- .
(
. /
request
/ 6
)
6 7
;
7 8
}
‰‰ 
catch
 
(
 
	Exception
 
ex
 
)
  
{
‹‹ 
return
 
null
 
;
 
}
 
}
 	
public
•• 
Payment
•• 
Update
•• 
(
•• 
Payment
•• %
model
••& +
)
••+ ,
{
–– 	
try
—— 
{
  
HttpRequestMessage
™™ "
request
™™# *
=
™™+ ,
new
™™- 0 
HttpRequestMessage
™™1 C
{
 
Method
›› 
=
›› 

HttpMethod
›› '
.
››' (
Put
››( +
,
››+ ,

RequestUri
 
=
  
new
! $
Uri
% (
(
( )
_baseUrl
) 1
+
2 3
$str
4 =
+
> ?
model
@ E
.
E F
Id
F H
)
H I
,
I J
Content
 
=
 
new
 !
StringContent
" /
(
/ 0
JsonConvert
0 ;
.
; <
SerializeObject
< K
(
K L
model
L Q
)
Q R
,
R S
Encoding
T \
.
\ ]
UTF8
] a
,
a b
$str
c u
)
u v
}
 
;
 
return
   
ExecuteRequest
   %
<
  % &
Payment
  & -
>
  - .
(
  . /
request
  / 6
)
  6 7
;
  7 8
}
΅΅ 
catch
ΆΆ 
(
ΆΆ 
	Exception
ΆΆ 
ex
ΆΆ 
)
ΆΆ  
{
££ 
return
¤¤ 
null
¤¤ 
;
¤¤ 
}
¥¥ 
}
¦¦ 	
public
­­ 
bool
­­ 
Delete
­­ 
(
­­ 
int
­­ 
id
­­ !
)
­­! "
{
®® 	
return
―― 
ExecuteRemove
――  
(
――  !
new
――! $
Uri
――% (
(
――( )
_baseUrl
――) 1
+
――2 3
$str
――4 =
+
――> ?
id
――@ B
)
――B C
)
――C D
;
――D E
}
°° 	
}
±± 
}²² ΡH
€C:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\Facades\RestaurantFacade.cs
	namespace 	
BookingSystemApp
 
. 
Facades "
{ 
public 

class 
RestaurantFacade !
:" #
GenericFacade$ 1
{ 
public 
RestaurantFacade 
(  
)  !
:" #
base$ (
(( )
$str) 6
)6 7
{ 	
} 	
public 
IEnumerable 
< 

Restaurant %
>% &
Get' *
(* +
)+ ,
{ 	
try 
{ 
HttpRequestMessage "
request# *
=+ ,
new- 0
HttpRequestMessage1 C
{ 
Method   
=   

HttpMethod   '
.  ' (
Get  ( +
,  + ,

RequestUri!! 
=!!  
new!!! $
Uri!!% (
(!!( )
_baseUrl!!) 1
+!!2 3
$str!!4 9
)!!9 :
}"" 
;"" 
IEnumerable$$ 
<$$ 

Restaurant$$ &
>$$& '
res$$( +
=$$, -
ExecuteRequestList$$. @
<$$@ A

Restaurant$$A K
>$$K L
($$L M
request$$M T
)$$T U
;$$U V
return&& 
res&& 
.&& 
Any&& 
(&& 
)&&  
?'' 
res'' 
:(( 

Enumerable((  
.((  !
Empty((! &
<((& '

Restaurant((' 1
>((1 2
(((2 3
)((3 4
;((4 5
})) 
catch** 
(** 
	Exception** 
ex** 
)**  
{++ 
return,, 

Enumerable,, !
.,,! "
Empty,," '
<,,' (

Restaurant,,( 2
>,,2 3
(,,3 4
),,4 5
;,,5 6
}-- 
}.. 	
public55 

Restaurant55 
FindById55 "
(55" #
int55# &
id55' )
)55) *
{66 	
try77 
{88 
HttpRequestMessage99 "
request99# *
=99+ ,
new99- 0
HttpRequestMessage991 C
{:: 
Method;; 
=;; 

HttpMethod;; '
.;;' (
Get;;( +
,;;+ ,

RequestUri<< 
=<<  
new<<! $
Uri<<% (
(<<( )
_baseUrl<<) 1
+<<2 3
$str<<4 :
+<<; <
id<<= ?
)<<? @
}== 
;== 
return?? 
ExecuteRequest?? %
<??% &

Restaurant??& 0
>??0 1
(??1 2
request??2 9
)??9 :
;??: ;
}@@ 
catchAA 
(AA 
	ExceptionAA 
exAA 
)AA  
{BB 
returnCC 
nullCC 
;CC 
}DD 
}EE 	
publicLL 

RestaurantLL 
CreateLL  
(LL  !

RestaurantLL! +
modelLL, 1
)LL1 2
{MM 	
tryNN 
{OO 
HttpRequestMessagePP "
requestPP# *
=PP+ ,
newPP- 0
HttpRequestMessagePP1 C
{QQ 
MethodRR 
=RR 

HttpMethodRR '
.RR' (
PostRR( ,
,RR, -

RequestUriSS 
=SS  
newSS! $
UriSS% (
(SS( )
_baseUrlSS) 1
+SS2 3
$strSS4 <
)SS< =
,SS= >
ContentTT 
=TT 
newTT !
StringContentTT" /
(TT/ 0
JsonConvertTT0 ;
.TT; <
SerializeObjectTT< K
(TTK L
modelTTL Q
)TTQ R
,TTR S
EncodingTTT \
.TT\ ]
UTF8TT] a
,TTa b
$strTTc u
)TTu v
}UU 
;UU 
returnWW 
ExecuteRequestWW %
<WW% &

RestaurantWW& 0
>WW0 1
(WW1 2
requestWW2 9
)WW9 :
;WW: ;
}XX 
catchYY 
(YY 
	ExceptionYY 
exYY 
)YY  
{ZZ 
return[[ 
null[[ 
;[[ 
}\\ 
}]] 	
publicdd 

Restaurantdd 
Updatedd  
(dd  !

Restaurantdd! +
modeldd, 1
)dd1 2
{ee 	
tryff 
{gg 
HttpRequestMessagehh "
requesthh# *
=hh+ ,
newhh- 0
HttpRequestMessagehh1 C
{ii 
Methodjj 
=jj 

HttpMethodjj '
.jj' (
Putjj( +
,jj+ ,

RequestUrikk 
=kk  
newkk! $
Urikk% (
(kk( )
_baseUrlkk) 1
+kk2 3
$strkk4 =
+kk> ?
modelkk@ E
.kkE F
IdkkF H
)kkH I
,kkI J
Contentll 
=ll 
newll !
StringContentll" /
(ll/ 0
JsonConvertll0 ;
.ll; <
SerializeObjectll< K
(llK L
modelllL Q
)llQ R
,llR S
EncodingllT \
.ll\ ]
UTF8ll] a
,lla b
$strllc u
)llu v
}mm 
;mm 
returnoo 
ExecuteRequestoo %
<oo% &

Restaurantoo& 0
>oo0 1
(oo1 2
requestoo2 9
)oo9 :
;oo: ;
}pp 
catchqq 
(qq 
	Exceptionqq 
exqq 
)qq  
{rr 
returnss 
nullss 
;ss 
}tt 
}uu 	
public|| 
bool|| 
Delete|| 
(|| 
int|| 
id|| !
)||! "
{}} 	
return~~ 
ExecuteRemove~~  
(~~  !
new~~! $
Uri~~% (
(~~( )
_baseUrl~~) 1
+~~2 3
$str~~4 =
+~~> ?
id~~@ B
)~~B C
)~~C D
;~~D E
} 	
public
‡‡ 
bool
‡‡ %
AddMenuItemToRestaurant
‡‡ +
(
‡‡+ ,
int
‡‡, /
restaurantId
‡‡0 <
,
‡‡< =
int
‡‡> A

menuItemId
‡‡B L
)
‡‡L M
{
 	
try
‰‰ 
{
  
HttpRequestMessage
‹‹ "
request
‹‹# *
=
‹‹+ ,
new
‹‹- 0 
HttpRequestMessage
‹‹1 C
{
 
Method
 
=
 

HttpMethod
 '
.
' (
Put
( +
,
+ ,

RequestUri
 
=
  
new
! $
Uri
% (
(
( )
_baseUrl
) 1
+
2 3
$str
4 B
+
C D
restaurantId
E Q
+
R S
$str
T W
+
X Y

menuItemId
Z d
)
d e
}
 
;
 !
HttpResponseMessage
‘‘ #
response
‘‘$ ,
=
‘‘- .
_client
‘‘/ 6
.
‘‘6 7
	SendAsync
‘‘7 @
(
‘‘@ A
request
‘‘A H
)
‘‘H I
.
‘‘I J
Result
‘‘J P
;
‘‘P Q
response
’’ 
.
’’ %
EnsureSuccessStatusCode
’’ 0
(
’’0 1
)
’’1 2
;
’’2 3
return
”” 
true
”” 
;
”” 
}
•• 
catch
–– 
(
–– 
	Exception
–– 
ex
–– 
)
––  
{
—— 
return
 
false
 
;
 
}
™™ 
}
 	
public
ΆΆ 
bool
ΆΆ *
RemoveMenuItemFromRestaurant
ΆΆ 0
(
ΆΆ0 1
int
ΆΆ1 4
restaurantId
ΆΆ5 A
,
ΆΆA B
int
ΆΆC F

menuItemId
ΆΆG Q
)
ΆΆQ R
{
££ 	
try
¤¤ 
{
¥¥  
HttpRequestMessage
¦¦ "
request
¦¦# *
=
¦¦+ ,
new
¦¦- 0 
HttpRequestMessage
¦¦1 C
{
§§ 
Method
¨¨ 
=
¨¨ 

HttpMethod
¨¨ '
.
¨¨' (
Delete
¨¨( .
,
¨¨. /

RequestUri
©© 
=
©©  
new
©©! $
Uri
©©% (
(
©©( )
_baseUrl
©©) 1
+
©©2 3
$str
©©4 E
+
©©F G
restaurantId
©©H T
+
©©U V
$str
©©W Z
+
©©[ \

menuItemId
©©] g
)
©©g h
}
 
;
 !
HttpResponseMessage
¬¬ #
response
¬¬$ ,
=
¬¬- .
_client
¬¬/ 6
.
¬¬6 7
	SendAsync
¬¬7 @
(
¬¬@ A
request
¬¬A H
)
¬¬H I
.
¬¬I J
Result
¬¬J P
;
¬¬P Q
response
­­ 
.
­­ %
EnsureSuccessStatusCode
­­ 0
(
­­0 1
)
­­1 2
;
­­2 3
return
―― 
true
―― 
;
―― 
}
°° 
catch
±± 
(
±± 
	Exception
±± 
ex
±± 
)
±±  
{
²² 
return
³³ 
false
³³ 
;
³³ 
}
΄΄ 
}
µµ 	
}
¶¶ 
}·· §/
{C:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\Facades\TableFacade.cs
	namespace 	
BookingSystemApp
 
. 
Facades "
{ 
public 

class 
TableFacade 
: 
GenericFacade ,
{ 
public 
TableFacade 
( 
) 
: 
base #
(# $
$str$ ,
), -
{ 	
} 	
public 
IEnumerable 
< 
Table  
>  !
Get" %
(% &
)& '
{ 	
try 
{ 
HttpRequestMessage "
request# *
=+ ,
new- 0
HttpRequestMessage1 C
{ 
Method   
=   

HttpMethod   '
.  ' (
Get  ( +
,  + ,

RequestUri!! 
=!!  
new!!! $
Uri!!% (
(!!( )
_baseUrl!!) 1
+!!2 3
$str!!4 9
)!!9 :
}"" 
;"" 
IEnumerable$$ 
<$$ 
Table$$ !
>$$! "
res$$# &
=$$' (
ExecuteRequestList$$) ;
<$$; <
Table$$< A
>$$A B
($$B C
request$$C J
)$$J K
;$$K L
return&& 
res&& 
.&& 
Any&& 
(&& 
)&&  
?'' 
res'' 
:(( 

Enumerable((  
.((  !
Empty((! &
<((& '
Table((' ,
>((, -
(((- .
)((. /
;((/ 0
})) 
catch** 
(** 
	Exception** 
ex** 
)**  
{++ 
return,, 

Enumerable,, !
.,,! "
Empty,," '
<,,' (
Table,,( -
>,,- .
(,,. /
),,/ 0
;,,0 1
}-- 
}.. 	
public55 
Table55 
FindById55 
(55 
int55 !
id55" $
)55$ %
{66 	
try77 
{88 
HttpRequestMessage99 "
request99# *
=99+ ,
new99- 0
HttpRequestMessage991 C
{:: 
Method;; 
=;; 

HttpMethod;; '
.;;' (
Get;;( +
,;;+ ,

RequestUri<< 
=<<  
new<<! $
Uri<<% (
(<<( )
_baseUrl<<) 1
+<<2 3
$str<<4 :
+<<; <
id<<= ?
)<<? @
}== 
;== 
return?? 
ExecuteRequest?? %
<??% &
Table??& +
>??+ ,
(??, -
request??- 4
)??4 5
;??5 6
}@@ 
catchAA 
(AA 
	ExceptionAA 
exAA 
)AA  
{BB 
returnCC 
nullCC 
;CC 
}DD 
}EE 	
publicLL 
TableLL 
CreateLL 
(LL 
TableLL !
modelLL" '
)LL' (
{MM 	
tryNN 
{OO 
HttpRequestMessagePP "
requestPP# *
=PP+ ,
newPP- 0
HttpRequestMessagePP1 C
{QQ 
MethodRR 
=RR 

HttpMethodRR '
.RR' (
PostRR( ,
,RR, -

RequestUriSS 
=SS  
newSS! $
UriSS% (
(SS( )
_baseUrlSS) 1
+SS2 3
$strSS4 :
)SS: ;
,SS; <
ContentTT 
=TT 
newTT !
StringContentTT" /
(TT/ 0
JsonConvertTT0 ;
.TT; <
SerializeObjectTT< K
(TTK L
modelTTL Q
)TTQ R
,TTR S
EncodingTTT \
.TT\ ]
UTF8TT] a
,TTa b
$strTTc u
)TTu v
}UU 
;UU 
returnWW 
ExecuteRequestWW %
<WW% &
TableWW& +
>WW+ ,
(WW, -
requestWW- 4
)WW4 5
;WW5 6
}XX 
catchYY 
(YY 
	ExceptionYY 
exYY 
)YY  
{ZZ 
return[[ 
null[[ 
;[[ 
}\\ 
}]] 	
publicdd 
Tabledd 
Updatedd 
(dd 
Tabledd !
modeldd" '
)dd' (
{ee 	
tryff 
{gg 
HttpRequestMessagehh "
requesthh# *
=hh+ ,
newhh- 0
HttpRequestMessagehh1 C
{ii 
Methodjj 
=jj 

HttpMethodjj '
.jj' (
Putjj( +
,jj+ ,

RequestUrikk 
=kk  
newkk! $
Urikk% (
(kk( )
_baseUrlkk) 1
+kk2 3
$strkk4 <
)kk< =
,kk= >
Contentll 
=ll 
newll !
StringContentll" /
(ll/ 0
JsonConvertll0 ;
.ll; <
SerializeObjectll< K
(llK L
modelllL Q
)llQ R
,llR S
EncodingllT \
.ll\ ]
UTF8ll] a
,lla b
$strllc u
)llu v
}mm 
;mm 
returnoo 
ExecuteRequestoo %
<oo% &
Tableoo& +
>oo+ ,
(oo, -
requestoo- 4
)oo4 5
;oo5 6
}pp 
catchqq 
(qq 
	Exceptionqq 
exqq 
)qq  
{rr 
returnss 
nullss 
;ss 
}tt 
}uu 	
public|| 
bool|| 
Delete|| 
(|| 
int|| 
id|| !
)||! "
{}} 	
return~~ 
ExecuteRemove~~  
(~~  !
new~~! $
Uri~~% (
(~~( )
_baseUrl~~) 1
+~~2 3
$str~~4 =
+~~> ?
id~~@ B
)~~B C
)~~C D
;~~D E
} 	
}
€€ 
} Ά	
sC:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\Global.asax.cs
	namespace		 	
BookingSystemApp		
 
{

 
public 

class 
MvcApplication 
:  !
System" (
.( )
Web) ,
., -
HttpApplication- <
{ 
	protected 
void 
Application_Start (
(( )
)) *
{ 	
AreaRegistration 
. 
RegisterAllAreas -
(- .
). /
;/ 0
FilterConfig 
. !
RegisterGlobalFilters .
(. /
GlobalFilters/ <
.< =
Filters= D
)D E
;E F
RouteConfig 
. 
RegisterRoutes &
(& '

RouteTable' 1
.1 2
Routes2 8
)8 9
;9 :
BundleConfig 
. 
RegisterBundles (
(( )
BundleTable) 4
.4 5
Bundles5 <
)< =
;= >
} 	
} 
} 
uC:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\Global\Global.cs
	namespace 	
BookingSystemApp
 
{ 
public 

static 
class 
Global 
{		 
public 
static 
readonly 
string %
UserIdSessionVar& 6
=7 8
$str9 A
;A B
public 
static 
readonly 
string %
UsernameSessionVar& 8
=9 :
$str; E
;E F
public 
static 
readonly 
string %"
RestaurantIdSessionVar& <
== >
$str? M
;M N
public 
static 
readonly 
string %
RolesSessionVar& 5
=6 7
$str8 A
;A B
public 
static 
readonly 
string %
	AdminRole& /
=0 1
$str2 9
;9 :
public 
static 
readonly 
string %
ManagerRole& 1
=2 3
$str4 =
;= >
public 
static 
readonly 
string %
CustomerRole& 2
=3 4
$str5 ?
;? @
} 
} 
C:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\Properties\AssemblyInfo.cs
[ 
assembly 	
:	 

AssemblyTitle 
( 
$str +
)+ ,
], -
[		 
assembly		 	
:			 

AssemblyDescription		 
(		 
$str		 !
)		! "
]		" #
[

 
assembly

 	
:

	 
!
AssemblyConfiguration

  
(

  !
$str

! #
)

# $
]

$ %
[ 
assembly 	
:	 

AssemblyCompany 
( 
$str 
) 
] 
[ 
assembly 	
:	 

AssemblyProduct 
( 
$str -
)- .
]. /
[ 
assembly 	
:	 

AssemblyCopyright 
( 
$str 0
)0 1
]1 2
[ 
assembly 	
:	 

AssemblyTrademark 
( 
$str 
)  
]  !
[ 
assembly 	
:	 

AssemblyCulture 
( 
$str 
) 
] 
[ 
assembly 	
:	 


ComVisible 
( 
false 
) 
] 
[ 
assembly 	
:	 

Guid 
( 
$str 6
)6 7
]7 8
["" 
assembly"" 	
:""	 

AssemblyVersion"" 
("" 
$str"" $
)""$ %
]""% &
[## 
assembly## 	
:##	 

AssemblyFileVersion## 
(## 
$str## (
)##( )
]##) *π
zC:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\Toast\ToastMessage.cs
	namespace 	
BookingSystemApp
 
. 
Toast  
{ 
[ 
Serializable 
] 
public		 

class		 
ToastMessage		 
{

 
public 
string 
Title 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Message 
{ 
get  #
;# $
set% (
;( )
}* +
public 
	ToastType 
	ToastType "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
bool 
IsSticky 
{ 
get "
;" #
set$ '
;' (
}) *
} 
} ‡
tC:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\Toast\Toastr.cs
	namespace 	
BookingSystemApp
 
. 
Toast  
{ 
[ 
Serializable 
] 
public		 

class		 
Toastr		 
{

 
public 
bool 
ShowNewestOnTop #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
bool 
ShowCloseButton #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
List 
< 
ToastMessage  
>  !
ToastMessages" /
{0 1
get2 5
;5 6
set7 :
;: ;
}< =
public 
ToastMessage 
AddToastMessage +
(+ ,
string, 2
title3 8
,8 9
string: @
messageA H
,H I
	ToastTypeJ S
	toastTypeT ]
)] ^
{ 	
var 
toast 
= 
new 
ToastMessage (
(( )
)) *
{ 
Title 
= 
title 
, 
Message 
= 
message !
,! "
	ToastType 
= 
	toastType %
} 
; 
ToastMessages 
. 
Add 
( 
toast #
)# $
;$ %
return 
toast 
; 
} 	
public 
Toastr 
( 
) 
{ 	
ToastMessages 
= 
new 
List  $
<$ %
ToastMessage% 1
>1 2
(2 3
)3 4
;4 5
ShowNewestOnTop 
= 
false #
;# $
ShowCloseButton 
= 
false #
;# $
}   	
}!! 
}"" Ώ
wC:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\Toast\ToastType.cs
	namespace 	
BookingSystemApp
 
. 
Toast  
{ 
public 

enum 
	ToastType 
{		 
Error

 
,

 
Info 
, 
Success 
, 
Warning 
} 
} ›
C:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\View Models\AddMenuItemVM.cs
	namespace 	
BookingSystemApp
 
. 
View_Models &
{ 
public		 

class		 
AddMenuItemVM		 
{

 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
[ 	
Required	 
] 
[ 	
StringLength	 
( 
$num 
) 
] 
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
[ 	
StringLength	 
( 
$num 
) 
] 
public 
string 
Description !
{" #
get$ '
;' (
set) ,
;, -
}. /
[ 	
Required	 
] 
[ 	
RegularExpression	 
( 
$str ,
), -
]- .
[ 	
Range	 
( 
$num 
, 
$num %
)% &
]& '
[ 	
DisplayFormat	 
( 
DataFormatString '
=( )
$str* 2
,2 3!
ApplyFormatInEditMode4 I
=J K
trueL P
)P Q
]Q R
public 
double 
Price 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Types 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
DietInfo 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
bool 
Selected 
{ 
get "
;" #
set$ '
;' (
}) *
} 
}   ¶
‚C:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\View Models\AddMenuItemsVM.cs
	namespace 	
BookingSystemApp
 
. 
View_Models &
{ 
public 

class 
AddMenuItemsVM 
{		 
public

 
IEnumerable

 
<

 
AddMenuItemVM

 (
>

( )
	MenuItems

* 3
{

4 5
get

6 9
;

9 :
set

; >
;

> ?
}

@ A
} 
} Γ"
}C:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\View Models\BookingVM.cs
	namespace 	
BookingSystemApp
 
. 
View_Models &
{		 
public

 

class

 
	BookingVM

 
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
[ 	
Required	 
] 
public 
int 

CustomerId 
{ 
get  #
;# $
set% (
;( )
}* +
[ 	
Required	 
] 
public 
int 
RestaurantId 
{  !
get" %
;% &
set' *
;* +
}, -
public 
RestaurantVM 

Restaurant &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
[ 	
Required	 
] 
[ 	
DataType	 
( 
DataType 
. 
Text 
)  
]  !
[ 	
DisplayFormat	 
( 
DataFormatString '
=( )
$str* :
,: ;!
ApplyFormatInEditMode< Q
=R S
trueT X
)X Y
]Y Z
public 
DateTime 
BookingMadeDate '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
[ 	
Required	 
] 
public 
TimeSpan 
BookingMadeTime '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
[ 	
Required	 
] 
[ 	
DataType	 
( 
DataType 
. 
Text 
)  
]  !
[   	
DisplayFormat  	 
(   
DataFormatString   '
=  ( )
$str  * :
,  : ;!
ApplyFormatInEditMode  < Q
=  R S
true  T X
)  X Y
]  Y Z
[!! 	
DisplayName!!	 
(!! 
$str!! 
)!! 
]!! 
public"" 
DateTime"" 
BookingDate"" #
{""$ %
get""& )
;"") *
set""+ .
;"". /
}""0 1
[$$ 	
Required$$	 
]$$ 
[%% 	
DisplayName%%	 
(%% 
$str%% 
)%% 
]%% 
public&& 
TimeSpan&& 
	StartTime&& !
{&&" #
get&&$ '
;&&' (
set&&) ,
;&&, -
}&&. /
public(( 
TimeSpan(( 
EndTime(( 
{((  !
get((" %
;((% &
set((' *
;((* +
}((, -
public** 
decimal** 
PaymentTotal** #
{**$ %
get**& )
;**) *
set**+ .
;**. /
}**0 1
public,, 
DateTime,, 
PaymentMadeDate,, '
{,,( )
get,,* -
;,,- .
set,,/ 2
;,,2 3
},,4 5
[.. 	
Required..	 
].. 
[// 	
DisplayName//	 
(// 
$str// *
)//* +
]//+ ,
[00 	
Range00	 
(00 
$num00 
,00 
int00 
.00 
MaxValue00 
,00 
ErrorMessage00  ,
=00- .
$str00/ T
)00T U
]00U V
public11 
int11 
NoCustomers11 
{11  
get11! $
;11$ %
set11& )
;11) *
}11+ ,
[33 	
StringLength33	 
(33 
$num33 
)33 
]33 
[44 	
DisplayName44	 
(44 
$str44 *
)44* +
]44+ ,
public55 
string55 
Comments55 
{55  
get55! $
;55$ %
set55& )
;55) *
}55+ ,
public77 
bool77 
	Cancelled77 
{77 
get77  #
;77# $
set77% (
;77( )
}77* +
}88 
}99 τ
}C:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\View Models\CompanyVM.cs
	namespace 	
BookingSystemApp
 
. 
View_Models &
{ 
public 

class 
	CompanyVM 
{		 
public

 
int

 
Id

 
{

 
get

 
;

 
set

  
;

  !
}

" #
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
Description !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
PhoneNo 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
AddressStreet #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
string 
AddressCounty #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
string 
AddressTown !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
AddressPostalCode '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
public 
int 
RestaurantCount "
{# $
get% (
;( )
set* -
;- .
}/ 0
} 
} ™
~C:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\View Models\DietInfoVM.cs
	namespace 	
BookingSystemApp
 
. 
View_Models &
{ 
public		 

class		 

DietInfoVM		 
{

 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
[ 	
Required	 
] 
[ 	
StringLength	 
( 
$num 
) 
] 
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
} 
} ό
„C:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\View Models\HomeDatePickerVM.cs
	namespace 	
BookingSystemApp
 
. 
View_Models &
{ 
public		 

class		 
HomeDatePickerVM		 !
{

 
public 
int 
RestaurantId 
{  !
get" %
;% &
set' *
;* +
}, -
} 
} 	
{C:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\View Models\LoginVM.cs
	namespace 	
BookingSystemApp
 
. 
View_Models &
{ 
public		 

class		 
LoginVM		 
{

 
[ 	
Required	 
] 
[ 	
Display	 
( 
Name 
= 
$str "
)" #
]# $
public 
string 
Username 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 	
Required	 
] 
[ 	
DataType	 
( 
DataType 
. 
Password #
)# $
]$ %
[ 	
Display	 
( 
Name 
= 
$str "
)" #
]# $
public 
string 
Password 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} ¥
„C:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\View Models\ManageDietInfoVM.cs
	namespace 	
BookingSystemApp
 
. 
View_Models &
{ 
public 

class 
ManageDietInfoVM !
{		 
public

 
int

 
Id

 
{

 
get

 
;

 
set

  
;

  !
}

" #
public 
int 

MenuItemId 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
} 
} ψ
‡C:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\View Models\MenuIndexCategoryVM.cs
	namespace 	
BookingSystemApp
 
. 
View_Models &
{ 
public		 

class		 
MenuIndexCategoryVM		 $
{

 
public 
virtual 
MenuItemType #
Category$ ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
public 
IEnumerable 
< 
MenuItemViewVM )
>) *
	MenuItems+ 4
{5 6
get7 :
;: ;
set< ?
;? @
}A B
} 
} Φ
C:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\View Models\MenuIndexVM.cs
	namespace		 	
BookingSystemApp		
 
.		 
View_Models		 &
{

 
public 

class 
MenuIndexVM 
{ 
public 
IEnumerable 
< 
MenuItemViewVM )
>) *
	MenuItems+ 4
{5 6
get7 :
;: ;
set< ?
;? @
}A B
[ 	
DisplayName	 
( 
$str 
)  
]  !
public 
int 
? 
Type 
{ 
get 
; 
set  #
;# $
}% &
[ 	
DisplayName	 
( 
$str '
)' (
]( )
public 
int 
? 
DietInfo 
{ 
get "
;" #
set$ '
;' (
}) *
[ 	
Range	 
( 
$num 
, 
double 
. 
MaxValue !
,! "
ErrorMessage# /
=0 1
$str2 N
)N O
]O P
[ 	
DisplayName	 
( 
$str !
)! "
]" #
public 
double 
? 

StartPrice !
{" #
get$ '
;' (
set) ,
;, -
}. /
[ 	
Range	 
( 
$num 
, 
double 
. 
MaxValue !
,! "
ErrorMessage# /
=0 1
$str2 N
)N O
]O P
[ 	
DisplayName	 
( 
$str 
)  
]  !
public 
double 
? 
EndPrice 
{  !
get" %
;% &
set' *
;* +
}, -
} 
} Ά
‚C:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\View Models\MenuItemTypeVM.cs
	namespace 	
BookingSystemApp
 
. 
View_Models &
{ 
public		 

class		 
MenuItemTypeVM		 
{

 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
[ 	
Required	 
] 
[ 	
StringLength	 
( 
$num 
) 
] 
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
} 
} 
‚C:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\View Models\MenuItemViewVM.cs
	namespace		 	
BookingSystemApp		
 
.		 
View_Models		 &
{

 
public 

class 
MenuItemViewVM 
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
[ 	
Required	 
] 
[ 	
StringLength	 
( 
$num 
) 
] 
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
[ 	
StringLength	 
( 
$num 
) 
] 
public 
string 
Description !
{" #
get$ '
;' (
set) ,
;, -
}. /
[ 	
Required	 
] 
[ 	
RegularExpression	 
( 
$str ,
), -
]- .
[ 	
Range	 
( 
$num 
, 
$num %
)% &
]& '
[ 	
DisplayFormat	 
( 
DataFormatString '
=( )
$str* 2
,2 3!
ApplyFormatInEditMode4 I
=J K
trueL P
)P Q
]Q R
public 
double 
Price 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
TypesS 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
	DietInfoS 
{  !
get" %
;% &
set' *
;* +
}, -
public   
virtual   
IEnumerable   "
<  " #
MenuItemType  # /
>  / 0
Types  1 6
{  7 8
get  9 <
;  < =
set  > A
;  A B
}  C D
public"" 
virtual"" 
IEnumerable"" "
<""" #
DietInfo""# +
>""+ ,
DietInfo""- 5
{""6 7
get""8 ;
;""; <
set""= @
;""@ A
}""B C
public$$ 
int$$ 
?$$ 
ImageId$$ 
{$$ 
get$$ !
;$$! "
set$$# &
;$$& '
}$$( )
}%% 
}&& 
~C:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\View Models\MenuItemVM.cs
	namespace 	
BookingSystemApp
 
. 
View_Models &
{ 
public		 

class		 

MenuItemVM		 
{

 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
[ 	
Required	 
] 
[ 	
StringLength	 
( 
$num 
) 
] 
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
[ 	
StringLength	 
( 
$num 
) 
] 
public 
string 
Description !
{" #
get$ '
;' (
set) ,
;, -
}. /
[ 	
Required	 
] 
[ 	
RegularExpression	 
( 
$str ,
), -
]- .
[ 	
Range	 
( 
$num 
, 
$num %
)% &
]& '
[ 	
DisplayFormat	 
( 
DataFormatString '
=( )
$str* 2
,2 3!
ApplyFormatInEditMode4 I
=J K
trueL P
)P Q
]Q R
public 
double 
Price 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Types 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
DietInfo 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
HttpPostedFileBase !
Image" '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
} 
}   ’
}C:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\View Models\PaymentVM.cs
	namespace 	
BookingSystemApp
 
. 
View_Models &
{ 
public		 

class		 
	PaymentVM		 
{

 
public 
virtual 
int 
Id 
{ 
get  #
;# $
set% (
;( )
}* +
[ 	
Required	 
] 
public 
virtual 
int 

CustomerId %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
[ 	
Required	 
] 
public 
virtual 
int 
	BookingId $
{% &
get' *
;* +
set, /
;/ 0
}1 2
[ 	
Required	 
] 
[ 	
RegularExpression	 
( 
$str ,
), -
]- .
[ 	
Range	 
( 
$num 
, 
$num %
)% &
]& '
[ 	
DisplayFormat	 
( 
DataFormatString '
=( )
$str* 2
,2 3!
ApplyFormatInEditMode4 I
=J K
trueL P
)P Q
]Q R
public 
virtual 
double 
Amount $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
virtual 
string 
Comments &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
[ 	
Required	 
] 
public 
virtual 
int 
PaymentMethod (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
} 
} “8
~C:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\View Models\RegisterVM.cs
	namespace 	
BookingSystemApp
 
. 
View_Models &
{		 
public

 

class

 

RegisterVM

 
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
[ 	
Required	 
] 
[ 	
StringLength	 
( 
$num 
) 
] 
[ 	
DisplayName	 
( 
$str 
)  
]  !
public 
string 
Username 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 	
StringLength	 
( 
$num 
) 
] 
public 
string 

OwinUserId  
{! "
get# &
;& '
set( +
;+ ,
}- .
[ 	
Required	 
] 
[ 	
StringLength	 
( 
$num 
) 
] 
public 
string 
Title 
{ 
get !
;! "
set# &
;& '
}( )
[ 	
Required	 
] 
[ 	
StringLength	 
( 
$num 
) 
] 
[ 	
DisplayName	 
( 
$str 4
)4 5
]5 6
public 
string 
Forename 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 	
Required	 
] 
[   	
StringLength  	 
(   
$num   
)   
]   
[!! 	
DisplayName!!	 
(!! 
$str!! 3
)!!3 4
]!!4 5
public"" 
string"" 
Surname"" 
{"" 
get""  #
;""# $
set""% (
;""( )
}""* +
[$$ 	
Required$$	 
]$$ 
[%% 	
DataType%%	 
(%% 
DataType%% 
.%% 
Text%% 
)%%  
]%%  !
[&& 	
DisplayFormat&&	 
(&& 
DataFormatString&& '
=&&( )
$str&&* :
,&&: ;!
ApplyFormatInEditMode&&< Q
=&&R S
true&&T X
)&&X Y
]&&Y Z
['' 	
DisplayName''	 
('' 
$str'' $
)''$ %
]''% &
public(( 
DateTime(( 
Dob(( 
{(( 
get(( !
;((! "
set((# &
;((& '
}((( )
[** 	
Required**	 
]** 
[++ 	
StringLength++	 
(++ 
$num++ 
)++ 
]++ 
[,, 	
DisplayName,,	 
(,, 
$str,, 3
),,3 4
],,4 5
public-- 
string-- 
AddressStreet-- #
{--$ %
get--& )
;--) *
set--+ .
;--. /
}--0 1
[// 	
Required//	 
]// 
[00 	
StringLength00	 
(00 
$num00 
)00 
]00 
[11 	
DisplayName11	 
(11 
$str11 0
)110 1
]111 2
public22 
string22 
AddressTown22 !
{22" #
get22$ '
;22' (
set22) ,
;22, -
}22. /
[44 	
Required44	 
]44 
[55 	
StringLength55	 
(55 
$num55 
)55 
]55 
[66 	
DisplayName66	 
(66 
$str66 2
)662 3
]663 4
public77 
string77 
AddressCounty77 #
{77$ %
get77& )
;77) *
set77+ .
;77. /
}770 1
[99 	
Required99	 
]99 
[:: 	
StringLength::	 
(:: 
$num:: 
):: 
]:: 
[;; 	
DisplayName;;	 
(;; 
$str;; 6
);;6 7
];;7 8
public<< 
string<< 
AddressPostalCode<< '
{<<( )
get<<* -
;<<- .
set<</ 2
;<<2 3
}<<4 5
[>> 	
Required>>	 
]>> 
[?? 	
StringLength??	 
(?? 
$num?? 
)?? 
]?? 
[@@ 	
DisplayName@@	 
(@@ 
$str@@ $
)@@$ %
]@@% &
publicAA 
stringAA 
HomePhoneNoAA !
{AA" #
getAA$ '
;AA' (
setAA) ,
;AA, -
}AA. /
[CC 	
StringLengthCC	 
(CC 
$numCC 
)CC 
]CC 
[DD 	
DisplayNameDD	 
(DD 
$strDD $
)DD$ %
]DD% &
publicEE 
stringEE 
WorkPhoneNoEE !
{EE" #
getEE$ '
;EE' (
setEE) ,
;EE, -
}EE. /
[GG 	
RequiredGG	 
]GG 
[HH 	
StringLengthHH	 
(HH 
$numHH 
)HH 
]HH 
[II 	
DisplayNameII	 
(II 
$strII &
)II& '
]II' (
publicJJ 
stringJJ 
MobilePhoneNoJJ #
{JJ$ %
getJJ& )
;JJ) *
setJJ+ .
;JJ. /
}JJ0 1
[LL 	
RequiredLL	 
]LL 
[MM 	
StringLengthMM	 
(MM 
$numMM 
)MM 
]MM 
[NN 	
DisplayNameNN	 
(NN 
$strNN 1
)NN1 2
]NN2 3
publicOO 
stringOO 
EmailOO 
{OO 
getOO !
;OO! "
setOO# &
;OO& '
}OO( )
[QQ 	
RequiredQQ	 
]QQ 
[RR 	
DisplayNameRR	 
(RR 
$strRR 
)RR  
]RR  !
[SS 	
DataTypeSS	 
(SS 
DataTypeSS 
.SS 
PasswordSS #
)SS# $
]SS$ %
publicTT 
stringTT 
PasswordTT 
{TT  
getTT! $
;TT$ %
setTT& )
;TT) *
}TT+ ,
[VV 	
RequiredVV	 
]VV 
[WW 	
DisplayNameWW	 
(WW 
$strWW '
)WW' (
]WW( )
[XX 	
DataTypeXX	 
(XX 
DataTypeXX 
.XX 
PasswordXX #
)XX# $
]XX$ %
publicYY 
stringYY 
ConfirmPasswordYY %
{YY& '
getYY( +
;YY+ ,
setYY- 0
;YY0 1
}YY2 3
}ZZ 
}[[ ω
‡C:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\View Models\RestaurantDetailsVM.cs
	namespace		 	
BookingSystemApp		
 
.		 
View_Models		 &
{

 
public 

class 
RestaurantDetailsVM $
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
int 
	CompanyId 
{ 
get "
;" #
set$ '
;' (
}) *
[ 	
Required	 
] 
[ 	
StringLength	 
( 
$num 
) 
] 
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
[ 	
Required	 
] 
[ 	
StringLength	 
( 
$num 
) 
] 
[ 	
DisplayName	 
( 
$str #
)# $
]$ %
public 
string 
PhoneNo 
{ 
get  #
;# $
set% (
;( )
}* +
[ 	
Required	 
] 
[ 	
StringLength	 
( 
$num 
) 
] 
[ 	
DisplayName	 
( 
$str 
) 
] 
public 
string 
AddressStreet #
{$ %
get& )
;) *
set+ .
;. /
}0 1
[ 	
Required	 
] 
[   	
StringLength  	 
(   
$num   
)   
]   
[!! 	
DisplayName!!	 
(!! 
$str!! 
)!! 
]!! 
public"" 
string"" 
AddressCounty"" #
{""$ %
get""& )
;"") *
set""+ .
;"". /
}""0 1
[$$ 	
Required$$	 
]$$ 
[%% 	
StringLength%%	 
(%% 
$num%% 
)%% 
]%% 
[&& 	
DisplayName&&	 
(&& 
$str&& 
)&& 
]&& 
public'' 
string'' 
AddressTown'' !
{''" #
get''$ '
;''' (
set'') ,
;'', -
}''. /
[)) 	
Required))	 
])) 
[** 	
StringLength**	 
(** 
$num** 
)** 
]** 
[++ 	
DisplayName++	 
(++ 
$str++ "
)++" #
]++# $
public,, 
string,, 
AddressPostalCode,, '
{,,( )
get,,* -
;,,- .
set,,/ 2
;,,2 3
},,4 5
public.. 
IEnumerable.. 
<.. 
MenuIndexCategoryVM.. .
>... /
	MenuItems..0 9
{..: ;
get..< ?
;..? @
set..A D
;..D E
}..F G
[00 	
DisplayName00	 
(00 
$str00 '
)00' (
]00( )
public11 
int11 

TableCount11 
{11 
get11  #
;11# $
set11% (
;11( )
}11* +
public33 
IEnumerable33 
<33 
Table33  
>33  !
Tables33" (
{33) *
get33+ .
;33. /
set330 3
;333 4
}335 6
public55 
IEnumerable55 
<55 
int55 
>55 
ImageIds55  (
{55) *
get55+ .
;55. /
set550 3
;553 4
}555 6
}66 
}77 β
€C:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\View Models\RestaurantVM.cs
	namespace		 	
BookingSystemApp		
 
.		 
View_Models		 &
{

 
public 

class 
RestaurantVM 
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
int 
	CompanyId 
{ 
get "
;" #
set$ '
;' (
}) *
[ 	
Required	 
] 
[ 	
StringLength	 
( 
$num 
) 
] 
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
[ 	
Required	 
] 
[ 	
StringLength	 
( 
$num 
) 
] 
[ 	
DisplayName	 
( 
$str #
)# $
]$ %
public 
string 
PhoneNo 
{ 
get  #
;# $
set% (
;( )
}* +
[ 	
Required	 
] 
[ 	
StringLength	 
( 
$num 
) 
] 
[ 	
DisplayName	 
( 
$str 
) 
] 
public 
string 
AddressStreet #
{$ %
get& )
;) *
set+ .
;. /
}0 1
[ 	
Required	 
] 
[   	
StringLength  	 
(   
$num   
)   
]   
[!! 	
DisplayName!!	 
(!! 
$str!! 
)!! 
]!! 
public"" 
string"" 
AddressCounty"" #
{""$ %
get""& )
;"") *
set""+ .
;"". /
}""0 1
[$$ 	
Required$$	 
]$$ 
[%% 	
StringLength%%	 
(%% 
$num%% 
)%% 
]%% 
[&& 	
DisplayName&&	 
(&& 
$str&& 
)&& 
]&& 
public'' 
string'' 
AddressTown'' !
{''" #
get''$ '
;''' (
set'') ,
;'', -
}''. /
[)) 	
Required))	 
])) 
[** 	
StringLength**	 
(** 
$num** 
)** 
]** 
[++ 	
DisplayName++	 
(++ 
$str++ "
)++" #
]++# $
public,, 
string,, 
AddressPostalCode,, '
{,,( )
get,,* -
;,,- .
set,,/ 2
;,,2 3
},,4 5
public.. 
IEnumerable.. 
<.. 

MenuItemVM.. %
>..% &
	MenuItems..' 0
{..1 2
get..3 6
;..6 7
set..8 ;
;..; <
}..= >
[00 	
DisplayName00	 
(00 
$str00 '
)00' (
]00( )
public11 
int11 

TableCount11 
{11 
get11  #
;11# $
set11% (
;11( )
}11* +
public33 
IEnumerable33 
<33 
Table33  
>33  !
Tables33" (
{33) *
get33+ .
;33. /
set330 3
;333 4
}335 6
public55 
IEnumerable55 
<55 
int55 
>55 
ImageIds55  (
{55) *
get55+ .
;55. /
set550 3
;553 4
}555 6
}66 
}77  
{C:\Users\matty\Documents\Development\Uni\Year 5\FYP\Uni-FYP-RestaurantBookingSystem\BookingSystemApp\View Models\TableVM.cs
	namespace 	
BookingSystemApp
 
. 
View_Models &
{		 
public

 

class

 
TableVM

 
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
[ 	
Required	 
] 
public 
int 
RestaurantId 
{  !
get" %
;% &
set' *
;* +
}, -
[ 	
Required	 
] 
[ 	
DisplayName	 
( 
$str #
)# $
]$ %
public 
int 
TableNo 
{ 
get  
;  !
set" %
;% &
}' (
[ 	
StringLength	 
( 
$num 
) 
] 
[ 	
DisplayName	 
( 
$str '
)' (
]( )
public 
string 
AdditionalNotes %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
[ 	
Required	 
] 
[ 	
DisplayName	 
( 
$str &
)& '
]' (
public 
int 
NoSeats 
{ 
get  
;  !
set" %
;% &
}' (
public 
bool 
Active 
{ 
get  
;  !
set" %
;% &
}' (
} 
} 